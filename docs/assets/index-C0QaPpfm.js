var ju=Object.defineProperty;var Hu=(t,e,s)=>e in t?ju(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>Hu(t,typeof e!="symbol"?e+"":e,s);import{T as me,q as C,u as c,y as on,_ as qr,H as qu,d as At,A as Le,a as Yt,k as ji,D as ai,F as br,c as Gu,R as Ku,b as Oc,l as Ju,E as eh}from"./uiw-CBL-R0iO.js";import{a6 as th,a7 as sh,a8 as ih,a9 as nh,N as go,aa as Ta,ab as ah,ac as rh,ad as oh,a4 as Ae,ae as ch,T as lh}from"./codemirror-D0TfObNK.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}})();function rl(){}function cn(t,e,s){return Math.min(Math.max(t,e),s)}function Ct(t){return t.filter(e=>e[1]).map(e=>e[0]).join(" ")}function dh(t,e){for(let s=0;s<t.length;++s)if(e(t[s],s))return s;return t.length}function uh(t,e){for(let s=t.length-1;s>=0;--s)if(e(t[s],s))return s;return-1}function hh(t,e,s){const i=t.length-1;return[...t.slice(0,e),s,...t.slice(e,i)]}function bo(t,e,s){return[...t.slice(0,e),s,...t.slice(e+1)]}function ol(t,e,s){return[...t.slice(0,e),...t.slice(e+1),s]}function Pc(t){return t!=="0"&&t!==" "&&t!="-"}function Ja(t,e){return(t%e+e)%e}function qt(t){return!t}function rs(t){return Array.from(Array(t).keys())}function _r(t,e,s){return e<=t&&t<=s}function cl(t){return t.reduce((e,s)=>e+s,0)}function Vr(t,e,s=" "){const i=s.repeat(Math.ceil(Math.max((e-t.length)/2,0))),a=s.repeat(Math.floor(Math.max((e-t.length)/2,0)));return`${i}${t}${a}`}function ln(t,e,s){return`${s.repeat(Math.max(e-t.length,0))}${t}`}function at(t){return!0}function ll(t,e){const s=t.toString(2);return e!==void 0?ln(s,e,"0"):s}function yr(t,e){const s=t.toString(10);return e!==void 0?ln(s,e,"0"):s}function ot(t,e){const s=t.toString(16).toUpperCase();return e!==void 0?ln(s,e,"0"):s}function dl(){return(document.activeElement??document.body)===document.body}const ph=/^\.*[a-zA-Z0-9_]*$/,fh=/^\.*[a-zA-Z0-9_]*:$/;function Nt({isBorderless:t=!1,isSelected:e=!1,label:s,onClick:i,tooltip:a,tooltipPosition:r="bottom"}){const o=me(()=>Ct([["Button",!0],[r,!!a],["borderless",t],["selected",e]]),[e]),l=C(d=>{d.preventDefault(),d.stopPropagation(),i()},[i]),u=C(d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),d.stopPropagation(),i())},[i]);return c("div",{class:o,onMouseDown:l,onKeyDown:u,tabIndex:0,"data-tooltip":a,children:s})}function dn(t){const e=C(s=>{for(const i of t)if(s.key===i.key&&(i.ctrl===void 0||!!i.ctrl===s.ctrlKey)&&(i.meta===void 0||!!i.meta===s.metaKey)&&(i.shift===void 0||!!i.shift===s.shiftKey)){i.onPress()&&(s.preventDefault(),s.stopPropagation());return}},[t]);on(()=>(window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)),[e])}/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gh=(...t)=>t.filter((e,s,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===s).join(" ").trim();/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:i,children:a,iconNode:r,class:o="",...l})=>qr("svg",{...bh,width:String(e),height:e,stroke:t,"stroke-width":i?Number(s)*24/Number(e):s,class:["lucide",o].join(" "),...l},[...r.map(([u,d])=>qr(u,d)),...qu(a)]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=(t,e)=>{const s=({class:i="",children:a,...r})=>qr(_h,{...r,iconNode:e,class:gh(`lucide-${mh(t)}`,i)},a);return s.displayName=`${t}`,s};/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=lt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=lt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=lt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=lt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=lt("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=lt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=lt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=lt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=lt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=lt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=lt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=lt("Pipette",[["path",{d:"m2 22 1-1h3l9-9",key:"1sre89"}],["path",{d:"M3 21v-3l9-9",key:"hpe2y6"}],["path",{d:"m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l.4.4a2.1 2.1 0 1 1-3 3l-3.8-3.8a2.1 2.1 0 1 1 3-3l.4.4Z",key:"196du1"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=lt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=lt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=lt("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-preact v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=lt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ra({href:t,label:e}){return c("a",{className:"ExternalLink",href:t,target:"_blank",children:[e," ",c(xh,{size:"0.8em"})]})}function pl({children:t,className:e="",header:s}){const i=Ct([["Section",!0],[e,!!e]]);return c("div",{class:i,children:[s,c("div",{class:"Section_Children",children:t})]})}function It({children:t,label:e,isVisible:s,onChange:i}){const a=C(()=>i(!s),[s]),r=Ct([["Section",!0],["collapsible",!0],["collapsed",!s]]),o=C(u=>{u.preventDefault(),a()},[a]),l=C(u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),a())},[a]);return c(pl,{className:r,header:c("div",{class:"Section_Header",onKeyDown:l,onMouseDown:o,tabIndex:0,children:[c("span",{children:e}),s?c(vh,{size:"1.5em"}):c(ul,{size:"1.5em"})]}),children:t})}var de;(function(t){t.assertEqual=a=>a;function e(a){}t.assertIs=e;function s(a){throw new Error}t.assertNever=s,t.arrayToEnum=a=>{const r={};for(const o of a)r[o]=o;return r},t.getValidEnumValues=a=>{const r=t.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of r)o[l]=a[l];return t.objectValues(o)},t.objectValues=a=>t.objectKeys(a).map(function(r){return a[r]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const r=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&r.push(o);return r},t.find=(a,r)=>{for(const o of a)if(r(o))return o},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function i(a,r=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(r)}t.joinValues=i,t.jsonStringifyReplacer=(a,r)=>typeof r=="bigint"?r.toString():r})(de||(de={}));var Gr;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(Gr||(Gr={}));const L=de.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ys=t=>{switch(typeof t){case"undefined":return L.undefined;case"string":return L.string;case"number":return isNaN(t)?L.nan:L.number;case"boolean":return L.boolean;case"function":return L.function;case"bigint":return L.bigint;case"symbol":return L.symbol;case"object":return Array.isArray(t)?L.array:t===null?L.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?L.promise:typeof Map<"u"&&t instanceof Map?L.map:typeof Set<"u"&&t instanceof Set?L.set:typeof Date<"u"&&t instanceof Date?L.date:L.object;default:return L.unknown}},I=de.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Th=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Lt extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(r){return r.message},i={_errors:[]},a=r=>{for(const o of r.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)i._errors.push(s(o));else{let l=i,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(s(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return a(this),i}static assert(e){if(!(e instanceof Lt))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,de.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},i=[];for(const a of this.issues)a.path.length>0?(s[a.path[0]]=s[a.path[0]]||[],s[a.path[0]].push(e(a))):i.push(e(a));return{formErrors:i,fieldErrors:s}}get formErrors(){return this.flatten()}}Lt.create=t=>new Lt(t);const Hi=(t,e)=>{let s;switch(t.code){case I.invalid_type:t.received===L.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case I.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,de.jsonStringifyReplacer)}`;break;case I.unrecognized_keys:s=`Unrecognized key(s) in object: ${de.joinValues(t.keys,", ")}`;break;case I.invalid_union:s="Invalid input";break;case I.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${de.joinValues(t.options)}`;break;case I.invalid_enum_value:s=`Invalid enum value. Expected ${de.joinValues(t.options)}, received '${t.received}'`;break;case I.invalid_arguments:s="Invalid function arguments";break;case I.invalid_return_type:s="Invalid function return type";break;case I.invalid_date:s="Invalid date";break;case I.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:de.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case I.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case I.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case I.custom:s="Invalid input";break;case I.invalid_intersection_types:s="Intersection results could not be merged";break;case I.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case I.not_finite:s="Number must be finite";break;default:s=e.defaultError,de.assertNever(t)}return{message:s}};let fl=Hi;function Rh(t){fl=t}function tr(){return fl}const sr=t=>{const{data:e,path:s,errorMaps:i,issueData:a}=t,r=[...s,...a.path||[]],o={...a,path:r};if(a.message!==void 0)return{...a,path:r,message:a.message};let l="";const u=i.filter(d=>!!d).slice().reverse();for(const d of u)l=d(o,{data:e,defaultError:l}).message;return{...a,path:r,message:l}},Eh=[];function N(t,e){const s=tr(),i=sr({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===Hi?void 0:Hi].filter(a=>!!a)});t.common.issues.push(i)}class ct{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const i=[];for(const a of s){if(a.status==="aborted")return Y;a.status==="dirty"&&e.dirty(),i.push(a.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,s){const i=[];for(const a of s){const r=await a.key,o=await a.value;i.push({key:r,value:o})}return ct.mergeObjectSync(e,i)}static mergeObjectSync(e,s){const i={};for(const a of s){const{key:r,value:o}=a;if(r.status==="aborted"||o.status==="aborted")return Y;r.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(i[r.value]=o.value)}return{status:e.value,value:i}}}const Y=Object.freeze({status:"aborted"}),Bi=t=>({status:"dirty",value:t}),pt=t=>({status:"valid",value:t}),Kr=t=>t.status==="aborted",Jr=t=>t.status==="dirty",si=t=>t.status==="valid",Wn=t=>typeof Promise<"u"&&t instanceof Promise;function ir(t,e,s,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function ml(t,e,s,i,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,s),s}var F;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(F||(F={}));var wn,xn;class ds{constructor(e,s,i,a){this._cachedPath=[],this.parent=e,this.data=s,this._path=i,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ac=(t,e)=>{if(si(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new Lt(t.common.issues);return this._error=s,this._error}}};function J(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:i,description:a}=t;if(e&&(s||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,l)=>{var u,d;const{message:p}=t;return o.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:(u=p??i)!==null&&u!==void 0?u:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(d=p??s)!==null&&d!==void 0?d:l.defaultError}},description:a}}class ee{get description(){return this._def.description}_getType(e){return ys(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:ys(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ct,ctx:{common:e.parent.common,data:e.data,parsedType:ys(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(Wn(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const i=this.safeParse(e,s);if(i.success)return i.data;throw i.error}safeParse(e,s){var i;const a={common:{issues:[],async:(i=s==null?void 0:s.async)!==null&&i!==void 0?i:!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ys(e)},r=this._parseSync({data:e,path:a.path,parent:a});return Ac(a,r)}"~validate"(e){var s,i;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ys(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:a});return si(r)?{value:r.value}:{issues:a.common.issues}}catch(r){!((i=(s=r==null?void 0:r.message)===null||s===void 0?void 0:s.toLowerCase())===null||i===void 0)&&i.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(r=>si(r)?{value:r.value}:{issues:a.common.issues})}async parseAsync(e,s){const i=await this.safeParseAsync(e,s);if(i.success)return i.data;throw i.error}async safeParseAsync(e,s){const i={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ys(e)},a=this._parse({data:e,path:i.path,parent:i}),r=await(Wn(a)?a:Promise.resolve(a));return Ac(i,r)}refine(e,s){const i=a=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,r)=>{const o=e(a),l=()=>r.addIssue({code:I.custom,...i(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,s){return this._refinement((i,a)=>e(i)?!0:(a.addIssue(typeof s=="function"?s(i,a):s),!1))}_refinement(e){return new Zt({schema:this,typeName:U.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return os.create(this,this._def)}nullable(){return Ns.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ut.create(this)}promise(){return Gi.create(this,this._def)}or(e){return Yn.create([this,e],this._def)}and(e){return jn.create(this,e,this._def)}transform(e){return new Zt({...J(this._def),schema:this,typeName:U.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new Jn({...J(this._def),innerType:this,defaultValue:s,typeName:U.ZodDefault})}brand(){return new vo({typeName:U.ZodBranded,type:this,...J(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new ea({...J(this._def),innerType:this,catchValue:s,typeName:U.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return ca.create(this,e)}readonly(){return ta.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Dh=/^c[^\s-]{8,}$/i,Nh=/^[0-9a-z]+$/,Lh=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Mh=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Bh=/^[a-z0-9_-]{21}$/i,$h=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Vh=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Fh=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zh="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Fr;const Qh=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wh=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Uh=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Zh=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Xh=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Yh=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,gl="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",jh=new RegExp(`^${gl}$`);function bl(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Hh(t){return new RegExp(`^${bl(t)}$`)}function _l(t){let e=`${gl}T${bl(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function qh(t,e){return!!((e==="v4"||!e)&&Qh.test(t)||(e==="v6"||!e)&&Uh.test(t))}function Gh(t,e){if(!$h.test(t))return!1;try{const[s]=t.split("."),i=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(i));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function Kh(t,e){return!!((e==="v4"||!e)&&Wh.test(t)||(e==="v6"||!e)&&Zh.test(t))}class Qt extends ee{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==L.string){const r=this._getOrReturnCtx(e);return N(r,{code:I.invalid_type,expected:L.string,received:r.parsedType}),Y}const i=new ct;let a;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:I.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="max")e.data.length>r.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:I.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="length"){const o=e.data.length>r.value,l=e.data.length<r.value;(o||l)&&(a=this._getOrReturnCtx(e,a),o?N(a,{code:I.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):l&&N(a,{code:I.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),i.dirty())}else if(r.kind==="email")Fh.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"email",code:I.invalid_string,message:r.message}),i.dirty());else if(r.kind==="emoji")Fr||(Fr=new RegExp(zh,"u")),Fr.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"emoji",code:I.invalid_string,message:r.message}),i.dirty());else if(r.kind==="uuid")Mh.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"uuid",code:I.invalid_string,message:r.message}),i.dirty());else if(r.kind==="nanoid")Bh.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"nanoid",code:I.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid")Dh.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"cuid",code:I.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid2")Nh.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"cuid2",code:I.invalid_string,message:r.message}),i.dirty());else if(r.kind==="ulid")Lh.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"ulid",code:I.invalid_string,message:r.message}),i.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),N(a,{validation:"url",code:I.invalid_string,message:r.message}),i.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"regex",code:I.invalid_string,message:r.message}),i.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(a=this._getOrReturnCtx(e,a),N(a,{code:I.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),i.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(a=this._getOrReturnCtx(e,a),N(a,{code:I.invalid_string,validation:{startsWith:r.value},message:r.message}),i.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(a=this._getOrReturnCtx(e,a),N(a,{code:I.invalid_string,validation:{endsWith:r.value},message:r.message}),i.dirty()):r.kind==="datetime"?_l(r).test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{code:I.invalid_string,validation:"datetime",message:r.message}),i.dirty()):r.kind==="date"?jh.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{code:I.invalid_string,validation:"date",message:r.message}),i.dirty()):r.kind==="time"?Hh(r).test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{code:I.invalid_string,validation:"time",message:r.message}),i.dirty()):r.kind==="duration"?Vh.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"duration",code:I.invalid_string,message:r.message}),i.dirty()):r.kind==="ip"?qh(e.data,r.version)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"ip",code:I.invalid_string,message:r.message}),i.dirty()):r.kind==="jwt"?Gh(e.data,r.alg)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"jwt",code:I.invalid_string,message:r.message}),i.dirty()):r.kind==="cidr"?Kh(e.data,r.version)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"cidr",code:I.invalid_string,message:r.message}),i.dirty()):r.kind==="base64"?Xh.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"base64",code:I.invalid_string,message:r.message}),i.dirty()):r.kind==="base64url"?Yh.test(e.data)||(a=this._getOrReturnCtx(e,a),N(a,{validation:"base64url",code:I.invalid_string,message:r.message}),i.dirty()):de.assertNever(r);return{status:i.value,value:e.data}}_regex(e,s,i){return this.refinement(a=>e.test(a),{validation:s,code:I.invalid_string,...F.errToObj(i)})}_addCheck(e){return new Qt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...F.errToObj(e)})}url(e){return this._addCheck({kind:"url",...F.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...F.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...F.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...F.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...F.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...F.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...F.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...F.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...F.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...F.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...F.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...F.errToObj(e)})}datetime(e){var s,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(s=e==null?void 0:e.offset)!==null&&s!==void 0?s:!1,local:(i=e==null?void 0:e.local)!==null&&i!==void 0?i:!1,...F.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...F.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...F.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...F.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...F.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...F.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...F.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...F.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...F.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...F.errToObj(s)})}nonempty(e){return this.min(1,F.errToObj(e))}trim(){return new Qt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Qt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Qt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}Qt.create=t=>{var e;return new Qt({checks:[],typeName:U.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...J(t)})};function Jh(t,e){const s=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,a=s>i?s:i,r=parseInt(t.toFixed(a).replace(".","")),o=parseInt(e.toFixed(a).replace(".",""));return r%o/Math.pow(10,a)}class Rs extends ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==L.number){const r=this._getOrReturnCtx(e);return N(r,{code:I.invalid_type,expected:L.number,received:r.parsedType}),Y}let i;const a=new ct;for(const r of this._def.checks)r.kind==="int"?de.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{code:I.invalid_type,expected:"integer",received:"float",message:r.message}),a.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(i=this._getOrReturnCtx(e,i),N(i,{code:I.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(i=this._getOrReturnCtx(e,i),N(i,{code:I.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):r.kind==="multipleOf"?Jh(e.data,r.value)!==0&&(i=this._getOrReturnCtx(e,i),N(i,{code:I.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),N(i,{code:I.not_finite,message:r.message}),a.dirty()):de.assertNever(r);return{status:a.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,F.toString(s))}gt(e,s){return this.setLimit("min",e,!1,F.toString(s))}lte(e,s){return this.setLimit("max",e,!0,F.toString(s))}lt(e,s){return this.setLimit("max",e,!1,F.toString(s))}setLimit(e,s,i,a){return new Rs({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:i,message:F.toString(a)}]})}_addCheck(e){return new Rs({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:F.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:F.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:F.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:F.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:F.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:F.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:F.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:F.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:F.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&de.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(s===null||i.value>s)&&(s=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(s)&&Number.isFinite(e)}}Rs.create=t=>new Rs({checks:[],typeName:U.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...J(t)});class Es extends ee{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==L.bigint)return this._getInvalidInput(e);let i;const a=new ct;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(i=this._getOrReturnCtx(e,i),N(i,{code:I.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(i=this._getOrReturnCtx(e,i),N(i,{code:I.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),a.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),N(i,{code:I.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):de.assertNever(r);return{status:a.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return N(s,{code:I.invalid_type,expected:L.bigint,received:s.parsedType}),Y}gte(e,s){return this.setLimit("min",e,!0,F.toString(s))}gt(e,s){return this.setLimit("min",e,!1,F.toString(s))}lte(e,s){return this.setLimit("max",e,!0,F.toString(s))}lt(e,s){return this.setLimit("max",e,!1,F.toString(s))}setLimit(e,s,i,a){return new Es({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:i,message:F.toString(a)}]})}_addCheck(e){return new Es({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:F.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:F.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:F.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:F.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:F.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}Es.create=t=>{var e;return new Es({checks:[],typeName:U.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...J(t)})};class Un extends ee{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==L.boolean){const i=this._getOrReturnCtx(e);return N(i,{code:I.invalid_type,expected:L.boolean,received:i.parsedType}),Y}return pt(e.data)}}Un.create=t=>new Un({typeName:U.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...J(t)});class ii extends ee{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==L.date){const r=this._getOrReturnCtx(e);return N(r,{code:I.invalid_type,expected:L.date,received:r.parsedType}),Y}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return N(r,{code:I.invalid_date}),Y}const i=new ct;let a;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:I.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),i.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(a=this._getOrReturnCtx(e,a),N(a,{code:I.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),i.dirty()):de.assertNever(r);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ii({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:F.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:F.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}ii.create=t=>new ii({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:U.ZodDate,...J(t)});class nr extends ee{_parse(e){if(this._getType(e)!==L.symbol){const i=this._getOrReturnCtx(e);return N(i,{code:I.invalid_type,expected:L.symbol,received:i.parsedType}),Y}return pt(e.data)}}nr.create=t=>new nr({typeName:U.ZodSymbol,...J(t)});class Zn extends ee{_parse(e){if(this._getType(e)!==L.undefined){const i=this._getOrReturnCtx(e);return N(i,{code:I.invalid_type,expected:L.undefined,received:i.parsedType}),Y}return pt(e.data)}}Zn.create=t=>new Zn({typeName:U.ZodUndefined,...J(t)});class Xn extends ee{_parse(e){if(this._getType(e)!==L.null){const i=this._getOrReturnCtx(e);return N(i,{code:I.invalid_type,expected:L.null,received:i.parsedType}),Y}return pt(e.data)}}Xn.create=t=>new Xn({typeName:U.ZodNull,...J(t)});class qi extends ee{constructor(){super(...arguments),this._any=!0}_parse(e){return pt(e.data)}}qi.create=t=>new qi({typeName:U.ZodAny,...J(t)});class Ks extends ee{constructor(){super(...arguments),this._unknown=!0}_parse(e){return pt(e.data)}}Ks.create=t=>new Ks({typeName:U.ZodUnknown,...J(t)});class xs extends ee{_parse(e){const s=this._getOrReturnCtx(e);return N(s,{code:I.invalid_type,expected:L.never,received:s.parsedType}),Y}}xs.create=t=>new xs({typeName:U.ZodNever,...J(t)});class ar extends ee{_parse(e){if(this._getType(e)!==L.undefined){const i=this._getOrReturnCtx(e);return N(i,{code:I.invalid_type,expected:L.void,received:i.parsedType}),Y}return pt(e.data)}}ar.create=t=>new ar({typeName:U.ZodVoid,...J(t)});class Ut extends ee{_parse(e){const{ctx:s,status:i}=this._processInputParams(e),a=this._def;if(s.parsedType!==L.array)return N(s,{code:I.invalid_type,expected:L.array,received:s.parsedType}),Y;if(a.exactLength!==null){const o=s.data.length>a.exactLength.value,l=s.data.length<a.exactLength.value;(o||l)&&(N(s,{code:o?I.too_big:I.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),i.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(N(s,{code:I.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),i.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(N(s,{code:I.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),i.dirty()),s.common.async)return Promise.all([...s.data].map((o,l)=>a.type._parseAsync(new ds(s,o,s.path,l)))).then(o=>ct.mergeArray(i,o));const r=[...s.data].map((o,l)=>a.type._parseSync(new ds(s,o,s.path,l)));return ct.mergeArray(i,r)}get element(){return this._def.type}min(e,s){return new Ut({...this._def,minLength:{value:e,message:F.toString(s)}})}max(e,s){return new Ut({...this._def,maxLength:{value:e,message:F.toString(s)}})}length(e,s){return new Ut({...this._def,exactLength:{value:e,message:F.toString(s)}})}nonempty(e){return this.min(1,e)}}Ut.create=(t,e)=>new Ut({type:t,minLength:null,maxLength:null,exactLength:null,typeName:U.ZodArray,...J(e)});function bi(t){if(t instanceof Ee){const e={};for(const s in t.shape){const i=t.shape[s];e[s]=os.create(bi(i))}return new Ee({...t._def,shape:()=>e})}else return t instanceof Ut?new Ut({...t._def,type:bi(t.element)}):t instanceof os?os.create(bi(t.unwrap())):t instanceof Ns?Ns.create(bi(t.unwrap())):t instanceof us?us.create(t.items.map(e=>bi(e))):t}class Ee extends ee{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=de.objectKeys(e);return this._cached={shape:e,keys:s}}_parse(e){if(this._getType(e)!==L.object){const d=this._getOrReturnCtx(e);return N(d,{code:I.invalid_type,expected:L.object,received:d.parsedType}),Y}const{status:i,ctx:a}=this._processInputParams(e),{shape:r,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof xs&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const u=[];for(const d of o){const p=r[d],f=a.data[d];u.push({key:{status:"valid",value:d},value:p._parse(new ds(a,f,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof xs){const d=this._def.unknownKeys;if(d==="passthrough")for(const p of l)u.push({key:{status:"valid",value:p},value:{status:"valid",value:a.data[p]}});else if(d==="strict")l.length>0&&(N(a,{code:I.unrecognized_keys,keys:l}),i.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const p of l){const f=a.data[p];u.push({key:{status:"valid",value:p},value:d._parse(new ds(a,f,a.path,p)),alwaysSet:p in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const p of u){const f=await p.key,h=await p.value;d.push({key:f,value:h,alwaysSet:p.alwaysSet})}return d}).then(d=>ct.mergeObjectSync(i,d)):ct.mergeObjectSync(i,u)}get shape(){return this._def.shape()}strict(e){return F.errToObj,new Ee({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,i)=>{var a,r,o,l;const u=(o=(r=(a=this._def).errorMap)===null||r===void 0?void 0:r.call(a,s,i).message)!==null&&o!==void 0?o:i.defaultError;return s.code==="unrecognized_keys"?{message:(l=F.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new Ee({...this._def,unknownKeys:"strip"})}passthrough(){return new Ee({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ee({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ee({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:U.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new Ee({...this._def,catchall:e})}pick(e){const s={};return de.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(s[i]=this.shape[i])}),new Ee({...this._def,shape:()=>s})}omit(e){const s={};return de.objectKeys(this.shape).forEach(i=>{e[i]||(s[i]=this.shape[i])}),new Ee({...this._def,shape:()=>s})}deepPartial(){return bi(this)}partial(e){const s={};return de.objectKeys(this.shape).forEach(i=>{const a=this.shape[i];e&&!e[i]?s[i]=a:s[i]=a.optional()}),new Ee({...this._def,shape:()=>s})}required(e){const s={};return de.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])s[i]=this.shape[i];else{let r=this.shape[i];for(;r instanceof os;)r=r._def.innerType;s[i]=r}}),new Ee({...this._def,shape:()=>s})}keyof(){return yl(de.objectKeys(this.shape))}}Ee.create=(t,e)=>new Ee({shape:()=>t,unknownKeys:"strip",catchall:xs.create(),typeName:U.ZodObject,...J(e)});Ee.strictCreate=(t,e)=>new Ee({shape:()=>t,unknownKeys:"strict",catchall:xs.create(),typeName:U.ZodObject,...J(e)});Ee.lazycreate=(t,e)=>new Ee({shape:t,unknownKeys:"strip",catchall:xs.create(),typeName:U.ZodObject,...J(e)});class Yn extends ee{_parse(e){const{ctx:s}=this._processInputParams(e),i=this._def.options;function a(r){for(const l of r)if(l.result.status==="valid")return l.result;for(const l of r)if(l.result.status==="dirty")return s.common.issues.push(...l.ctx.common.issues),l.result;const o=r.map(l=>new Lt(l.ctx.common.issues));return N(s,{code:I.invalid_union,unionErrors:o}),Y}if(s.common.async)return Promise.all(i.map(async r=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await r._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(a);{let r;const o=[];for(const u of i){const d={...s,common:{...s.common,issues:[]},parent:null},p=u._parseSync({data:s.data,path:s.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!r&&(r={result:p,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(r)return s.common.issues.push(...r.ctx.common.issues),r.result;const l=o.map(u=>new Lt(u));return N(s,{code:I.invalid_union,unionErrors:l}),Y}}get options(){return this._def.options}}Yn.create=(t,e)=>new Yn({options:t,typeName:U.ZodUnion,...J(e)});const bs=t=>t instanceof qn?bs(t.schema):t instanceof Zt?bs(t.innerType()):t instanceof Gn?[t.value]:t instanceof Ds?t.options:t instanceof Kn?de.objectValues(t.enum):t instanceof Jn?bs(t._def.innerType):t instanceof Zn?[void 0]:t instanceof Xn?[null]:t instanceof os?[void 0,...bs(t.unwrap())]:t instanceof Ns?[null,...bs(t.unwrap())]:t instanceof vo||t instanceof ta?bs(t.unwrap()):t instanceof ea?bs(t._def.innerType):[];class vr extends ee{_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==L.object)return N(s,{code:I.invalid_type,expected:L.object,received:s.parsedType}),Y;const i=this.discriminator,a=s.data[i],r=this.optionsMap.get(a);return r?s.common.async?r._parseAsync({data:s.data,path:s.path,parent:s}):r._parseSync({data:s.data,path:s.path,parent:s}):(N(s,{code:I.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,s,i){const a=new Map;for(const r of s){const o=bs(r.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(a.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);a.set(l,r)}}return new vr({typeName:U.ZodDiscriminatedUnion,discriminator:e,options:s,optionsMap:a,...J(i)})}}function eo(t,e){const s=ys(t),i=ys(e);if(t===e)return{valid:!0,data:t};if(s===L.object&&i===L.object){const a=de.objectKeys(e),r=de.objectKeys(t).filter(l=>a.indexOf(l)!==-1),o={...t,...e};for(const l of r){const u=eo(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(s===L.array&&i===L.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let r=0;r<t.length;r++){const o=t[r],l=e[r],u=eo(o,l);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return s===L.date&&i===L.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class jn extends ee{_parse(e){const{status:s,ctx:i}=this._processInputParams(e),a=(r,o)=>{if(Kr(r)||Kr(o))return Y;const l=eo(r.value,o.value);return l.valid?((Jr(r)||Jr(o))&&s.dirty(),{status:s.value,value:l.data}):(N(i,{code:I.invalid_intersection_types}),Y)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([r,o])=>a(r,o)):a(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}jn.create=(t,e,s)=>new jn({left:t,right:e,typeName:U.ZodIntersection,...J(s)});class us extends ee{_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==L.array)return N(i,{code:I.invalid_type,expected:L.array,received:i.parsedType}),Y;if(i.data.length<this._def.items.length)return N(i,{code:I.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&i.data.length>this._def.items.length&&(N(i,{code:I.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const r=[...i.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new ds(i,o,i.path,l)):null}).filter(o=>!!o);return i.common.async?Promise.all(r).then(o=>ct.mergeArray(s,o)):ct.mergeArray(s,r)}get items(){return this._def.items}rest(e){return new us({...this._def,rest:e})}}us.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new us({items:t,typeName:U.ZodTuple,rest:null,...J(e)})};class Hn extends ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==L.object)return N(i,{code:I.invalid_type,expected:L.object,received:i.parsedType}),Y;const a=[],r=this._def.keyType,o=this._def.valueType;for(const l in i.data)a.push({key:r._parse(new ds(i,l,i.path,l)),value:o._parse(new ds(i,i.data[l],i.path,l)),alwaysSet:l in i.data});return i.common.async?ct.mergeObjectAsync(s,a):ct.mergeObjectSync(s,a)}get element(){return this._def.valueType}static create(e,s,i){return s instanceof ee?new Hn({keyType:e,valueType:s,typeName:U.ZodRecord,...J(i)}):new Hn({keyType:Qt.create(),valueType:e,typeName:U.ZodRecord,...J(s)})}}class rr extends ee{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==L.map)return N(i,{code:I.invalid_type,expected:L.map,received:i.parsedType}),Y;const a=this._def.keyType,r=this._def.valueType,o=[...i.data.entries()].map(([l,u],d)=>({key:a._parse(new ds(i,l,i.path,[d,"key"])),value:r._parse(new ds(i,u,i.path,[d,"value"]))}));if(i.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,p=await u.value;if(d.status==="aborted"||p.status==="aborted")return Y;(d.status==="dirty"||p.status==="dirty")&&s.dirty(),l.set(d.value,p.value)}return{status:s.value,value:l}})}else{const l=new Map;for(const u of o){const d=u.key,p=u.value;if(d.status==="aborted"||p.status==="aborted")return Y;(d.status==="dirty"||p.status==="dirty")&&s.dirty(),l.set(d.value,p.value)}return{status:s.value,value:l}}}}rr.create=(t,e,s)=>new rr({valueType:e,keyType:t,typeName:U.ZodMap,...J(s)});class ni extends ee{_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.parsedType!==L.set)return N(i,{code:I.invalid_type,expected:L.set,received:i.parsedType}),Y;const a=this._def;a.minSize!==null&&i.data.size<a.minSize.value&&(N(i,{code:I.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&i.data.size>a.maxSize.value&&(N(i,{code:I.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const r=this._def.valueType;function o(u){const d=new Set;for(const p of u){if(p.status==="aborted")return Y;p.status==="dirty"&&s.dirty(),d.add(p.value)}return{status:s.value,value:d}}const l=[...i.data.values()].map((u,d)=>r._parse(new ds(i,u,i.path,d)));return i.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,s){return new ni({...this._def,minSize:{value:e,message:F.toString(s)}})}max(e,s){return new ni({...this._def,maxSize:{value:e,message:F.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}ni.create=(t,e)=>new ni({valueType:t,minSize:null,maxSize:null,typeName:U.ZodSet,...J(e)});class zi extends ee{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==L.function)return N(s,{code:I.invalid_type,expected:L.function,received:s.parsedType}),Y;function i(l,u){return sr({data:l,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,tr(),Hi].filter(d=>!!d),issueData:{code:I.invalid_arguments,argumentsError:u}})}function a(l,u){return sr({data:l,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,tr(),Hi].filter(d=>!!d),issueData:{code:I.invalid_return_type,returnTypeError:u}})}const r={errorMap:s.common.contextualErrorMap},o=s.data;if(this._def.returns instanceof Gi){const l=this;return pt(async function(...u){const d=new Lt([]),p=await l._def.args.parseAsync(u,r).catch(_=>{throw d.addIssue(i(u,_)),d}),f=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(f,r).catch(_=>{throw d.addIssue(a(f,_)),d})})}else{const l=this;return pt(function(...u){const d=l._def.args.safeParse(u,r);if(!d.success)throw new Lt([i(u,d.error)]);const p=Reflect.apply(o,this,d.data),f=l._def.returns.safeParse(p,r);if(!f.success)throw new Lt([a(p,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new zi({...this._def,args:us.create(e).rest(Ks.create())})}returns(e){return new zi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,s,i){return new zi({args:e||us.create([]).rest(Ks.create()),returns:s||Ks.create(),typeName:U.ZodFunction,...J(i)})}}class qn extends ee{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}qn.create=(t,e)=>new qn({getter:t,typeName:U.ZodLazy,...J(e)});class Gn extends ee{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return N(s,{received:s.data,code:I.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:e.data}}get value(){return this._def.value}}Gn.create=(t,e)=>new Gn({value:t,typeName:U.ZodLiteral,...J(e)});function yl(t,e){return new Ds({values:t,typeName:U.ZodEnum,...J(e)})}class Ds extends ee{constructor(){super(...arguments),wn.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),i=this._def.values;return N(s,{expected:de.joinValues(i),received:s.parsedType,code:I.invalid_type}),Y}if(ir(this,wn)||ml(this,wn,new Set(this._def.values)),!ir(this,wn).has(e.data)){const s=this._getOrReturnCtx(e),i=this._def.values;return N(s,{received:s.data,code:I.invalid_enum_value,options:i}),Y}return pt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return Ds.create(e,{...this._def,...s})}exclude(e,s=this._def){return Ds.create(this.options.filter(i=>!e.includes(i)),{...this._def,...s})}}wn=new WeakMap;Ds.create=yl;class Kn extends ee{constructor(){super(...arguments),xn.set(this,void 0)}_parse(e){const s=de.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==L.string&&i.parsedType!==L.number){const a=de.objectValues(s);return N(i,{expected:de.joinValues(a),received:i.parsedType,code:I.invalid_type}),Y}if(ir(this,xn)||ml(this,xn,new Set(de.getValidEnumValues(this._def.values))),!ir(this,xn).has(e.data)){const a=de.objectValues(s);return N(i,{received:i.data,code:I.invalid_enum_value,options:a}),Y}return pt(e.data)}get enum(){return this._def.values}}xn=new WeakMap;Kn.create=(t,e)=>new Kn({values:t,typeName:U.ZodNativeEnum,...J(e)});class Gi extends ee{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==L.promise&&s.common.async===!1)return N(s,{code:I.invalid_type,expected:L.promise,received:s.parsedType}),Y;const i=s.parsedType===L.promise?s.data:Promise.resolve(s.data);return pt(i.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Gi.create=(t,e)=>new Gi({type:t,typeName:U.ZodPromise,...J(e)});class Zt extends ee{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===U.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:i}=this._processInputParams(e),a=this._def.effect||null,r={addIssue:o=>{N(i,o),o.fatal?s.abort():s.dirty()},get path(){return i.path}};if(r.addIssue=r.addIssue.bind(r),a.type==="preprocess"){const o=a.transform(i.data,r);if(i.common.async)return Promise.resolve(o).then(async l=>{if(s.value==="aborted")return Y;const u=await this._def.schema._parseAsync({data:l,path:i.path,parent:i});return u.status==="aborted"?Y:u.status==="dirty"||s.value==="dirty"?Bi(u.value):u});{if(s.value==="aborted")return Y;const l=this._def.schema._parseSync({data:o,path:i.path,parent:i});return l.status==="aborted"?Y:l.status==="dirty"||s.value==="dirty"?Bi(l.value):l}}if(a.type==="refinement"){const o=l=>{const u=a.refinement(l,r);if(i.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(i.common.async===!1){const l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?Y:(l.status==="dirty"&&s.dirty(),o(l.value),{status:s.value,value:l.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>l.status==="aborted"?Y:(l.status==="dirty"&&s.dirty(),o(l.value).then(()=>({status:s.value,value:l.value}))))}if(a.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!si(o))return o;const l=a.transform(o.value,r);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:l}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>si(o)?Promise.resolve(a.transform(o.value,r)).then(l=>({status:s.value,value:l})):o);de.assertNever(a)}}Zt.create=(t,e,s)=>new Zt({schema:t,typeName:U.ZodEffects,effect:e,...J(s)});Zt.createWithPreprocess=(t,e,s)=>new Zt({schema:e,effect:{type:"preprocess",transform:t},typeName:U.ZodEffects,...J(s)});class os extends ee{_parse(e){return this._getType(e)===L.undefined?pt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}os.create=(t,e)=>new os({innerType:t,typeName:U.ZodOptional,...J(e)});class Ns extends ee{_parse(e){return this._getType(e)===L.null?pt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ns.create=(t,e)=>new Ns({innerType:t,typeName:U.ZodNullable,...J(e)});class Jn extends ee{_parse(e){const{ctx:s}=this._processInputParams(e);let i=s.data;return s.parsedType===L.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Jn.create=(t,e)=>new Jn({innerType:t,typeName:U.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...J(e)});class ea extends ee{_parse(e){const{ctx:s}=this._processInputParams(e),i={...s,common:{...s.common,issues:[]}},a=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Wn(a)?a.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Lt(i.common.issues)},input:i.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Lt(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}ea.create=(t,e)=>new ea({innerType:t,typeName:U.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...J(e)});class or extends ee{_parse(e){if(this._getType(e)!==L.nan){const i=this._getOrReturnCtx(e);return N(i,{code:I.invalid_type,expected:L.nan,received:i.parsedType}),Y}return{status:"valid",value:e.data}}}or.create=t=>new or({typeName:U.ZodNaN,...J(t)});const ep=Symbol("zod_brand");class vo extends ee{_parse(e){const{ctx:s}=this._processInputParams(e),i=s.data;return this._def.type._parse({data:i,path:s.path,parent:s})}unwrap(){return this._def.type}}class ca extends ee{_parse(e){const{status:s,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Y:r.status==="dirty"?(s.dirty(),Bi(r.value)):this._def.out._parseAsync({data:r.value,path:i.path,parent:i})})();{const a=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Y:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:i.path,parent:i})}}static create(e,s){return new ca({in:e,out:s,typeName:U.ZodPipeline})}}class ta extends ee{_parse(e){const s=this._def.innerType._parse(e),i=a=>(si(a)&&(a.value=Object.freeze(a.value)),a);return Wn(s)?s.then(a=>i(a)):i(s)}unwrap(){return this._def.innerType}}ta.create=(t,e)=>new ta({innerType:t,typeName:U.ZodReadonly,...J(e)});function Ic(t,e){const s=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof s=="string"?{message:s}:s}function vl(t,e={},s){return t?qi.create().superRefine((i,a)=>{var r,o;const l=t(i);if(l instanceof Promise)return l.then(u=>{var d,p;if(!u){const f=Ic(e,i),h=(p=(d=f.fatal)!==null&&d!==void 0?d:s)!==null&&p!==void 0?p:!0;a.addIssue({code:"custom",...f,fatal:h})}});if(!l){const u=Ic(e,i),d=(o=(r=u.fatal)!==null&&r!==void 0?r:s)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...u,fatal:d})}}):qi.create()}const tp={object:Ee.lazycreate};var U;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(U||(U={}));const sp=(t,e={message:`Input not instance of ${t.name}`})=>vl(s=>s instanceof t,e),wl=Qt.create,xl=Rs.create,ip=or.create,np=Es.create,kl=Un.create,ap=ii.create,rp=nr.create,op=Zn.create,cp=Xn.create,lp=qi.create,dp=Ks.create,up=xs.create,hp=ar.create,pp=Ut.create,fp=Ee.create,mp=Ee.strictCreate,gp=Yn.create,bp=vr.create,_p=jn.create,yp=us.create,vp=Hn.create,wp=rr.create,xp=ni.create,kp=zi.create,Sp=qn.create,Cp=Gn.create,Op=Ds.create,Pp=Kn.create,Ap=Gi.create,Tc=Zt.create,Ip=os.create,Tp=Ns.create,Rp=Zt.createWithPreprocess,Ep=ca.create,Dp=()=>wl().optional(),Np=()=>xl().optional(),Lp=()=>kl().optional(),Mp={string:t=>Qt.create({...t,coerce:!0}),number:t=>Rs.create({...t,coerce:!0}),boolean:t=>Un.create({...t,coerce:!0}),bigint:t=>Es.create({...t,coerce:!0}),date:t=>ii.create({...t,coerce:!0})},Bp=Y;var j=Object.freeze({__proto__:null,defaultErrorMap:Hi,setErrorMap:Rh,getErrorMap:tr,makeIssue:sr,EMPTY_PATH:Eh,addIssueToContext:N,ParseStatus:ct,INVALID:Y,DIRTY:Bi,OK:pt,isAborted:Kr,isDirty:Jr,isValid:si,isAsync:Wn,get util(){return de},get objectUtil(){return Gr},ZodParsedType:L,getParsedType:ys,ZodType:ee,datetimeRegex:_l,ZodString:Qt,ZodNumber:Rs,ZodBigInt:Es,ZodBoolean:Un,ZodDate:ii,ZodSymbol:nr,ZodUndefined:Zn,ZodNull:Xn,ZodAny:qi,ZodUnknown:Ks,ZodNever:xs,ZodVoid:ar,ZodArray:Ut,ZodObject:Ee,ZodUnion:Yn,ZodDiscriminatedUnion:vr,ZodIntersection:jn,ZodTuple:us,ZodRecord:Hn,ZodMap:rr,ZodSet:ni,ZodFunction:zi,ZodLazy:qn,ZodLiteral:Gn,ZodEnum:Ds,ZodNativeEnum:Kn,ZodPromise:Gi,ZodEffects:Zt,ZodTransformer:Zt,ZodOptional:os,ZodNullable:Ns,ZodDefault:Jn,ZodCatch:ea,ZodNaN:or,BRAND:ep,ZodBranded:vo,ZodPipeline:ca,ZodReadonly:ta,custom:vl,Schema:ee,ZodSchema:ee,late:tp,get ZodFirstPartyTypeKind(){return U},coerce:Mp,any:lp,array:pp,bigint:np,boolean:kl,date:ap,discriminatedUnion:bp,effect:Tc,enum:Op,function:kp,instanceof:sp,intersection:_p,lazy:Sp,literal:Cp,map:wp,nan:ip,nativeEnum:Pp,never:up,null:cp,nullable:Tp,number:xl,object:fp,oboolean:Lp,onumber:Np,optional:Ip,ostring:Dp,pipeline:Ep,preprocess:Rp,promise:Ap,record:vp,set:xp,strictObject:mp,string:wl,symbol:rp,transformer:Tc,tuple:yp,undefined:op,union:gp,unknown:dp,void:hp,NEVER:Bp,ZodIssueCode:I,quotelessJson:Th,ZodError:Lt});const Vs=new Map,js={clear:()=>{localStorage.clear(),window.location.reload()},load:(t,e,s)=>{try{const i=localStorage.getItem(t);return i===null?e:s(JSON.parse(i))}catch{return localStorage.removeItem(t),e}},save:(t,e)=>{var s;localStorage.setItem(t,JSON.stringify(e)),(s=Vs.get(t))==null||s.forEach(i=>i(e))},subscribe:(t,e)=>(Vs.has(t)||Vs.set(t,new Set),Vs.get(t).add(e),()=>{var s,i;(s=Vs.get(t))==null||s.delete(e),((i=Vs.get(t))==null?void 0:i.size)===0&&Vs.delete(t)})},$p=t=>typeof t=="function";function Ve(t,e,s){const[i,a]=At(()=>js.load(t,e,s));on(()=>{a(js.load(t,e,s));const o=l=>a(l);return js.subscribe(t,o)},[t,e,s]);const r=C(o=>{js.save(t,$p(o)?o(js.load(t,e,s)):o)},[t,e,s]);return[i,r]}const Vp=j.boolean().parse;function Oe(t,e){return Ve(t,e,Vp)}const Fp=j.number().parse;function Ms(t,e){return Ve(t,e,Fp)}const zp=j.string().parse;function ri(t,e){return Ve(t,e,zp)}const wo="AppInfo",Qp=()=>Oe(`${wo}.tab.about.isVisible`,!0),Wp=()=>Oe(`${wo}.tab.changelog.isVisible`,!1),Up=()=>Oe(`${wo}.tab.license.isVisible`,!1),Sl=[{version:"1.2.0",date:"2025-03-04",added:["<b>Table Editor:</b> Add <kbd>Ctrl+M</kbd> hotkey to run emulator, in addition to the existing <kbd>Ctrl+E</kbd>, to make it usable on Edge."],fixed:["<b>Table Editor:</b> Add -x modifier to CPX and CPY length description."]},{version:"1.1.0",date:"2024-10-03",changed:["<b>Table Editor:</b> Move actions into section header."],fixed:["Restore small-caps in non-collapsible section headers."],removed:["<b>Table Editor:</b> Remove table above table."]},{version:"1.0.1",date:"2024-09-08",fixed:["Fix broken small-caps by replacing Inter with system font."]},{version:"1.0.0",date:"2024-02-06",added:["Add <b>Calculator</b> widget to display and edit numbers in binary, decimal, and hexadecimal formats.","<b>Calculator:</b> Add Button and hotkey (<kbd>Ctrl+C</kbd>) to copy the selected value to the clipboard.","<b>Calculator:</b> Add Button and hotkey (<kbd>Ctrl+V</kbd>) to paste the selected value from the clipboard.","<b>Calculator:</b> Add Hotkey (<kbd>Space/Shift+Space</kbd>) to increment/decrement the selected digit by 1.","<b>Calculator:</b> Add Hotkey (<kbd>&lt;/&gt;</kbd>) to shift the selected value left and right.","<b>Calculator:</b> Add Hotkey (<kbd>{/}</kbd>) to rotate the selected value left and right.","<b>Calculator:</b> Add Hotkey (<kbd>!</kbd>) to negate the selected value.","<b>Calculator:</b> Add Hotkey (<kbd>Shift+Backspace/Shift+Delete</kbd>) to clear the selected value.","<b>Calculator:</b> Add Setting and hotkey (<kbd>Q</kbd>) to toggle advanced mode, which allows to perform operations between two values.","<b>Calculator (advanced):</b> Add Hotkey (<kbd>+</kbd>) to switch to addition operation.","<b>Calculator (advanced):</b> Add Hotkey (<kbd>-</kbd>) to switch to subtraction operation.","<b>Calculator (advanced):</b> Add Hotkey (<kbd>&</kbd>) to switch to logical AND operation.","<b>Calculator (advanced):</b> Add Hotkey (<kbd>|</kbd>) to switch to logical OR operation.","<b>Calculator (advanced):</b> Add Hotkey (<kbd>^</kbd>) to switch to logical XOR operation.","<b>Calculator (advanced):</b> Add Hotkey (<kbd>=</kbd>) to move the result of the operation in operand 2.","<b>Calculator (advanced):</b> Add Hotkey (<kbd>;</kbd>) to swap the two operands.","<b>Calculator (advanced):</b> Add Hotkey (<kbd>Ctrl+Backspace/Ctrl+Delete</kbd>) to clear all operands.","<b>Calculator:</b> Add Buttons to toggle values' visibility.","<b>Calculator:</b> Add Setting and hotkeys (<kbd>Y/W</kbd>) to choose between byte (8 bits) or word (16 bits).","<b>Calculator:</b> Add Setting and hotkeys (<kbd>I/O</kbd>) to choose how digits are inserted while typing (insert or overwrite).","<b>Calculator:</b> Add Setting and hotkeys (<kbd>L/R</kbd>) to choose typing direction (left or right).","<b>Calculator:</b> Add Setting and hotkey (<kbd>M</kbd>) to disable movement after typing a digit.","<b>Calculator:</b> Add Setting and hotkey (<kbd>T</kbd>) to flip binary bits when clicking on a digit.","<b>Calculator:</b> Add Setting to customize caret appearance (bar, box, underline).","<b>Calculator:</b> Add Setting and hotkey (<kbd>N</kbd>) to display values as signed (they can be negative). The hotkey works only for decimals.","<b>Calculator:</b> Add Setting to add some space every 4 or 8 digits.","<b>Calculator:</b> Add Setting to display an on-screen keyboard, in compact or full mode (on mobile it's always in full mode).","<b>Calculator:</b> Add Instructions detailing actions, operations, and settings, with their corresponding keybindings.","Add <b>Table Editor</b> widget to edit an ASM data table.","<b>Table Editor:</b> Add Multi-selection while holding <kbd>Shift/Ctrl/Cmd</kbd>.","<b>Table Editor:</b> Add Background colors for cells, with every value having a different corresponding color.","<b>Table Editor:</b> Add Button and hotkey (<kbd>Ctrl+C</kbd>) to copy the content of the table into the clipboard.","<b>Table Editor:</b> Add Button and hotkey (<kbd>Ctrl+V</kbd>) to paste the content of the clipboard into the table.","<b>Table Editor:</b> Add Arrow movement in the table.","<b>Table Editor:</b> Add Setting to display the values in binary, decimal, or hexadecimal format.","<b>Table Editor:</b> Add Setting and hotkey (<kbd>Y/W</kbd>) to choose between byte (8 bits) or word (16 bits).","<b>Table Editor:</b> Add Settings to customize the width and height of the table (min 1x1, max 50x50).","<b>Table Editor:</b> Add Setting to customize the table's name.","<b>Table Editor:</b> Add Setting to choose the comment type for columns (number dec, number hex, value hex), applied on paste to clipboard.","<b>Table Editor:</b> Add Setting to choose the comment type for rows (number dec, number hex, range hex), applied on paste to clipboard.","<b>Table Editor:</b> Add Setting to choose the indentation for rows, applied on paste to clipboard.","<b>Table Editor:</b> Add Setting to choose whether to add a space between row values or not, applied on paste to clipboard.","<b>Table Editor:</b> Add Setting to select a background image for the table.","<b>Table Editor:</b> Add Setting to toggle the background image's visibility.","<b>Table Editor:</b> Add Setting to control the background image's opacity.","<b>Table Editor:</b> Add Setting to change the background color associated with a decimal value.","<b>Table Editor:</b> Add Button to reset the background color associated with a decimal value to its default.","<b>Table Editor:</b> Add Setting to control the background color's opacity.","<b>Table Editor:</b> Add An on-screen keyboard, visible only on mobile","<b>Table Editor:</b> Add Instructions detailing actions and settings, with their corresponding keybindings.","Add <b>App Settings</b> tab defining settings that affect all widgets.","<b>App Settings:</b> Add Setting to enable/disable (most) hotkeys.","<b>App Settings:</b> Add Setting to select between system, dark, or light mode.","<b>App Settings:</b> Add Setting to select color palette for accents, including the disco palette.","<b>App Settings:</b> Add Button to reset all settings and data.","Add <b>App Info</b> tab containing generic information about the application.","<b>App Info:</b> Add Info section with app name, version, date, and author, and link to source code.","<b>App Info:</b> Add Changelog.","<b>App Info:</b> Add License.","Add hotkeys (<kbd>Ctrl+Digit</kbd>) to select tab.","Add hotkeys (<kbd>Tab/Shift+Tab</kbd>) to navigate through focusable elements.","Add navigation through URL tags."]}],Rc=Sl[0]??{version:"<empty>",date:"<empty>"};function Zp(){const[t,e]=Qp();return c(It,{isVisible:t,label:"Info",onChange:e,children:[c("div",{children:c("b",{children:"SMW Toolbox: Tools for hacking Super Mario World"})}),c("div",{children:`Version ${Rc.version}  ${Rc.date}`}),c("div",{children:"2024-2025 zuccha"}),c("div",{children:c(Ra,{href:"https://github.com/zuccha/smw-toolbox",label:"Source code"})}),c("br",{}),c("div",{children:c("b",{children:"Contributing"})}),c("div",{children:c(Ra,{href:"https://github.com/zuccha/smw-toolbox/issues/new?assignees=&labels=bug&projects=&template=bug_report.md&title=",label:"Report a bug"})}),c("div",{children:c(Ra,{href:"https://github.com/zuccha/smw-toolbox/issues/new?assignees=&labels=enhancement&projects=&template=feature_request.md&title=",label:"Suggest a feature"})})]})}function ya({items:t,title:e}){return!t||t.length===0?null:c("div",{class:"Changelog_Release_Section",children:[c("div",{children:`${e}:`}),c("ul",{children:t.map(s=>c("li",{dangerouslySetInnerHTML:{__html:s}}))})]})}function Xp({changelog:t}){return c("div",{class:"Changelog",children:t.map(e=>c("div",{class:"Changelog_Release",children:[c("div",{class:"Changelog_Release_Title",children:e.date?`[${e.version}]  ${e.date}`:`[${e.version}]`}),c(ya,{items:e.added,title:"Added"}),c(ya,{items:e.changed,title:"Changed"}),c(ya,{items:e.removed,title:"Removed"}),c(ya,{items:e.fixed,title:"Fixed"})]},e.version))})}function Yp(){const[t,e]=Wp();return c(It,{isVisible:t,label:"Changelog",onChange:e,children:c(Xp,{changelog:Sl})})}function jp(){const[t,e]=Up();return c(It,{isVisible:t,label:"License",onChange:e,children:c("div",{class:"App_SectionCol",children:[c("div",{children:'The SMW Toolbox program (hereafter referred to as the "Software") is not official or supported by Nintendo, nor any other commercial entity.'}),c("div",{children:"The Software is freeware thus it can be distributed freely provided the following conditions hold: (1) The Software is not distributed with or as part of any ROM image in any format, and (2) No goods, services, or money can be charged for the Software in any form, nor may it be included in conjunction with any other offer or monetary exchange."}),c("div",{children:"The Software is provided AS IS, and its use is at your own risk. Anyone mentioned in its documentation will not be held liable for any damages, direct or otherwise, arising from its use or presence."})]})})}function Hp(){return c("div",{class:"App_Module",children:c("div",{class:"App_ModuleBlock",children:[c(Zp,{}),c(Yp,{}),c(jp,{})]})})}var Ot=(t=>(t[t.System=0]="System",t[t.Dark=1]="Dark",t[t.Light=2]="Light",t))(Ot||{});const qp=j.nativeEnum(Ot);var Ce=(t=>(t[t.Blue=0]="Blue",t[t.Cyan=1]="Cyan",t[t.Green=2]="Green",t[t.Orange=3]="Orange",t[t.Pink=4]="Pink",t[t.Purple=5]="Purple",t[t.Red=6]="Red",t[t.Yellow=7]="Yellow",t[t.Disco=8]="Disco",t))(Ce||{});const Gp=j.nativeEnum(Ce),Ki={1:{mode:1,background1:"#3b3b3b",background2:"#242424",background3:"#141414",background4:"#4c4c4c",error1:"#F56565",neutral1:"#f4f4f4",neutral2:"#a1a1a1",color:{5:{primary1:"#D6BCFA",primary2:"#9F7AEA",primary3:"#322659",highlight1:"#D6BCFA55",highlight2:"#D6BCFA22"},0:{primary1:"#90CDF4",primary2:"#4299E1",primary3:"#1A365D",highlight1:"#90CDF455",highlight2:"#90CDF422"},1:{primary1:"#76E4F7",primary2:"#0BC5EA",primary3:"#065666",highlight1:"#76E4F755",highlight2:"#76E4F722"},2:{primary1:"#68D391",primary2:"#48BB78",primary3:"#1C4532",highlight1:"#68D39155",highlight2:"#68D39122"},7:{primary1:"#FAF089",primary2:"#ECC94B",primary3:"#975A16",highlight1:"#FAF08955",highlight2:"#FAF08922"},3:{primary1:"#F6AD55",primary2:"#ED8936",primary3:"#652B19",highlight1:"#F6AD5555",highlight2:"#F6AD5522"},6:{primary1:"#FC8181",primary2:"#F56565",primary3:"#63171B",highlight1:"#FC818155",highlight2:"#FC818122"},4:{primary1:"#F687B3",primary2:"#ED64A6",primary3:"#521B41",highlight1:"#F687B355",highlight2:"#F687B322"}}},2:{mode:2,background1:"#e4e4e4",background2:"#f9f9f9",background3:"#dddddd",background4:"#e0e0e0",error1:"#C53030",neutral1:"#222222",neutral2:"#777777",color:{5:{primary1:"#9F7AEA",primary2:"#6B46C1",primary3:"#E9D8FD",highlight1:"#9F7AEA55",highlight2:"#9F7AEA22"},0:{primary1:"#4299E1",primary2:"#2B6CB0",primary3:"#BEE3F8",highlight1:"#4299E155",highlight2:"#4299E122"},1:{primary1:"#0BC5EA",primary2:"#248DA2",primary3:"#C4F1F9",highlight1:"#0BC5EA55",highlight2:"#0BC5EA22"},2:{primary1:"#48BB78",primary2:"#2F855A",primary3:"#C6F6D5",highlight1:"#48BB7855",highlight2:"#48BB7822"},7:{primary1:"#ECC94B",primary2:"#A47519",primary3:"#FEFCBF",highlight1:"#ECC94B55",highlight2:"#ECC94B22"},3:{primary1:"#ED8936",primary2:"#C05621",primary3:"#FEEBC8",highlight1:"#ED893655",highlight2:"#ED893622"},6:{primary1:"#F56565",primary2:"#C53030",primary3:"#FED7D7",highlight1:"#F5656555",highlight2:"#F5656522"},4:{primary1:"#ED64A6",primary2:"#B83280",primary3:"#FED7E2",highlight1:"#ED64A655",highlight2:"#ED64A622"}}}},Cl=100,zr=window.matchMedia("(prefers-color-scheme: dark)"),Ec=t=>t?Ot.Dark:Ot.Light;function Ol(t){return Ve(`${t}.color`,Ce.Orange,Gp.parse)}function Pl(t){return Ve(`${t}.mode`,Ot.System,qp.parse)}function Al(t){const[e]=Pl(t),[s,i]=At(Ec(zr.matches));return on(()=>{const a=r=>i(Ec(r.matches));return zr.addEventListener("change",a),()=>zr.removeEventListener("change",a)},[]),e===Ot.System?Ki[s]:Ki[e]}function Kp(t){const e=Le(0),[s]=Ol(t),i=Al(t);Yt(()=>{const a=document.documentElement.style;if(a.setProperty("--color-background-1",i.background1),a.setProperty("--color-background-2",i.background2),a.setProperty("--color-background-3",i.background3),a.setProperty("--color-background-4",i.background4),a.setProperty("--color-error-1",i.error1),a.setProperty("--color-neutral-1",i.neutral1),a.setProperty("--color-neutral-2",i.neutral2),s===Ce.Disco){const r=Object.values(i.color),o=r.map(({primary1:_})=>_),l=r.map(({primary2:_})=>_),u=r.map(({primary3:_})=>_),d=r.map(({highlight1:_})=>_),p=r.map(({highlight2:_})=>_);let f=0;const h=()=>{a.setProperty("--color-primary-1",o[f]),a.setProperty("--color-primary-2",l[f]),a.setProperty("--color-primary-3",u[f]),a.setProperty("--color-highlight-1",d[f]),a.setProperty("--color-highlight-2",p[f]),f=(f+1)%r.length};return clearInterval(e.current),e.current=setInterval(h,Cl),()=>clearInterval(e.current)}else a.setProperty("--color-primary-1",i.color[s].primary1),a.setProperty("--color-primary-2",i.color[s].primary2),a.setProperty("--color-primary-3",i.color[s].primary3),a.setProperty("--color-highlight-1",i.color[s].highlight1),a.setProperty("--color-highlight-2",i.color[s].highlight2)},[s,i])}const un="App",xo=()=>Oe(`${un}.hotkeys.isEnabled`,!0),Il=()=>Al(`${un}.theme`),Tl=()=>Ol(`${un}.theme`),Jp=()=>Pl(`${un}.theme`),ef=()=>Kp(`${un}.theme`),tf=()=>ri(`${un}.selectedModule.id`,""),hn=[{label:"On",value:!0},{label:"Off",value:!1}];function dt({onChange:t,options:e,value:s}){return c("div",{class:"RadioGroup",children:e.map(i=>{const a=()=>t(i.value);return c(Nt,{isSelected:i.value===s,label:i.label,onClick:a},i.value)})})}function ne({align:t="center",children:e,hotkey:s,inline:i=!1,label:a,size:r="lg"}){const o=Ct([["Setting",!0],[`inline ${t}`,i]]);let l=a;return s&&(l+=` (${s})`),i&&(l+=":"),c("div",{class:o,children:[c("span",{class:"Setting_Label",children:l}),c("div",{class:`Setting_Input ${r}`,children:e})]})}const sf=[{label:"On",value:!0},{label:"Off",value:!1}];function nf(){const[t,e]=xo();return c(ne,{hotkey:"K",label:"Hotkeys",children:c(dt,{onChange:e,options:sf,value:t})})}const ko="AppSettings",af=()=>Oe(`${ko}.tab.general.isVisible`,!0),rf=()=>Oe(`${ko}.tab.reset.isVisible`,!0),of=()=>Oe(`${ko}.tab.theme.isVisible`,!0);function cf(){const[t,e]=af();return c(It,{isVisible:t,label:"General",onChange:e,children:c(nf,{})})}function lf(){const[t,e]=rf();return c(It,{isVisible:t,label:"Reset",onChange:e,children:c("div",{class:"App_SectionCol",children:["This operation will restore all settings to their default values and clear all data from the application (e.g., images, tables, calculator, etc.).",c("div",{class:"App_SectionActions font-size_l",children:c(Nt,{label:"Reset",onClick:js.clear})})]})})}function Rl({backgroundColor:t,isSelected:e,onClick:s}){return c("input",{class:e?"selected":void 0,onClick:s,style:{backgroundColor:t},type:"button"})}function df({colors:t,...e}){const[s,i]=At(t[0]),a=Le(0);return on(()=>{let r=0;const o=()=>{i(t[r]),r=(r+1)%t.length};return clearInterval(a.current),a.current=setInterval(o,Cl),()=>clearInterval(a.current)},[t]),c(Rl,{...e,backgroundColor:s})}function uf({onChange:t,options:e,value:s}){const i=me(()=>{const a=e.map(r=>r.color);return a.length>0?a:["transparent"]},[e]);return c("div",{class:"PalettePicker",children:e.map(a=>a.color==="disco"?c(df,{colors:i,isSelected:a.value===s,onClick:()=>t(a.value)},a.value):c(Rl,{backgroundColor:a.color,isSelected:a.value===s,onClick:()=>t(a.value)},a.value))})}function hf(){const[t,e]=Tl(),s=Il(),i=me(()=>[{color:s.color[Ce.Purple].primary2,value:Ce.Purple},{color:s.color[Ce.Blue].primary2,value:Ce.Blue},{color:s.color[Ce.Cyan].primary2,value:Ce.Cyan},{color:s.color[Ce.Green].primary2,value:Ce.Green},{color:s.color[Ce.Yellow].primary2,value:Ce.Yellow},{color:s.color[Ce.Orange].primary2,value:Ce.Orange},{color:s.color[Ce.Red].primary2,value:Ce.Red},{color:s.color[Ce.Pink].primary2,value:Ce.Pink},{color:"disco",value:Ce.Disco}],[s]);return c(ne,{label:"Palette",children:c(uf,{onChange:e,options:i,value:t})})}function So({onChange:t,options:e,placeholder:s,value:i}){const a=C(r=>{t(Number.parseInt(r.currentTarget.value))},[t]);return c("div",{class:"Select",children:[c("select",{onChange:a,value:i,children:e.map(r=>c("option",{value:r.value,children:r.label},r.value))}),c("div",{class:"Select_Labels",children:e.map(r=>{const o=Ct([["Select_Label",!0],["hidden",r.value!==i]]);return c("div",{class:o,children:r.label},r.value)})}),e.some(r=>r.value===i)?c("div",{class:"Select_Placeholder",children:""}):c("div",{class:"Select_Placeholder",children:s}),c("div",{class:"Select_Icon",children:c(ul,{size:"1em"})})]})}const pf=[{label:"System",value:Ot.System},{label:"Dark",value:Ot.Dark},{label:"Light",value:Ot.Light}];function ff(){const[t,e]=Jp();return c(ne,{label:"Mode",children:c(So,{onChange:e,options:pf,placeholder:"Color Mode",value:t})})}function mf(){const[t,e]=of();return c(It,{isVisible:t,label:"Theme",onChange:e,children:c("div",{class:"App_SectionRow",children:[c(ff,{}),c(hf,{})]})})}function gf(){return c("div",{class:"App_Module",children:c("div",{class:"App_ModuleBlock",children:[c(cf,{}),c(mf,{}),c(lf,{})]})})}function to({id:t,keybindings:e,rowSpan:s}){return c("td",{rowSpan:s,children:e.length>0?e.map((i,a)=>c(ji,{children:[c("kbd",{children:i}),a<e.length-1&&", "]},`${t}-${i}`)):"-"})}function bf({actions:t}){const e=t.some(s=>s.keybindings.length>0);return c("table",{children:[c("thead",{children:c("tr",{children:[c("th",{children:"Name"}),c("th",{children:"Description"}),e&&c("th",{children:"Keybindings"})]})}),c("tbody",{children:t.map((s,i)=>c("tr",{children:[c("td",{class:"Tutorial_Action_Name",dangerouslySetInnerHTML:{__html:s.name}}),c("td",{class:"Tutorial_Action_Description",dangerouslySetInnerHTML:{__html:s.description}}),e&&c(to,{id:s.name,keybindings:s.keybindings})]},i))})]})}const Dc=t=>"keybindings"in t;function _f({settings:t}){const e=t.some(i=>Dc(i)?i.keybindings.length>0:i.values.some(a=>a.keybindings.length>0)),s=i=>i.startsWith("#")?c("i",{children:i.substring(1)}):i;return c("table",{children:[c("thead",{children:c("tr",{children:[c("th",{children:"Name"}),c("th",{children:"Value"}),c("th",{children:"Description"}),e&&c("th",{children:"Keybindings"})]})}),c("tbody",{children:t.map(i=>Dc(i)?i.values.map((a,r)=>c("tr",{children:[r===0&&c("td",{class:"Tutorial_Setting_Name",rowSpan:i.values.length,children:i.name}),c("td",{children:s(a.type)}),c("td",{class:"Tutorial_Setting_Description",children:a.description}),r===0&&e&&c(to,{id:a.type,keybindings:i.keybindings,rowSpan:i.values.length})]},a.type)):i.values.map((a,r)=>c("tr",{children:[r===0&&c("td",{class:"Tutorial_Setting_Name",rowSpan:i.values.length,children:i.name}),c("td",{children:s(a.type)}),c("td",{class:"Tutorial_Setting_Description",children:a.description}),e&&c(to,{id:a.type,keybindings:a.keybindings})]},a.type)))})]})}function yf({children:t,title:e}){return c("div",{class:"Tutorial_Section",children:[c("div",{class:"Tutorial_Section_Title",children:`${e}:`}),t]})}function le({children:t,isVisible:e,onChangeVisibility:s}){return c("div",{class:"Tutorial",children:c(It,{isVisible:e,label:"Instructions",onChange:s,children:c("div",{class:"Tutorial_Sections",children:t})})})}le.Section=yf;le.Actions=bf;le.Settings=_f;function wr(t=[],e=[],s=[]){return(i,a)=>[...i?t.map(r=>i[r]):[],...e.map(r=>a[r]),...s.flatMap(r=>r.deps(i,a))]}var be=(t=>(t[t.Byte=0]="Byte",t[t.Word=1]="Word",t[t.Long=2]="Long",t))(be||{});const El=j.nativeEnum(be);var X=(t=>(t[t.Bin=0]="Bin",t[t.Dec=1]="Dec",t[t.Hex=2]="Hex",t))(X||{});const vf=j.nativeEnum(X),Dl={0:1,1:2,2:3},cr={0:{min:0,max:255},1:{min:0,max:65535},2:{min:0,max:16777215}},lr={0:{min:-129,max:127},1:{min:-32768,max:32767},2:{min:-8388608,max:8388607}},Nl={0:{hide:16776960,show:255},1:{hide:16711680,show:65535},2:{hide:0,show:16777215}},xr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];j.enum(xr);function Ll(t){return xr[t]??"0"}function wf(t){return Number.parseInt(t.length===1?t:"0",16)??0}const xf={0:/^[0-1]*$/,1:/^[0-9]*$/,2:/^[0-9a-fA-F]*$/},kf={0:/^[0-1]$/,1:/^[0-9]$/,2:/^[0-9a-fA-F]$/};function kr(t,e){return kf[e].test(t)}const ks={0:{0:8,1:3,2:2},1:{0:16,1:5,2:4},2:{0:24,1:8,2:6}},Ji={0:2,1:10,2:16},sa={0:"%",1:"",2:"$"},Co={0:"0b",1:"",2:"0x"};var et=(t=>(t[t.Add=0]="Add",t[t.And=1]="And",t[t.Or=2]="Or",t[t.Subtract=3]="Subtract",t[t.Xor=4]="Xor",t))(et||{});const Sf=j.nativeEnum(et),Cf=j.object({value:j.number(),valueRaw:j.number()}),ia={value:0,valueRaw:0},Oo=wr;function Of(t){return t.startsWith(sa[0])?[0,t.substring(1)]:t.startsWith(sa[2])?[2,t.substring(1)]:[1,t]}function Pf(t){return t.startsWith("-")?[!0,t.substring(1)]:[!1,t]}function Po(t,e){const[s,i]=Pf(t),[a,r]=Of(i),o=Ji[a],{min:l,max:u}=s?lr[e.unit]:cr[e.unit],d=cn(Number.parseInt(r,o),l,u);if(Number.isNaN(d))return;const p=s||d<0?2*(lr[e.unit].max+1)+d:d;return na(p,e)}Po.deps=Oo([],["unit"]);function na(t,e){const s=Nl[e.unit],i=t&s.hide|t&s.show;return{value:i&s.show,valueRaw:i}}na.deps=Oo([],["unit"]);function Ml(t,e,s,i,a){const{unit:r}=a,{min:o,max:l}=cr[r],u=ks[r][e],d=Ji[e],p=cn(t.value,o,l),f=s&&p>lr[r].max?-(2*(lr[r].max+1)-p):p,h=f.toString(d).toUpperCase(),_=ln(h.replace("-",""),u,"0"),b=i?`${sa[e]}${_}`:_;return f<0?`-${b}`:b}function Bl(t,e,s){const i=Nl[e.unit],a=t.valueRaw&i.hide|s&i.show;return{value:a&i.show,valueRaw:a}}Bl.deps=Oo(["value","valueRaw"],["unit"]);const Af={setValue:Bl};var $l=(t=>(t.Positive="+",t.Negative="-",t))($l||{});function If(t){return t==="-"||t==="+"}var ht=(t=>(t[t.Left=0]="Left",t[t.Right=1]="Right",t))(ht||{});const Tf=j.nativeEnum(ht);var Ss=(t=>(t[t.Insert=0]="Insert",t[t.Overwrite=1]="Overwrite",t))(Ss||{});const Rf=j.nativeEnum(Ss),ut=wr;function so(t,e){const s=Ml(t,e.encoding,e.isSigned,!1,e),i=s.replace("-","").split(""),a=e.isSigned?s.startsWith("-")?"-":"+":void 0,r=e.typingDirection===1?0:i.length-1;return{sign:a,digits:i,index:r}}so.deps=ut([],["encoding","isSigned","typingDirection","unit"]);function dr(t,e){const s=t.sign==="-"?"-":"",i=sa[e.encoding],a=`${s}${i}${t.digits.join("")}`;return Po(a,e)}dr.deps=ut(["digits","sign"],["encoding","unit"]);function Mt(t,e){const[s,i]=e.typingDirection===0?[t.digits.slice().reverse(),t.digits.length-t.index-1]:[t.digits,t.index];return{...t,digits:s,index:i}}Mt.deps=ut(["digits","index"],["typingDirection"]);function ft(t,e,s){const i=r=>r===t.index?t:{...t,index:r},a=e.shouldAllowOutOfBoundsCursor?1:0;return s<0?i(0):s>t.digits.length-1+a?i(t.digits.length-1):i(s)}ft.deps=ut(["digits"],["isSigned","shouldAllowOutOfBoundsCursor"]);function Vl(t,e){const{encoding:s,isSigned:i,unit:a}=e;return{sign:i?"+":void 0,digits:"0".repeat(ks[a][s]).split(""),index:e.typingDirection===1?0:ks[a][s]-1}}Vl.deps=ut([],["encoding","isSigned","unit"]);function Sr(t,e){if(!_r(t.index,0,t.digits.length-1))return ft(t,e,t.index);const s=Mt(t,e),i=ol(s.digits,s.index,"0"),a=s.index;return Mt({...s,digits:i,index:a},e)}Sr.deps=ut(["digits","index"],[],[ft,Mt]);function Fl(t,e,s){if(!_r(t.index,0,t.digits.length-1))return ft(t,e,t.index);if(!kr(s,e.encoding))return t;const i=Mt(t,e),a=hh(i.digits,i.index,s),r=e.shouldMoveAfterTyping?e.shouldAllowOutOfBoundsCursor?Math.min(i.digits.length,i.index+1):Math.min(i.digits.length-1,i.index+1):i.index;return Mt({...i,digits:a,index:r},e)}Fl.deps=ut(["digits","index"],["encoding","shouldMoveAfterTyping","shouldAllowOutOfBoundsCursor"],[ft,Mt]);function zl(t,e,s){return ft(t,e,s)}zl.deps=ut([],[],[ft]);function Ql(t,e){return ft(t,e,t.index-1)}Ql.deps=ut([],[],[ft]);function Wl(t,e){return ft(t,e,t.index+1)}Wl.deps=ut([],[],[ft]);function Ul(t,e){return t.sign==="-"?{...t,sign:"+"}:t.sign==="+"?{...t,sign:"-"}:t}Ul.deps=ut(["sign"],[],[]);function Zl(t,e){if(!_r(t.index,0,t.digits.length))return ft(t,e,t.index);const s=Mt(t,e);if(s.index===0)return Sr(t,e);const i=ol(s.digits,s.index-1,"0"),a=s.index-1;return Mt({...s,digits:i,index:a},e)}Zl.deps=ut(["digits","index"],[],[Sr,ft,Mt]);function Xl(t,e,s){if(!_r(t.index,0,t.digits.length-1))return ft(t,e,t.index);if(!kr(s,e.encoding))return t;const i=Mt(t,e),a=bo(i.digits,i.index,s),r=e.shouldMoveAfterTyping?e.shouldAllowOutOfBoundsCursor?Math.min(i.digits.length,i.index+1):Math.min(i.digits.length-1,i.index+1):i.index;return Mt({...i,digits:a,index:r},e)}Xl.deps=ut(["digits","index"],["encoding","shouldMoveAfterTyping","shouldAllowOutOfBoundsCursor"],[ft,Mt]);function Yl(t,e,s,i){i=i??t.index;const a=Ji[e.encoding],r=Ll(Ja(wf(t.digits[i])+s,a)),o=bo(t.digits,i,r);return{...t,digits:o,index:i}}Yl.deps=ut(["digits","index"],["encoding"]);function jl(t,e,s=!1){const i=s?t.digits[0]:"0",a=[...t.digits.slice(1),i];return{...t,digits:a}}jl.deps=ut(["digits"]);function Hl(t,e,s=!1){const a=[s?t.digits[t.digits.length-1]:"0",...t.digits.slice(0,t.digits.length-1)];return{...t,digits:a}}Hl.deps=ut(["digits"]);const $t={clear:Vl,deleteDigit:Sr,insertDigit:Fl,jumpTo:zl,moveLeft:Ql,moveRight:Wl,negate:Ul,removeDigit:Zl,replaceDigit:Xl,shiftDigit:Yl,shiftLeft:jl,shiftRight:Hl};function Nc(t,e){const{obj:s,context:i}=e;return C((...a)=>t(s,i,...a),t.deps(s,i))}function $e(t,e){const{obj:s,setObj:i,context:a}=e;return C((...r)=>{const o=t(s,a,...r);return i(o),o},t.deps(s,a))}const ql={encoding:X.Bin,isSigned:!1,shouldAllowOutOfBoundsCursor:!1,shouldMoveAfterTyping:!0,typingDirection:ht.Right,unit:be.Byte};function Lc(t,e,s){return s===ht.Right?0:ks[e][t]-1}function Ao(t,e,s={}){const i={...ql,...s},{encoding:a,unit:r,typingDirection:o}=i,l=Le(Lc(a,r,o)),u=me(()=>({...so(t,i),index:l.current}),[t,...so.deps(void 0,i)]),d=C(xe=>{const Te=dr(xe,i);Te&&(e(Te),l.current=xe.index)},[e,...dr.deps(void 0,i)]),p={obj:u,setObj:d,context:i},f=$e($t.clear,p),h=$e($t.deleteDigit,p),_=$e($t.insertDigit,p),b=$e($t.jumpTo,p),w=$e($t.moveLeft,p),g=$e($t.moveRight,p),q=$e($t.negate,p),W=$e($t.removeDigit,p),T=$e($t.replaceDigit,p),R=$e($t.shiftDigit,p),V=$e($t.shiftLeft,p),re=$e($t.shiftRight,p);return Yt(()=>{l.current=Lc(a,r,o),b(l.current)},[a,o,r]),[u,{clear:f,deleteDigit:h,insertDigit:_,jumpTo:b,moveLeft:w,moveRight:g,negate:q,removeDigit:W,replaceDigit:T,shiftDigit:R,shiftLeft:V,shiftRight:re}]}var Qi=(t=>(t[t.Bar=0]="Bar",t[t.Box=1]="Box",t[t.Underline=2]="Underline",t))(Qi||{});const Ef=j.nativeEnum(Qi);var Ts=(t=>(t[t.Digits4=0]="Digits4",t[t.Digits8=1]="Digits8",t[t.None=2]="None",t))(Ts||{});const Df=j.nativeEnum(Ts),Qr=ai(function({autoFocus:e=!1,caret:s=1,encoding:i,integer:a,isDisabled:r=!1,isSigned:o=!1,shouldFlipBitOnClick:l=!1,shouldMoveAfterTyping:u,onChangeValue:d,spaceFrequency:p,typingDirection:f,typingMode:h,unit:_},b){const w=Le(null),g=C(A=>d(A.value),[d]),[{sign:q,digits:W,index:T},{deleteDigit:R,insertDigit:V,jumpTo:re,moveLeft:xe,moveRight:Te,negate:ue,removeDigit:te,replaceDigit:Re,shiftDigit:Ye,shiftLeft:Se,shiftRight:Me}]=Ao(a,g,{encoding:i,isSigned:o,shouldMoveAfterTyping:u,typingDirection:f,unit:_}),De=C(()=>(navigator.clipboard.writeText(`${q??""}${W.join("")}`),!0),[W,q]),Be=C(()=>r?!1:(navigator.clipboard.readText().then(A=>{const H=Ji[i],Pe=Number.parseInt(A,H);if(!Number.isNaN(Pe))return d(Pe)}),!0),[i,r,d]),ke=me(()=>f===ht.Right?Math.max(uh(W,Pc),T-1):Math.min(dh(W,Pc),T),[W,T,f]),Ke=C(A=>f===ht.Right?A<=ke:A>=ke,[ke,f]),oe=C(A=>f===ht.Right?A>ke:A<ke,[ke,f]),K=Ct([["IntegerStringInput",!0],[{0:"caret-bar",1:"caret-box",2:"caret-underline"}[s],!0],["disabled",r],["space-4",p===0],["space-8",p===1]]),ye=Ct([["IntegerStringInput_Char",!0],["solid",f===ht.Right],["empty",f===ht.Left]]),je=C(A=>{const H=Bt=>!0;(()=>{if((A.ctrlKey||A.metaKey)&&A.key==="c")return De();if((A.ctrlKey||A.metaKey)&&A.key==="v")return Be();if(A.ctrlKey||A.metaKey)return!1;if(A.key==="ArrowLeft")return H(xe());if(A.key==="ArrowRight")return H(Te());if(r)return!1;if(A.shiftKey&&A.key==="Backspace"||A.shiftKey&&A.key==="Delete")return H(d(0));if(A.key===">")return H(Me());if(A.key==="<")return H(Se());if(A.key==="}")return H(Me(!0));if(A.key==="{")return H(Se(!0));if(A.key===" ")return H(Ye(A.shiftKey?-1:1));if(A.key==="!")return H(d(a.value*-1));if(A.key==="Delete")return H(R());if(A.key==="Backspace")return H(te());if(kr(A.key,i))switch(h){case Ss.Insert:return H(V(A.key));case Ss.Overwrite:return H(Re(A.key))}return!1})()&&A.preventDefault()},[De,R,i,r,V,a.value,xe,Te,ue,d,te,Re,Se,Me,h]),Je=C(()=>w.current?(w.current.focus(),!0):!1,[]),mt=C(()=>document.activeElement===w.current,[]);return br(b,()=>({copy:De,focus:Je,hasFocus:mt,paste:Be}),[De,Je,mt,Be]),c("div",{autoFocus:e,class:K,onKeyDown:je,ref:w,tabIndex:0,children:[If(q)&&c("div",{class:ye,children:q===$l.Negative?"-":"+"}),W.map((A,H)=>{const Pe=Ct([["IntegerStringInput_Char",!0],["selected",H===T],["solid",Ke(H)],["empty",oe(H)]]);return c("div",{class:Pe,onMouseDown:Bt=>{Bt.preventDefault(),Je(),!r&&(l&&i===X.Bin?Ye(1,H):re(H))},children:[A,!r&&H===T&&c("div",{class:"IntegerStringInput_Caret"})]},H)})]})});var as=(t=>(t[t.Compact=0]="Compact",t[t.Full=1]="Full",t[t.None=2]="None",t))(as||{});const Nf=j.nativeEnum(as);function Gl({actions:t,rowSize:e=8}){const s=C(a=>a.preventDefault(),[]),i=me(()=>({gridTemplateColumns:`repeat(${e}, max-content)`}),[e]);return c("div",{class:"Keyboard",onMouseDown:s,style:i,children:t.map((a,r)=>a?c("div",{class:"Keyboard_Key",style:a.colSpan?{gridColumn:`span ${a.colSpan}`,width:"100%"}:void 0,children:c(Nt,{isSelected:a.isActive,label:c("div",{class:`Keyboard_Key_${a.size}`,children:a.label}),onClick:a.isActive?rl:a.onClick},r)}):c("div",{},r))})}function Kl(t,e,s){Yt(()=>{e(na(t.valueRaw,s))},na.deps(void 0,s));const i={obj:t,setObj:e,context:s},a=$e(Af.setValue,i);return[t,{setValue:a}]}function Lf(t,e){const[s,i]=At(t);return Kl(s,i,e)}function Io(t,e,s){const[i,a]=Ve(t,e,Cf.parse);return Kl(i,a,s)}const it="Calculator",To=j.tuple([j.boolean(),j.boolean(),j.boolean()]).parse,Ro=[!0,!0,!0],Cr=()=>Oe(`${it}.editor.bin.isSigned`,!1),la=()=>Oe(`${it}.editor.dec.isSigned`,!1),Or=()=>Oe(`${it}.editor.hex.isSigned`,!1),Pr=()=>Ve(`${it}.editors.caret`,Qi.Box,Ef.parse),da=()=>Oe(`${it}.editors.shouldFlipBitOnClick`,!1),ua=()=>Oe(`${it}.editors.shouldMoveAfterTyping`,!1),Ar=()=>Ve(`${it}.editors.spaceFrequency`,Ts.Digits8,Df.parse),ha=()=>Ve(`${it}.editors.typingDirection`,ht.Left,Tf.parse),pa=()=>Ve(`${it}.editors.typingMode`,Ss.Insert,Rf.parse),Ir=()=>Oe(`${it}.isAdvanced`,!0),Jl=()=>Ve(`${it}.keyboard.mode`,as.Compact,Nf.parse),Eo=t=>Io("Calculator.operand1",ia,t),Mf=()=>Ve(`${it}.operand1.visibility`,Ro,To),Do=t=>Io("Calculator.operand2",ia,t),Bf=()=>Ve(`${it}.operand2.visibility`,Ro,To),$f=()=>Ve(`${it}.result.visibility`,Ro,To),Tr=()=>Ve(`${it}.operation`,et.Add,Sf.parse),ed=()=>Oe(`${it}.tab.settings.isVisible`,!0),td=()=>Oe(`${it}.tab.tutorial.isVisible`,!1),pn=()=>Ve(`${it}.unit`,be.Word,El.parse),Vf=[{name:"Type",description:"Type a valid digit in the editor. The digit will either be inserted to the right of the cursor, or replace the selected digit depending on which typing mode is selected. Afterwards, the cursor moves to the right.",keybindings:["Digit"]},{name:"Delete (DEL)",description:"Delete the digit on the right of the cursor.",keybindings:["Delete"]},{name:"Backspace ()",description:"Delete the digit on the left of the cursor, then move the cursor to the left. If the cursors is already all the way to the left, then it will behave like Delete.",keybindings:["Backspace"]},{name:"Negate (NEG)",description:"If the selected editor is negative it becomes positive and vice-versa.",keybindings:["!"]},{name:"Shift Left ()",description:"Shift the digits of the selected editor to the left. The left-most digit is lost.",keybindings:["<"]},{name:"Shift Right ()",description:"Shift the digits of the selected editor to the right. The right-most digit is lost.",keybindings:[">"]},{name:"Rotate Left (ROL)",description:"Shift the digits of the selected editor to the left. The left-most digit is carried on the right side.",keybindings:["{"]},{name:"Rotate Right (ROR)",description:"Shift the digits of the selected editor to the right. The right-most digit is carried on the left side.",keybindings:["}"]},{name:"Clear (Cl)",description:"Set the value of the selected editor to zero.",keybindings:["Shift+Backspace","Shift+Delete"]},{name:"Increase (INC)",description:"Increase the selected digit by one. It wraps around if it exceeds the maximum. In binary, this is the equivalent of a bit flip.",keybindings:["Space"]},{name:"Decrease (DEC)",description:"Decrease the selected digit by one. It wraps around if it goes below zero. In binary, this is the equivalent of a bit flip.",keybindings:["Shift+Space"]},{name:"Movement",description:"Move across editors.",keybindings:["Arrow"]},{name:"Navigate",keybindings:["TAB","Shift+Tab"],description:"Navigate to the next/previous focusable element."},{name:"Copy",keybindings:["Ctrl+C","Cmd+C"],description:"Copy the value of the focused editor in the clipboard. You can also use the button on the right of the editor."},{name:"Paste",keybindings:["Ctrl+V","Cmd+V"],description:"Paste a value from the clipboard in the focused editor. You can also use the button on the right of the editor. It won't do anything if the clipboard doesn't contain a valid value."}],Ff=[{name:"Add (+)",description:"Add the two operands together.",keybindings:["+"]},{name:"Subtract (-)",description:"Subtract operand 2 from operand 1.",keybindings:["-"]},{name:"AND",description:"Logical AND between the two operands.",keybindings:["&"]},{name:"OR",description:"Logical OR between the two operands.",keybindings:["|"]},{name:"XOR",description:"Logical XOR between the two operands.",keybindings:["^"]},{name:"Finalize (=)",description:"Transfer the result in operand 2.",keybindings:["="]},{name:"Clear All (CA)",description:"Clear all values (set them to 0).",keybindings:["Ctrl+Backspace","Ctrl+Delete"]},{name:"Swap Operands (SWAP)",description:"Swap operand 1 with operand 2.",keybindings:[";"]}],zf=[{name:"Advanced",values:[{type:"On",description:"Calculator mode."},{type:"Off",description:"Converter-only mode."}],keybindings:["Q"]},{name:"Unit",values:[{type:"Byte",description:"8-bit editing mode. The high byte is preserved and restored once switching back to 16-bit.",keybindings:["Y"]},{type:"Word",description:"16-bit editing mode.",keybindings:["W"]}]},{name:"Keyboard",values:[{type:"None",description:"Display no keyboard."},{type:"Compact",description:"Display keys corresponding to different operations."},{type:"Full",description:"Display all keys, including digits and arrows. This is a forced option on mobile."}],keybindings:[]},{name:"Typing Mode",values:[{type:"Insert",description:"Insert the typed digit where the cursor is.",keybindings:["I"]},{type:"Overwrite",description:"Replace the selected digit with the typed digit.",keybindings:["O"]}]},{name:"Typing Direction",values:[{type:"Left",description:"Move the cursors to the left after typing. Backspace moves to the right.",keybindings:["L"]},{type:"Right",description:"Move the cursors to the right after typing. Backspace moves to the left.",keybindings:["R"]}]},{name:"Move Cursor",values:[{type:"On",description:"Move cursor after typing."},{type:"Off",description:"Don't move cursor after typing."}],keybindings:["M"]},{name:"Flip Bit",values:[{type:"On",description:"Flip a bit of the binary editor when clicking on it."},{type:"Off",description:"Don't flip any bit when clicking on the editors."}],keybindings:["T"]},{name:"Signed Binary",values:[{type:"On",description:"Binary numbers are signed (they can be negative)."},{type:"Off",description:"Binary numbers are always positive."}],keybindings:[]},{name:"Signed Decimal",values:[{type:"On",description:"Decimal numbers are signed (they can be negative)."},{type:"Off",description:"Decimal numbers are always positive."}],keybindings:["N"]},{name:"Signed Hexadecimal",values:[{type:"On",description:"Hexadecimal numbers are signed (they can be negative)."},{type:"Off",description:"Hexadecimal numbers are always positive."}],keybindings:[]},{name:"Caret",values:[{type:"Bar",description:"Display a bar between digits, to the left of the selected digit."},{type:"Box",description:"Display a box around the selected digit."},{type:"Underline",description:"Display a dash below the selected digit."}],keybindings:[]},{name:"Space Frequency",values:[{type:"None",description:"No space between digits."},{type:"8 Digits",description:"Add a space every 8 digits."},{type:"4 Digits",description:"Add a space every 4 digits."}],keybindings:[]}],Qf=[{name:"Settings",description:"Toggle settings tab visibility.",keybindings:["S"]},{name:"Instructions",description:"Toggle instructions tab visibility.",keybindings:["H"]}];function Wf(){const[t,e]=td();return c(le,{isVisible:t,onChangeVisibility:e,children:[c(le.Section,{title:"General",children:[c("div",{children:"Click on a number to edit it. In a group (bin/dec/hex), the numbers are connected, editing one will cause the others to update. To hide numbers, click on the three toggle buttons on the top-right of the group."}),c("div",{children:["The calculator can be in two modes: ",c("i",{children:"basic"})," or ",c("i",{children:"advanced"}),". Basic mode allows to insert one value and instantly see it's binary, decimal, and hexadecimal counterparts. Advanced mode allows to performs basic logical and arithmetical operations between two values."]})]}),c(le.Section,{title:"Typing Configurations",children:[c("div",{children:"You can customize how you type the digits of the numbers in different ways. However, I suggest sticking to one of these two presets, that reflect the most common or intuitive way of typing:"}),c("div",{children:[c("b",{children:"Number (default):"})," Typing Direction = Left, Typing Mode = Insert, Move Cursor = Off.",c("br",{}),"This is, in my opinion, the most intuitive way to type numbers: the digits will be inserted from right to left, without moving the cursor."]}),c("div",{children:[c("b",{children:"Text:"})," Typing Direction = Right, Typing Mode = Insert, Move Cursor = On.",c("br",{}),"This is how one usually types normal text, from left to right, shifting the cursor after typing."]})]}),c(le.Section,{title:"Basic Actions",children:[c("div",{children:"Actions that can be performed while an editor is selected. Between parenthesis, you find the equivalent of the command on the visual keyboard."}),c(le.Actions,{actions:Vf})]}),c(le.Section,{title:"Advanced Mode",children:[c("div",{children:"Calculator mode allows to perform operations between two values. The widget is divided in three groups (separated by lines): the first two are the operands, the last one holds the result of the operation (it cannot be modified manually)."}),c(le.Actions,{actions:Ff})]}),c(le.Section,{title:"Settings",children:[c("div",{children:"Settings to customize the appearance and behavior of the calculator."}),c(le.Settings,{settings:zf})]}),c(le.Section,{title:"Visibility",children:[c("div",{children:"Shortcuts to toggle sections' visibility."}),c(le.Actions,{actions:Qf})]})]})}function Uf(){const[t,e]=Ir();return c(ne,{hotkey:"Q",label:"Advanced",children:c(dt,{onChange:e,options:hn,value:t})})}const Zf=[{label:"Bar",value:Qi.Bar},{label:"Box",value:Qi.Box},{label:"Underline",value:Qi.Underline}];function Xf(){const[t,e]=Pr();return c(ne,{label:"Caret",children:c(dt,{onChange:e,options:Zf,value:t})})}function Yf(){const[t,e]=da();return c(ne,{hotkey:"T",label:"Flip Bit",children:c(dt,{onChange:e,options:hn,value:t})})}function jf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(s,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),s}var M={};const Hf=jf(Gu);var kn={exports:{}},qf=kn.exports,Mc;function Gf(){return Mc||(Mc=1,function(t,e){(function(s,i){var a="1.0.37",r="",o="?",l="function",u="undefined",d="object",p="string",f="major",h="model",_="name",b="type",w="vendor",g="version",q="architecture",W="console",T="mobile",R="tablet",V="smarttv",re="wearable",xe="embedded",Te=500,ue="Amazon",te="Apple",Re="ASUS",Ye="BlackBerry",Se="Browser",Me="Chrome",De="Edge",Be="Firefox",ke="Google",Ke="Huawei",oe="LG",K="Microsoft",ye="Motorola",je="Opera",Je="Samsung",mt="Sharp",A="Sony",H="Xiaomi",Pe="Zebra",Bt="Facebook",z="Chromium OS",he="Mac OS",we=function(se,fe){var G={};for(var ve in se)fe[ve]&&fe[ve].length%2===0?G[ve]=fe[ve].concat(se[ve]):G[ve]=se[ve];return G},ge=function(se){for(var fe={},G=0;G<se.length;G++)fe[se[G].toUpperCase()]=se[G];return fe},He=function(se,fe){return typeof se===p?Tt(fe).indexOf(Tt(se))!==-1:!1},Tt=function(se){return se.toLowerCase()},Os=function(se){return typeof se===p?se.replace(/[^\d\.]/g,r).split(".")[0]:i},ci=function(se,fe){if(typeof se===p)return se=se.replace(/^\s\s*/,r),typeof fe===u?se:se.substring(0,Te)},Ps=function(se,fe){for(var G=0,ve,Ft,Rt,pe,Z,Et;G<fe.length&&!Z;){var ui=fe[G],_n=fe[G+1];for(ve=Ft=0;ve<ui.length&&!Z&&ui[ve];)if(Z=ui[ve++].exec(se),Z)for(Rt=0;Rt<_n.length;Rt++)Et=Z[++Ft],pe=_n[Rt],typeof pe===d&&pe.length>0?pe.length===2?typeof pe[1]==l?this[pe[0]]=pe[1].call(this,Et):this[pe[0]]=pe[1]:pe.length===3?typeof pe[1]===l&&!(pe[1].exec&&pe[1].test)?this[pe[0]]=Et?pe[1].call(this,Et,pe[2]):i:this[pe[0]]=Et?Et.replace(pe[1],pe[2]):i:pe.length===4&&(this[pe[0]]=Et?pe[3].call(this,Et.replace(pe[1],pe[2])):i):this[pe]=Et||i;G+=2}},li=function(se,fe){for(var G in fe)if(typeof fe[G]===d&&fe[G].length>0){for(var ve=0;ve<fe[G].length;ve++)if(He(fe[G][ve],se))return G===o?i:G}else if(He(fe[G],se))return G===o?i:G;return se},di={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},gn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},bn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,g],[/opios[\/ ]+([\w\.]+)/i],[g,[_,je+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[_,je]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[g,[_,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[_,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[_,"UC"+Se]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[g,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[_,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[_,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[g,[_,"Smart Lenovo "+Se]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+Se],g],[/\bfocus\/([\w\.]+)/i],[g,[_,Be+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[_,je+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[_,je+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[_,"MIUI "+Se]],[/fxios\/([-\w\.]+)/i],[g,[_,Be]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+Se]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+Se],g],[/samsungbrowser\/([\w\.]+)/i],[g,[_,Je+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],g],[/metasr[\/ ]?([\d\.]+)/i],[g,[_,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[_,"Sogou Mobile"],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[_,g],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,Bt],g],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[_,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[_,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[_,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[_,Me+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,Me+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[_,"Android "+Se]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[_,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[g,li,di]],[/(webkit|khtml)\/([\w\.]+)/i],[_,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[_,Be+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[_,g],[/(cobalt)\/([\w\.]+)/i],[_,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[q,"amd64"]],[/(ia32(?=;))/i],[[q,Tt]],[/((?:i[346]|x)86)[;\)]/i],[[q,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[q,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[q,"armhf"]],[/windows (ce|mobile); ppc;/i],[[q,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[q,/ower/,r,Tt]],[/(sun4\w)[;\)]/i],[[q,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[q,Tt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[w,Je],[b,R]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[w,Je],[b,T]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[w,te],[b,T]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[w,te],[b,R]],[/(macintosh);/i],[h,[w,te]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[w,mt],[b,T]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[w,Ke],[b,R]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[w,Ke],[b,T]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[w,H],[b,T]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[w,H],[b,R]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[w,"OPPO"],[b,T]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[w,"Vivo"],[b,T]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[w,"Realme"],[b,T]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[w,ye],[b,T]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[w,ye],[b,R]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[w,oe],[b,R]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[w,oe],[b,T]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[w,"Lenovo"],[b,R]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[w,"Nokia"],[b,T]],[/(pixel c)\b/i],[h,[w,ke],[b,R]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[w,ke],[b,T]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[w,A],[b,T]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[w,A],[b,R]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[w,"OnePlus"],[b,T]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[w,ue],[b,R]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[w,ue],[b,T]],[/(playbook);[-\w\),; ]+(rim)/i],[h,w,[b,R]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[w,Ye],[b,T]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[w,Re],[b,R]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[w,Re],[b,T]],[/(nexus 9)/i],[h,[w,"HTC"],[b,R]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[w,[h,/_/g," "],[b,T]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[w,"Acer"],[b,R]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[w,"Meizu"],[b,T]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[w,"Ulefone"],[b,T]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[w,h,[b,T]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[w,h,[b,R]],[/(surface duo)/i],[h,[w,K],[b,R]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[w,"Fairphone"],[b,T]],[/(u304aa)/i],[h,[w,"AT&T"],[b,T]],[/\bsie-(\w*)/i],[h,[w,"Siemens"],[b,T]],[/\b(rct\w+) b/i],[h,[w,"RCA"],[b,R]],[/\b(venue[\d ]{2,7}) b/i],[h,[w,"Dell"],[b,R]],[/\b(q(?:mv|ta)\w+) b/i],[h,[w,"Verizon"],[b,R]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[w,"Barnes & Noble"],[b,R]],[/\b(tm\d{3}\w+) b/i],[h,[w,"NuVision"],[b,R]],[/\b(k88) b/i],[h,[w,"ZTE"],[b,R]],[/\b(nx\d{3}j) b/i],[h,[w,"ZTE"],[b,T]],[/\b(gen\d{3}) b.+49h/i],[h,[w,"Swiss"],[b,T]],[/\b(zur\d{3}) b/i],[h,[w,"Swiss"],[b,R]],[/\b((zeki)?tb.*\b) b/i],[h,[w,"Zeki"],[b,R]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[w,"Dragon Touch"],h,[b,R]],[/\b(ns-?\w{0,9}) b/i],[h,[w,"Insignia"],[b,R]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[w,"NextBook"],[b,R]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[w,"Voice"],h,[b,T]],[/\b(lvtel\-)?(v1[12]) b/i],[[w,"LvTel"],h,[b,T]],[/\b(ph-1) /i],[h,[w,"Essential"],[b,T]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[w,"Envizen"],[b,R]],[/\b(trio[-\w\. ]+) b/i],[h,[w,"MachSpeed"],[b,R]],[/\btu_(1491) b/i],[h,[w,"Rotor"],[b,R]],[/(shield[\w ]+) b/i],[h,[w,"Nvidia"],[b,R]],[/(sprint) (\w+)/i],[w,h,[b,T]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[w,K],[b,T]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[w,Pe],[b,R]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[w,Pe],[b,T]],[/smart-tv.+(samsung)/i],[w,[b,V]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[w,Je],[b,V]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[w,oe],[b,V]],[/(apple) ?tv/i],[w,[h,te+" TV"],[b,V]],[/crkey/i],[[h,Me+"cast"],[w,ke],[b,V]],[/droid.+aft(\w+)( bui|\))/i],[h,[w,ue],[b,V]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[w,mt],[b,V]],[/(bravia[\w ]+)( bui|\))/i],[h,[w,A],[b,V]],[/(mitv-\w{5}) bui/i],[h,[w,H],[b,V]],[/Hbbtv.*(technisat) (.*);/i],[w,h,[b,V]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[w,ci],[h,ci],[b,V]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[b,V]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[w,h,[b,W]],[/droid.+; (shield) bui/i],[h,[w,"Nvidia"],[b,W]],[/(playstation [345portablevi]+)/i],[h,[w,A],[b,W]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[w,K],[b,W]],[/((pebble))app/i],[w,h,[b,re]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[w,te],[b,re]],[/droid.+; (glass) \d/i],[h,[w,ke],[b,re]],[/droid.+; (wt63?0{2,3})\)/i],[h,[w,Pe],[b,re]],[/(quest( 2| pro)?)/i],[h,[w,Bt],[b,re]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[w,[b,xe]],[/(aeobc)\b/i],[h,[w,ue],[b,xe]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[b,T]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[b,R]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[b,R]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[b,T]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[w,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[_,De+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[_,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,g],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[_,[g,li,gn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,li,gn],[_,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,he],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,g],[/\(bb(10);/i],[g,[_,Ye]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[_,Be+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[_,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[_,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[_,Me+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[_,z],g],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,g],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[_,g]]},gt=function(se,fe){if(typeof se===d&&(fe=se,se=i),!(this instanceof gt))return new gt(se,fe).getResult();var G=typeof s!==u&&s.navigator?s.navigator:i,ve=se||(G&&G.userAgent?G.userAgent:r),Ft=G&&G.userAgentData?G.userAgentData:i,Rt=fe?we(bn,fe):bn,pe=G&&G.userAgent==ve;return this.getBrowser=function(){var Z={};return Z[_]=i,Z[g]=i,Ps.call(Z,ve,Rt.browser),Z[f]=Os(Z[g]),pe&&G&&G.brave&&typeof G.brave.isBrave==l&&(Z[_]="Brave"),Z},this.getCPU=function(){var Z={};return Z[q]=i,Ps.call(Z,ve,Rt.cpu),Z},this.getDevice=function(){var Z={};return Z[w]=i,Z[h]=i,Z[b]=i,Ps.call(Z,ve,Rt.device),pe&&!Z[b]&&Ft&&Ft.mobile&&(Z[b]=T),pe&&Z[h]=="Macintosh"&&G&&typeof G.standalone!==u&&G.maxTouchPoints&&G.maxTouchPoints>2&&(Z[h]="iPad",Z[b]=R),Z},this.getEngine=function(){var Z={};return Z[_]=i,Z[g]=i,Ps.call(Z,ve,Rt.engine),Z},this.getOS=function(){var Z={};return Z[_]=i,Z[g]=i,Ps.call(Z,ve,Rt.os),pe&&!Z[_]&&Ft&&Ft.platform!="Unknown"&&(Z[_]=Ft.platform.replace(/chrome os/i,z).replace(/macos/i,he)),Z},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ve},this.setUA=function(Z){return ve=typeof Z===p&&Z.length>Te?ci(Z,Te):Z,this},this.setUA(ve),this};gt.VERSION=a,gt.BROWSER=ge([_,g,f]),gt.CPU=ge([q]),gt.DEVICE=ge([h,w,b,W,T,V,R,re,xe]),gt.ENGINE=gt.OS=ge([_,g]),t.exports&&(e=t.exports=gt),e.UAParser=gt;var gs=typeof s!==u&&(s.jQuery||s.Zepto);if(gs&&!gs.ua){var $s=new gt;gs.ua=$s.getResult(),gs.ua.get=function(){return $s.getUA()},gs.ua.set=function(se){$s.setUA(se);var fe=$s.getResult();for(var G in fe)gs.ua[G]=fe[G]}}})(typeof window=="object"?window:qf)}(kn,kn.exports)),kn.exports}var Bc;function Kf(){if(Bc)return M;Bc=1,Object.defineProperty(M,"__esModule",{value:!0});function t(x){return x&&typeof x=="object"&&"default"in x?x.default:x}var e=Hf,s=t(e),i=Gf(),a=new i,r=a.getBrowser(),o=a.getCPU(),l=a.getDevice(),u=a.getEngine(),d=a.getOS(),p=a.getUA(),f=function(m){return a.setUA(m)},h=function(m){if(!m){console.error("No userAgent string was provided");return}var v=new i(m);return{UA:v,browser:v.getBrowser(),cpu:v.getCPU(),device:v.getDevice(),engine:v.getEngine(),os:v.getOS(),ua:v.getUA(),setUserAgent:function(P){return v.setUA(P)}}},_=Object.freeze({ClientUAInstance:a,browser:r,cpu:o,device:l,engine:u,os:d,ua:p,setUa:f,parseUserAgent:h});function b(x,m){var v=Object.keys(x);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(x);m&&(S=S.filter(function(P){return Object.getOwnPropertyDescriptor(x,P).enumerable})),v.push.apply(v,S)}return v}function w(x){for(var m=1;m<arguments.length;m++){var v=arguments[m]!=null?arguments[m]:{};m%2?b(Object(v),!0).forEach(function(S){R(x,S,v[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(v)):b(Object(v)).forEach(function(S){Object.defineProperty(x,S,Object.getOwnPropertyDescriptor(v,S))})}return x}function g(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(m){return typeof m}:g=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},g(x)}function q(x,m){if(!(x instanceof m))throw new TypeError("Cannot call a class as a function")}function W(x,m){for(var v=0;v<m.length;v++){var S=m[v];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(x,S.key,S)}}function T(x,m,v){return m&&W(x.prototype,m),x}function R(x,m,v){return m in x?Object.defineProperty(x,m,{value:v,enumerable:!0,configurable:!0,writable:!0}):x[m]=v,x}function V(){return V=Object.assign||function(x){for(var m=1;m<arguments.length;m++){var v=arguments[m];for(var S in v)Object.prototype.hasOwnProperty.call(v,S)&&(x[S]=v[S])}return x},V.apply(this,arguments)}function re(x,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(m&&m.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),m&&Te(x,m)}function xe(x){return xe=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},xe(x)}function Te(x,m){return Te=Object.setPrototypeOf||function(S,P){return S.__proto__=P,S},Te(x,m)}function ue(x,m){if(x==null)return{};var v={},S=Object.keys(x),P,ie;for(ie=0;ie<S.length;ie++)P=S[ie],!(m.indexOf(P)>=0)&&(v[P]=x[P]);return v}function te(x,m){if(x==null)return{};var v=ue(x,m),S,P;if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(x);for(P=0;P<ie.length;P++)S=ie[P],!(m.indexOf(S)>=0)&&Object.prototype.propertyIsEnumerable.call(x,S)&&(v[S]=x[S])}return v}function Re(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function Ye(x,m){if(m&&(typeof m=="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Re(x)}function Se(x,m){return Me(x)||De(x,m)||Be(x,m)||Ke()}function Me(x){if(Array.isArray(x))return x}function De(x,m){var v=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(v!=null){var S=[],P=!0,ie=!1,Fe,bt;try{for(v=v.call(x);!(P=(Fe=v.next()).done)&&(S.push(Fe.value),!(m&&S.length===m));P=!0);}catch(_a){ie=!0,bt=_a}finally{try{!P&&v.return!=null&&v.return()}finally{if(ie)throw bt}}return S}}function Be(x,m){if(x){if(typeof x=="string")return ke(x,m);var v=Object.prototype.toString.call(x).slice(8,-1);if(v==="Object"&&x.constructor&&(v=x.constructor.name),v==="Map"||v==="Set")return Array.from(x);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return ke(x,m)}}function ke(x,m){(m==null||m>x.length)&&(m=x.length);for(var v=0,S=new Array(m);v<m;v++)S[v]=x[v];return S}function Ke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oe={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},K={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},ye={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},je={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},Je=function(m){switch(m){case oe.Mobile:return{isMobile:!0};case oe.Tablet:return{isTablet:!0};case oe.SmartTv:return{isSmartTV:!0};case oe.Console:return{isConsole:!0};case oe.Wearable:return{isWearable:!0};case oe.Browser:return{isBrowser:!0};case oe.Embedded:return{isEmbedded:!0};default:return je}},mt=function(m){return f(m)},A=function(m){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return m||v},H=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},Pe=function(m){var v=H();return v&&v.platform&&(v.platform.indexOf(m)!==-1||v.platform==="MacIntel"&&v.maxTouchPoints>1&&!window.MSStream)},Bt=function(m,v,S,P,ie){return{isBrowser:m,browserMajorVersion:A(v.major),browserFullVersion:A(v.version),browserName:A(v.name),engineName:A(S.name),engineVersion:A(S.version),osName:A(P.name),osVersion:A(P.version),userAgent:A(ie)}},z=function(m,v,S,P){return w({},m,{vendor:A(v.vendor),model:A(v.model),os:A(S.name),osVersion:A(S.version),ua:A(P)})},he=function(m,v,S,P){return{isSmartTV:m,engineName:A(v.name),engineVersion:A(v.version),osName:A(S.name),osVersion:A(S.version),userAgent:A(P)}},we=function(m,v,S,P){return{isConsole:m,engineName:A(v.name),engineVersion:A(v.version),osName:A(S.name),osVersion:A(S.version),userAgent:A(P)}},ge=function(m,v,S,P){return{isWearable:m,engineName:A(v.name),engineVersion:A(v.version),osName:A(S.name),osVersion:A(S.version),userAgent:A(P)}},He=function(m,v,S,P,ie){return{isEmbedded:m,vendor:A(v.vendor),model:A(v.model),engineName:A(S.name),engineVersion:A(S.version),osName:A(P.name),osVersion:A(P.version),userAgent:A(ie)}};function Tt(x){var m=x?h(x):_,v=m.device,S=m.browser,P=m.engine,ie=m.os,Fe=m.ua,bt=Je(v.type),_a=bt.isBrowser,Xu=bt.isMobile,Yu=bt.isTablet,xc=bt.isSmartTV,kc=bt.isConsole,Sc=bt.isWearable,Cc=bt.isEmbedded;if(_a)return Bt(_a,S,P,ie,Fe);if(xc)return he(xc,P,ie,Fe);if(kc)return we(kc,P,ie,Fe);if(Xu||Yu)return z(bt,v,ie,Fe);if(Sc)return ge(Sc,P,ie,Fe);if(Cc)return He(Cc,v,P,ie,Fe)}var Os=function(m){var v=m.type;return v===oe.Mobile},ci=function(m){var v=m.type;return v===oe.Tablet},Ps=function(m){var v=m.type;return v===oe.Mobile||v===oe.Tablet},li=function(m){var v=m.type;return v===oe.SmartTv},di=function(m){var v=m.type;return v===oe.Browser},gn=function(m){var v=m.type;return v===oe.Wearable},bn=function(m){var v=m.type;return v===oe.Console},gt=function(m){var v=m.type;return v===oe.Embedded},gs=function(m){var v=m.vendor;return A(v)},$s=function(m){var v=m.model;return A(v)},se=function(m){var v=m.type;return A(v,"browser")},fe=function(m){var v=m.name;return v===ye.Android},G=function(m){var v=m.name;return v===ye.Windows},ve=function(m){var v=m.name;return v===ye.MAC_OS},Ft=function(m){var v=m.name;return v===ye.WindowsPhone},Rt=function(m){var v=m.name;return v===ye.IOS},pe=function(m){var v=m.version;return A(v)},Z=function(m){var v=m.name;return A(v)},Et=function(m){var v=m.name;return v===K.Chrome},ui=function(m){var v=m.name;return v===K.Firefox},_n=function(m){var v=m.name;return v===K.Chromium},ga=function(m){var v=m.name;return v===K.Edge},Yo=function(m){var v=m.name;return v===K.Yandex},jo=function(m){var v=m.name;return v===K.Safari||v===K.MobileSafari},Ho=function(m){var v=m.name;return v===K.MobileSafari},qo=function(m){var v=m.name;return v===K.Opera},Go=function(m){var v=m.name;return v===K.InternetExplorer||v===K.Ie},Ko=function(m){var v=m.name;return v===K.MIUI},Jo=function(m){var v=m.name;return v===K.SamsungBrowser},ec=function(m){var v=m.version;return A(v)},tc=function(m){var v=m.major;return A(v)},sc=function(m){var v=m.name;return A(v)},ic=function(m){var v=m.name;return A(v)},nc=function(m){var v=m.version;return A(v)},ac=function(){var m=H(),v=m&&m.userAgent&&m.userAgent.toLowerCase();return typeof v=="string"?/electron/.test(v):!1},hi=function(m){return typeof m=="string"&&m.indexOf("Edg/")!==-1},rc=function(){var m=H();return m&&(/iPad|iPhone|iPod/.test(m.platform)||m.platform==="MacIntel"&&m.maxTouchPoints>1)&&!window.MSStream},jt=function(){return Pe("iPad")},oc=function(){return Pe("iPhone")},cc=function(){return Pe("iPod")},lc=function(m){return A(m)};function dc(x){var m=x||_,v=m.device,S=m.browser,P=m.os,ie=m.engine,Fe=m.ua;return{isSmartTV:li(v),isConsole:bn(v),isWearable:gn(v),isEmbedded:gt(v),isMobileSafari:Ho(S)||jt(),isChromium:_n(S),isMobile:Ps(v)||jt(),isMobileOnly:Os(v),isTablet:ci(v)||jt(),isBrowser:di(v),isDesktop:di(v),isAndroid:fe(P),isWinPhone:Ft(P),isIOS:Rt(P)||jt(),isChrome:Et(S),isFirefox:ui(S),isSafari:jo(S),isOpera:qo(S),isIE:Go(S),osVersion:pe(P),osName:Z(P),fullBrowserVersion:ec(S),browserVersion:tc(S),browserName:sc(S),mobileVendor:gs(v),mobileModel:$s(v),engineName:ic(ie),engineVersion:nc(ie),getUA:lc(Fe),isEdge:ga(S)||hi(Fe),isYandex:Yo(S),deviceType:se(v),isIOS13:rc(),isIPad13:jt(),isIPhone13:oc(),isIPod13:cc(),isElectron:ac(),isEdgeChromium:hi(Fe),isLegacyEdge:ga(S)&&!hi(Fe),isWindows:G(P),isMacOs:ve(P),isMIUI:Ko(S),isSamsungBrowser:Jo(S)}}var uc=li(l),hc=bn(l),pc=gn(l),Kd=gt(l),Jd=Ho(r)||jt(),eu=_n(r),ba=Ps(l)||jt(),fc=Os(l),mc=ci(l)||jt(),gc=di(l),tu=di(l),bc=fe(d),_c=Ft(d),yc=Rt(d)||jt(),su=Et(r),iu=ui(r),nu=jo(r),au=qo(r),vc=Go(r),ru=pe(d),ou=Z(d),cu=ec(r),lu=tc(r),du=sc(r),uu=gs(l),hu=$s(l),pu=ic(u),fu=nc(u),mu=lc(p),gu=ga(r)||hi(p),bu=Yo(r),_u=se(l),yu=rc(),vu=jt(),wu=oc(),xu=cc(),ku=ac(),Su=hi(p),Cu=ga(r)&&!hi(p),Ou=G(d),Pu=ve(d),Au=Ko(r),Iu=Jo(r),Tu=function(m){if(!m||typeof m!="string"){console.error("No valid user agent string was provided");return}var v=h(m),S=v.device,P=v.browser,ie=v.os,Fe=v.engine,bt=v.ua;return dc({device:S,browser:P,os:ie,engine:Fe,ua:bt})},Ru=function(m){var v=m.renderWithFragment,S=m.children,P=te(m,["renderWithFragment","children"]);return bc?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},Eu=function(m){var v=m.renderWithFragment,S=m.children,P=te(m,["renderWithFragment","children"]);return gc?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},Du=function(m){var v=m.renderWithFragment,S=m.children,P=te(m,["renderWithFragment","children"]);return vc?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},Nu=function(m){var v=m.renderWithFragment,S=m.children,P=te(m,["renderWithFragment","children"]);return yc?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},Lu=function(m){var v=m.renderWithFragment,S=m.children,P=te(m,["renderWithFragment","children"]);return ba?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},Mu=function(m){var v=m.renderWithFragment,S=m.children,P=te(m,["renderWithFragment","children"]);return mc?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},Bu=function(m){var v=m.renderWithFragment,S=m.children,P=te(m,["renderWithFragment","children"]);return _c?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},$u=function(m){var v=m.renderWithFragment,S=m.children;m.viewClassName,m.style;var P=te(m,["renderWithFragment","children","viewClassName","style"]);return fc?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},Vu=function(m){var v=m.renderWithFragment,S=m.children,P=te(m,["renderWithFragment","children"]);return uc?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},Fu=function(m){var v=m.renderWithFragment,S=m.children,P=te(m,["renderWithFragment","children"]);return hc?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},zu=function(m){var v=m.renderWithFragment,S=m.children,P=te(m,["renderWithFragment","children"]);return pc?v?s.createElement(e.Fragment,null,S):s.createElement("div",P,S):null},Qu=function(m){var v=m.renderWithFragment,S=m.children;m.viewClassName,m.style;var P=m.condition,ie=te(m,["renderWithFragment","children","viewClassName","style","condition"]);return P?v?s.createElement(e.Fragment,null,S):s.createElement("div",ie,S):null};function Wu(x){return function(m){re(v,m);function v(S){var P;return q(this,v),P=Ye(this,xe(v).call(this,S)),P.isEventListenerAdded=!1,P.handleOrientationChange=P.handleOrientationChange.bind(Re(P)),P.onOrientationChange=P.onOrientationChange.bind(Re(P)),P.onPageLoad=P.onPageLoad.bind(Re(P)),P.state={isLandscape:!1,isPortrait:!1},P}return T(v,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var P=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:P===0,isLandscape:P===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":g(window))!==void 0&&ba&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return s.createElement(x,V({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),v}(s.Component)}function Uu(){var x=e.useState(function(){var ie=window.innerWidth>window.innerHeight?90:0;return{isPortrait:ie===0,isLandscape:ie===90,orientation:ie===0?"portrait":"landscape"}}),m=Se(x,2),v=m[0],S=m[1],P=e.useCallback(function(){var ie=window.innerWidth>window.innerHeight?90:0,Fe={isPortrait:ie===0,isLandscape:ie===90,orientation:ie===0?"portrait":"landscape"};v.orientation!==Fe.orientation&&S(Fe)},[v.orientation]);return e.useEffect(function(){return(typeof window>"u"?"undefined":g(window))!==void 0&&ba&&(P(),window.addEventListener("load",P,!1),window.addEventListener("resize",P,!1)),function(){window.removeEventListener("resize",P,!1),window.removeEventListener("load",P,!1)}},[P]),v}function wc(x){var m=x||window.navigator.userAgent;return h(m)}function Zu(x){var m=x||window.navigator.userAgent,v=wc(m),S=dc(v);return[S,v]}return M.AndroidView=Ru,M.BrowserTypes=K,M.BrowserView=Eu,M.ConsoleView=Fu,M.CustomView=Qu,M.IEView=Du,M.IOSView=Nu,M.MobileOnlyView=$u,M.MobileView=Lu,M.OsTypes=ye,M.SmartTVView=Vu,M.TabletView=Mu,M.WearableView=zu,M.WinPhoneView=Bu,M.browserName=du,M.browserVersion=lu,M.deviceDetect=Tt,M.deviceType=_u,M.engineName=pu,M.engineVersion=fu,M.fullBrowserVersion=cu,M.getSelectorsByUserAgent=Tu,M.getUA=mu,M.isAndroid=bc,M.isBrowser=gc,M.isChrome=su,M.isChromium=eu,M.isConsole=hc,M.isDesktop=tu,M.isEdge=gu,M.isEdgeChromium=Su,M.isElectron=ku,M.isEmbedded=Kd,M.isFirefox=iu,M.isIE=vc,M.isIOS=yc,M.isIOS13=yu,M.isIPad13=vu,M.isIPhone13=wu,M.isIPod13=xu,M.isLegacyEdge=Cu,M.isMIUI=Au,M.isMacOs=Pu,M.isMobile=ba,M.isMobileOnly=fc,M.isMobileSafari=Jd,M.isOpera=au,M.isSafari=nu,M.isSamsungBrowser=Iu,M.isSmartTV=uc,M.isTablet=mc,M.isWearable=pc,M.isWinPhone=_c,M.isWindows=Ou,M.isYandex=bu,M.mobileModel=hu,M.mobileVendor=uu,M.osName=ou,M.osVersion=ru,M.parseUserAgent=h,M.setUserAgent=mt,M.useDeviceData=wc,M.useDeviceSelectors=Zu,M.useMobileOrientation=Uu,M.withOrientationChange=Wu,M}var $i=Kf();const Jf=[{label:"None",value:as.None},{label:"Compact",value:as.Compact},{label:"Full",value:as.Full}];function em(){const[t,e]=Jl();return $i.isMobile?null:c(ne,{label:"Keyboard",children:c(dt,{onChange:e,options:Jf,value:t})})}function tm(){const[t,e]=ua();return c(ne,{hotkey:"M",label:"Move Cursor",children:c(dt,{onChange:e,options:hn,value:t})})}function sm(){const[t,e]=Cr();return c(ne,{label:"Signed Binary",children:c(dt,{onChange:e,options:hn,value:t})})}function im(){const[t,e]=la();return c(ne,{hotkey:"N",label:"Signed Decimal",children:c(dt,{onChange:e,options:hn,value:t})})}function nm(){const[t,e]=Or();return c(ne,{label:"Signed Hexadecimal",children:c(dt,{onChange:e,options:hn,value:t})})}const am=[{label:"None",value:Ts.None},{label:"8 Digits",value:Ts.Digits8},{label:"4 Digits",value:Ts.Digits4}];function rm(){const[t,e]=Ar();return c(ne,{label:"Space Frequency",children:c(dt,{onChange:e,options:am,value:t})})}const om=[{label:"Left",value:ht.Left},{label:"Right",value:ht.Right}];function cm(){const[t,e]=ha();return c(ne,{hotkey:"L/R",label:"Typing Direction",children:c(dt,{onChange:e,options:om,value:t})})}const lm=[{label:"Insert",value:Ss.Insert},{label:"Overwrite",value:Ss.Overwrite}];function dm(){const[t,e]=pa();return c(ne,{hotkey:"I/O",label:"Typing Mode",children:c(dt,{onChange:e,options:lm,value:t})})}const um=[{label:"Byte",value:be.Byte},{label:"Word",value:be.Word}];function hm(){const[t,e]=pn();return c(ne,{hotkey:"Y/W",label:"Unit",children:c(dt,{onChange:e,options:um,value:t})})}function pm(){const[t,e]=ed();return c(It,{isVisible:t,label:"Settings",onChange:e,children:c("div",{class:"App_SectionCol",children:[c("div",{class:"App_SectionRow",children:[c(Uf,{}),c(hm,{}),c(em,{}),c(Yf,{})]}),c("div",{class:"App_SectionRow",children:[c(dm,{}),c(cm,{}),c(tm,{})]}),c("div",{class:"App_SectionRow",children:[c(sm,{}),c(im,{}),c(nm,{})]}),c("div",{class:"App_SectionRow",children:[c(Xf,{}),c(rm,{})]})]})})}const fm={[et.And]:"AND",[et.Add]:"+",[et.Or]:"OR",[et.Subtract]:"-",[et.Xor]:"XOR"};function sd(){const[,t]=Tr(),e=C(l=>t(l),[t]),s=C(()=>e(et.Add),[e]),i=C(()=>e(et.Subtract),[e]),a=C(()=>e(et.And),[e]),r=C(()=>e(et.Or),[e]),o=C(()=>e(et.Xor),[e]);return{add:s,and:a,or:r,subtract:i,xor:o}}function id(t,e,s,i){return me(()=>{const a=(()=>{switch(s){case et.Add:return Ja(t.value+e.value,cr[i].max+1);case et.And:return t.value&e.value;case et.Or:return t.value|e.value;case et.Subtract:return Ja(t.value-e.value,cr[i].max+1);case et.Xor:return t.value^e.value}})(),r=na(a,{unit:i});return[r,()=>r]},[t.value,e.value,s,i])}function nd(){const[t]=pn(),e=me(()=>({encoding:X.Bin,isSigned:!1,unit:t}),[t]),[s,{setValue:i}]=Eo(e),[a,{setValue:r}]=Do(e),[o]=Tr(),[l]=id(s,a,o,t),u=C(()=>{r(l.value)},[l.value]),d=C(()=>{i(0),r(0)},[i,r]),p=C(()=>{i(a.value),r(s.value)},[s.value,a.value,i,r]);return{clear:d,finalize:u,swap:p}}function mm(){const[t]=xo(),[e,s]=Ir(),{add:i,and:a,or:r,subtract:o,xor:l}=sd(),[,u]=la(),[,d]=da(),[,p]=ua(),[,f]=ha(),[,h]=pa(),[,_]=ed(),[,b]=td(),[,w]=pn(),{clear:g,finalize:q,swap:W}=nd(),T=me(()=>{const R=[];return t&&(R.push({key:"q",onPress:()=>s(qt)}),R.push({key:"s",onPress:()=>_(qt)}),R.push({key:"h",onPress:()=>b(qt)}),R.push({key:"t",onPress:()=>d(qt)}),R.push({key:"y",onPress:()=>w(be.Byte)}),R.push({key:"w",onPress:()=>w(be.Word)}),R.push({key:"i",onPress:()=>h(Ss.Insert)}),R.push({key:"o",onPress:()=>h(Ss.Overwrite)}),R.push({key:"l",onPress:()=>f(ht.Left)}),R.push({key:"r",onPress:()=>f(ht.Right)}),R.push({key:"m",onPress:()=>p(qt)}),R.push({key:"n",onPress:()=>u(qt)}),e&&(R.push({key:"Backspace",ctrl:!0,onPress:()=>at(g())}),R.push({key:"Delete",ctrl:!0,onPress:()=>at(g())}),R.push({key:";",onPress:W}),R.push({key:"+",onPress:i}),R.push({key:"-",onPress:o}),R.push({key:"&",onPress:a}),R.push({key:"|",onPress:r}),R.push({key:"^",onPress:l}),R.push({key:"=",onPress:q}))),R},[i,a,e,g,q,t,r,h,w,o,W,l]);return dn(T),null}function aa({Icon:t,isSelected:e=!1,onClick:s,tooltip:i,tooltipPosition:a}){return c("div",{class:"IconButton",children:c(Nt,{isBorderless:!0,isSelected:e,label:c(t,{size:"1em"}),onClick:s,tooltip:i,tooltipPosition:a})})}function No({actions:t,children:e,label:s}){return c(pl,{header:c("div",{class:"Section_Header",children:[c("span",{children:s}),c("div",{class:"Section_Header_Actions App_SectionCluster",children:t==null?void 0:t.map(i=>c(aa,{Icon:i.icon,onClick:i.onClick,tooltip:i.tooltip}))})]}),children:e})}function Lo(t,e,s){const[i,a]=At({item:t}),r=Le(0),o=C(()=>(a({item:e}),clearTimeout(r.current),r.current=setTimeout(()=>a({item:t}),s),()=>clearTimeout(r.current)),[t,s,i]);return[i.item,o]}function gm({encoding:t,isSigned:e,spaceFrequency:s,unit:i}){const a=me(()=>{const o=t!==void 0?ks[i][t]:0;return rs(o).reverse()},[t,i]),r=Ct([["Caption",!0],["space-4",s===Ts.Digits4],["space-8",s===Ts.Digits8]]);return c("div",{class:r,children:[e&&c("div",{class:"Caption_Char",children:c("span",{children:""})}),a.map(o=>c("div",{class:"Caption_Char",children:c("span",{children:Ll(o)})},o))]})}function bm({labels:t,onChange:e,values:s}){return c("div",{class:"CheckGroup",children:t.map((i,a)=>{const r=s[a];return r===void 0?null:c(Nt,{isSelected:r,label:i,onClick:()=>{const l=bo(s,a,!r);e(l)}},i)})})}const _m=["B","D","H"];function Wr({children:t,isPasteIconHidden:e=!1,label:s,onCopy:i,onPaste:a}){const[r,o]=Lo(yo,_o,1e3),l=C(()=>{o(),i()},[i,o]);return c(ji,{children:[c("span",{class:"IntegerInput_Label",children:s}),c("div",{class:"IntegerInput_Input",children:t}),c("div",{class:"IntegerInput_Actions",children:[c(aa,{Icon:r,onClick:l,tooltip:"Copy"}),!e&&c(aa,{Icon:hl,onClick:a,tooltip:"Paste"})]})]})}const Ur=t=>{const e=C(()=>{var i;return(i=t.current)==null?void 0:i.copy()},[t]),s=C(()=>{var i;return(i=t.current)==null?void 0:i.paste()},[t]);return{copy:e,paste:s,ref:t}},Mo=ai(function({autoFocus:e,caret:s,integer:i,isDisabled:a=!1,isPasteIconHidden:r=!1,isSignedBin:o=!1,isSignedDec:l=!1,isSignedHex:u=!1,minCaptionEncoding:d,onChangeValue:p,onChangeVisibility:f,prefixBin:h="",prefixDec:_="",prefixHex:b="",shouldFlipBitOnClick:w,shouldMoveAfterTyping:g,shouldShowLine:q=!1,spaceFrequency:W,typingDirection:T,typingMode:R,unit:V,visibility:re},xe){const Te={caret:s,integer:i,isDisabled:a,onChangeValue:p,shouldFlipBitOnClick:w,shouldMoveAfterTyping:g,spaceFrequency:W,typingDirection:T,typingMode:R,unit:V},ue=Le(null),te=Le(null),Re=Le(null),Ye=Ur(ue),Se=Ur(te),Me=Ur(Re),De=re[0]?ue:void 0,Be=re[1]?te:void 0,ke=re[2]?Re:void 0,Ke=Be??ke,oe=De,K=ke,ye=Be??De,je=De??Be??ke,Je=ke??Be??De;br(xe,()=>({focusFirst:()=>je!=null&&je.current?at(je.current.focus()):!1,focusLast:()=>Je!=null&&Je.current?at(Je.current.focus()):!1,hasFocus:()=>{var H,Pe,Bt;return((H=ue.current)==null?void 0:H.hasFocus())||((Pe=te.current)==null?void 0:Pe.hasFocus())||((Bt=Re.current)==null?void 0:Bt.hasFocus())||!1},isVisible:()=>re.some(H=>H),moveDown:()=>{var H,Pe;return(H=ue.current)!=null&&H.hasFocus()?Ke!=null&&Ke.current?at(Ke==null?void 0:Ke.current.focus()):!1:(Pe=te.current)!=null&&Pe.hasFocus()&&K!=null&&K.current?at(K==null?void 0:K.current.focus()):!1},moveUp:()=>{var H,Pe;return(H=Re.current)!=null&&H.hasFocus()?ye!=null&&ye.current?at(ye==null?void 0:ye.current.focus()):!1:(Pe=te.current)!=null&&Pe.hasFocus()&&oe!=null&&oe.current?at(oe==null?void 0:oe.current.focus()):!1}}),[Ke,K,oe,je,ye,Je]);const mt=re[0]||d===X.Bin?X.Bin:re[1]||d===X.Dec?X.Dec:re[2]||d===X.Hex?X.Hex:d,A=mt!==void 0?{[X.Bin]:o,[X.Dec]:l,[X.Hex]:u}[mt]:!1;return c("div",{class:"IntegerInput",children:[c(ji,{children:[q?c("div",{class:"IntegerInput_Line"}):c(ji,{children:[c("div",{class:"IntegerInput_Label",children:""}),c(gm,{encoding:mt,isSigned:A,spaceFrequency:W,unit:V})]}),c("div",{class:"IntegerInput_Visibility",children:c(bm,{labels:_m,onChange:f,values:re})})]}),re[0]&&c(Wr,{isPasteIconHidden:r,label:h,onCopy:Ye.copy,onPaste:Ye.paste,children:c(Qr,{...Te,...Ye,autoFocus:e,encoding:X.Bin,isSigned:o})}),re[1]&&c(Wr,{isPasteIconHidden:r,label:_,onCopy:Se.copy,onPaste:Se.paste,children:c(Qr,{...Te,...Se,encoding:X.Dec,isSigned:l})}),re[2]&&c(Wr,{isPasteIconHidden:r,label:b,onCopy:Me.copy,onPaste:Me.paste,children:c(Qr,{...Te,...Me,encoding:X.Hex,isSigned:u})})]})}),ym=ai(function(e,s){const[i]=Cr(),[a]=la(),[r]=Or(),[o]=Pr(),[l]=da(),[u]=ua(),[d]=Ar(),[p]=ha(),[f]=pa(),[h]=pn(),_=me(()=>({encoding:X.Bin,isSigned:!1,unit:h}),[h]),[b,{setValue:w}]=Eo(_),[g,q]=Mf();return c(Mo,{autoFocus:!0,caret:o,integer:b,isSignedBin:i,isSignedDec:a,isSignedHex:r,onChangeValue:w,onChangeVisibility:q,minCaptionEncoding:X.Bin,prefixBin:"BIN",prefixDec:"DEC",prefixHex:"HEX",ref:s,shouldFlipBitOnClick:l,shouldMoveAfterTyping:u,spaceFrequency:d,typingDirection:p,typingMode:f,unit:h,visibility:g})}),vm=ai(function(e,s){const[i]=Cr(),[a]=la(),[r]=Or(),[o]=Pr(),[l]=da(),[u]=ua(),[d]=Ar(),[p]=ha(),[f]=pa(),[h]=pn(),_=me(()=>({encoding:X.Bin,isSigned:!1,unit:h}),[h]),[b,{setValue:w}]=Do(_),[g,q]=Bf(),[W]=Tr(),T=ln(fm[W],3," "),[R,V,re]=g[0]?[T,"   ","   "]:g[1]?["   ",T,"   "]:g[2]?["   ","   ",T]:["   ","   ","   "];return c(Mo,{autoFocus:!0,caret:o,integer:b,isSignedBin:i,isSignedDec:a,isSignedHex:r,onChangeValue:w,onChangeVisibility:q,minCaptionEncoding:X.Bin,prefixBin:R,prefixDec:V,prefixHex:re,ref:s,shouldFlipBitOnClick:l,shouldMoveAfterTyping:u,shouldShowLine:!0,spaceFrequency:d,typingDirection:p,typingMode:f,unit:h,visibility:g})}),wm=ai(function(e,s){const[i]=Cr(),[a]=la(),[r]=Or(),[o]=Pr(),[l]=da(),[u]=ua(),[d]=Ar(),[p]=ha(),[f]=pa(),[h]=pn(),_=me(()=>({encoding:X.Bin,isSigned:!1,unit:h}),[h]),[b]=Eo(_),[w]=Do(_),[g]=Tr(),[q,W]=id(b,w,g,h),[T,R]=$f(),[V,re,xe]=T[0]?["  =","   ","   "]:T[1]?["   ","  =","   "]:T[2]?["   ","   ","  ="]:["   ","   ","   "];return c(Mo,{autoFocus:!0,caret:o,integer:q,isPasteIconHidden:!0,isDisabled:!0,isSignedBin:i,isSignedDec:a,isSignedHex:r,onChangeValue:W,onChangeVisibility:R,minCaptionEncoding:X.Bin,prefixBin:V,prefixDec:re,prefixHex:xe,ref:s,shouldFlipBitOnClick:l,shouldMoveAfterTyping:u,shouldShowLine:!0,spaceFrequency:d,typingDirection:p,typingMode:f,unit:h,visibility:T})}),_t=(t,e)=>()=>{document.activeElement&&document.activeElement.dispatchEvent(new KeyboardEvent("keydown",{key:t,shiftKey:e}))};function xm({onMoveDown:t,onMoveUp:e}){const[s]=Ir(),[i]=Jl(),{add:a,and:r,or:o,subtract:l,xor:u}=sd(),{clear:d,finalize:p,swap:f}=nd(),h=me(()=>{if(!$i.isMobile&&i===as.None)return[];const _=[];return($i.isMobile||i!==as.None&&s)&&_.push({label:"+",onClick:a},{label:"-",onClick:l},{label:"AND",onClick:r,size:"xs"},{label:"OR",onClick:o,size:"xs"},{label:"XOR",onClick:u,size:"xs"},{label:"=",onClick:p},{label:"SWAP",onClick:f,size:"xs"},{label:"AC",onClick:d,size:"s"}),($i.isMobile||i!==as.None)&&_.push({label:"NEG",onClick:_t("!"),size:"xs"},{label:"",onClick:_t("<")},{label:"",onClick:_t(">")},{label:"ROL",onClick:_t("{"),size:"xs"},{label:"ROR",onClick:_t("}"),size:"xs"},{label:"DEL",onClick:_t("Delete"),size:"xs"},{label:"",onClick:_t("Backspace")},{label:"Cl",onClick:_t("Delete",!0),size:"s"}),($i.isMobile||i===as.Full)&&_.push(...xr.map(b=>({label:b,onClick:_t(b)})),{label:"INC",onClick:_t(" "),size:"xs"},{label:"DEC",onClick:_t(" ",!0),size:"xs"},{label:" ",onClick:_t(" "),colSpan:2},{label:"",onClick:_t("ArrowLeft")},{label:"",onClick:e},{label:"",onClick:t},{label:"",onClick:_t("ArrowRight")}),_},[a,r,s,d,p,i,t,e,o,l,f,u]);return h.length>0?c(Gl,{actions:h}):null}function km(){const[t]=Ir(),e=Le(null),s=Le(null),i=Le(null),a=C(()=>{var l,u,d,p,f,h,_,b,w;return(l=i.current)!=null&&l.hasFocus()?i.current.moveDown():(u=s.current)!=null&&u.hasFocus()?s.current.moveDown()||((d=i.current)!=null&&d.isVisible()?(p=i.current)==null?void 0:p.focusFirst():!1):(f=e.current)!=null&&f.hasFocus()?e.current.moveDown()||((h=s.current)!=null&&h.isVisible()?(_=s.current)==null?void 0:_.focusFirst():(b=i.current)!=null&&b.isVisible()?(w=i.current)==null?void 0:w.focusFirst():!1):!1},[]),r=C(()=>{var l,u,d,p,f,h,_,b,w;return(l=e.current)!=null&&l.hasFocus()?e.current.moveUp():(u=s.current)!=null&&u.hasFocus()?s.current.moveUp()||((d=e.current)!=null&&d.isVisible()?(p=e.current)==null?void 0:p.focusLast():!1):(f=i.current)!=null&&f.hasFocus()?i.current.moveUp()||((h=s.current)!=null&&h.isVisible()?(_=s.current)==null?void 0:_.focusLast():(b=e.current)!=null&&b.isVisible()?(w=e.current)==null?void 0:w.focusLast():!1):!1},[]),o=me(()=>[{key:"Tab",onPress:()=>{var l,u,d,p,f,h;return dl()?((l=e.current)==null?void 0:l.isVisible())&&((u=e.current)==null?void 0:u.focusFirst())||((d=s.current)==null?void 0:d.isVisible())&&((p=s.current)==null?void 0:p.focusFirst())||((f=i.current)==null?void 0:f.isVisible())&&((h=i.current)==null?void 0:h.focusFirst()):!1}},{key:"ArrowDown",onPress:a},{key:"ArrowUp",onPress:r}],[a,r]);return dn(o),c(No,{label:"Calculator",children:c("div",{class:"App_SectionCol align-items_center",children:[c("div",{class:"App_SectionCol",children:[c(ym,{ref:e}),t&&c(ji,{children:[c(vm,{ref:s}),c(wm,{ref:i})]})]}),c(xm,{onMoveDown:a,onMoveUp:r})]})})}function Sm(){return c("div",{class:"App_Module",children:[c(mm,{}),c("div",{class:"App_ModuleBlock",children:c(km,{})}),c("div",{class:"App_ModuleBlock",children:[c(pm,{}),c(Wf,{})]})]})}class pi extends Error{constructor(s,i){super(s);n(this,"range");this.range=i}}var $c={};class ur{constructor(e,s,i,a,r,o,l,u,d,p=0,f){this.p=e,this.stack=s,this.state=i,this.reducePos=a,this.pos=r,this.score=o,this.buffer=l,this.bufferBase=u,this.curContext=d,this.lookAhead=p,this.parent=f}toString(){return`[${this.stack.filter((e,s)=>s%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,s,i=0){let a=e.parser.context;return new ur(e,[],s,i,i,0,[],0,a?new Vc(a,a.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,s){this.stack.push(this.state,s,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var s;let i=e>>19,a=e&65535,{parser:r}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=r.dynamicPrecedence(a);if(l&&(this.score+=l),i==0){this.pushState(r.getGoto(this.state,a,!0),this.reducePos),a<r.minRepeatTerm&&this.storeNode(a,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(a,this.reducePos);return}let u=this.stack.length-(i-1)*3-(e&262144?6:0),d=u?this.stack[u-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((s=this.p.parser.nodeSet.types[a])===null||s===void 0)&&s.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let f=u?this.stack[u-1]:0,h=this.bufferBase+this.buffer.length-f;if(a<r.minRepeatTerm||e&131072){let _=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(a,d,_,h+4,!0)}if(e&262144)this.state=this.stack[u];else{let _=this.stack[u-3];this.state=r.getGoto(_,a,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(a,d)}storeNode(e,s,i,a=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(s==i)return;if(o.buffer[l-2]>=s){o.buffer[l-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,s,i,a);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let u=o;u>0&&this.buffer[u-2]>i;u-=4)if(this.buffer[u-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,a>4&&(a-=4)}this.buffer[o]=e,this.buffer[o+1]=s,this.buffer[o+2]=i,this.buffer[o+3]=a}}shift(e,s,i,a){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let r=e,{parser:o}=this.p;(a>this.pos||s<=o.maxNode)&&(this.pos=a,o.stateFlag(r,1)||(this.reducePos=a)),this.pushState(r,i),this.shiftContext(s,i),s<=o.maxNode&&this.buffer.push(s,i,a,4)}else this.pos=a,this.shiftContext(s,i),s<=this.p.parser.maxNode&&this.buffer.push(s,i,a,4)}apply(e,s,i,a){e&65536?this.reduce(e):this.shift(e,s,i,a)}useNode(e,s){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let a=this.pos;this.reducePos=this.pos=a+e.length,this.pushState(s,a),this.buffer.push(i,a,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,s=e.buffer.length;for(;s>0&&e.buffer[s-2]>e.reducePos;)s-=4;let i=e.buffer.slice(s),a=e.bufferBase+s;for(;e&&a==e.bufferBase;)e=e.parent;return new ur(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,a,this.curContext,this.lookAhead,e)}recoverByDelete(e,s){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,s,4),this.storeNode(0,this.pos,s,i?8:4),this.pos=this.reducePos=s,this.score-=190}canShift(e){for(let s=new Cm(this);;){let i=this.p.parser.stateSlot(s.state,4)||this.p.parser.hasAction(s.state,e);if(i==0)return!1;if((i&65536)==0)return!0;s.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let s=this.p.parser.nextStates(this.state);if(s.length>8||this.stack.length>=120){let a=[];for(let r=0,o;r<s.length;r+=2)(o=s[r+1])!=this.state&&this.p.parser.hasAction(o,e)&&a.push(s[r],o);if(this.stack.length<120)for(let r=0;a.length<8&&r<s.length;r+=2){let o=s[r+1];a.some((l,u)=>u&1&&l==o)||a.push(s[r],o)}s=a}let i=[];for(let a=0;a<s.length&&i.length<4;a+=2){let r=s[a+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(s[a],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,s=e.stateSlot(this.state,5);if((s&65536)==0)return!1;if(!e.validAction(this.state,s)){let i=s>>19,a=s&65535,r=this.stack.length-i*3;if(r<0||e.getGoto(this.stack[r],a,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;s=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(s),!0}findForcedReduction(){let{parser:e}=this.p,s=[],i=(a,r)=>{if(!s.includes(a))return s.push(a),e.allActions(a,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-r;if(l>1){let u=o&65535,d=this.stack.length-l*3;if(d>=0&&e.getGoto(this.stack[d],u,!1)>=0)return l<<19|65536|u}}else{let l=i(o,r+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let s=0;s<this.stack.length;s+=3)if(this.stack[s]!=e.stack[s])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,s){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(s)))}reduceContext(e,s){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(s)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let s=new Vc(this.curContext.tracker,e);s.hash!=this.curContext.hash&&this.emitContext(),this.curContext=s}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Vc{constructor(e,s){this.tracker=e,this.context=s,this.hash=e.strict?e.hash(s):0}}class Cm{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let s=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let a=this.start.p.parser.getGoto(this.stack[this.base-3],s,!0);this.state=a}}class hr{constructor(e,s,i){this.stack=e,this.pos=s,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,s=e.bufferBase+e.buffer.length){return new hr(e,s,s-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new hr(this.stack,this.pos,this.index)}}function va(t,e=Uint16Array){if(typeof t!="string")return t;let s=null;for(let i=0,a=0;i<t.length;){let r=0;for(;;){let o=t.charCodeAt(i++),l=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let u=o-32;if(u>=46&&(u-=46,l=!0),r+=u,l)break;r*=46}s?s[a++]=r:s=new e(r)}return s}class Ea{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Fc=new Ea;class Om{constructor(e,s){this.input=e,this.ranges=s,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Fc,this.rangeIndex=0,this.pos=this.chunkPos=s[0].from,this.range=s[0],this.end=s[s.length-1].to,this.readNext()}resolveOffset(e,s){let i=this.range,a=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!a)return null;let o=this.ranges[--a];r-=i.from-o.to,i=o}for(;s<0?r>i.to:r>=i.to;){if(a==this.ranges.length-1)return null;let o=this.ranges[++a];r+=o.from-i.to,i=o}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let s of this.ranges)if(s.to>e)return Math.max(e,s.from);return this.end}peek(e){let s=this.chunkOff+e,i,a;if(s>=0&&s<this.chunk.length)i=this.pos+e,a=this.chunk.charCodeAt(s);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)a=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),a=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),a}acceptToken(e,s=0){let i=s?this.resolveOffset(s,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,s){this.token.value=e,this.token.end=s}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:s}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=s,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),s=this.pos+e.length;this.chunk=s>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,s){if(s?(this.token=s,s.start=e,s.lookAhead=e+1,s.value=s.extended=-1):this.token=Fc,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,s){if(e>=this.chunkPos&&s<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,s-this.chunkPos);if(e>=this.chunk2Pos&&s<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,s-this.chunk2Pos);if(e>=this.range.from&&s<=this.range.to)return this.input.read(e,s);let i="";for(let a of this.ranges){if(a.from>=s)break;a.to>e&&(i+=this.input.read(Math.max(a.from,e),Math.min(a.to,s)))}return i}}class Wi{constructor(e,s){this.data=e,this.id=s}token(e,s){let{parser:i}=s.p;Pm(this.data,e,s,this.id,i.data,i.tokenPrecTable)}}Wi.prototype.contextual=Wi.prototype.fallback=Wi.prototype.extend=!1;Wi.prototype.fallback=Wi.prototype.extend=!1;function Pm(t,e,s,i,a,r){let o=0,l=1<<i,{dialect:u}=s.p.parser;e:for(;(l&t[o])!=0;){let d=t[o+1];for(let _=o+3;_<d;_+=2)if((t[_+1]&l)>0){let b=t[_];if(u.allows(b)&&(e.token.value==-1||e.token.value==b||Am(b,e.token.value,a,r))){e.acceptToken(b);break}}let p=e.next,f=0,h=t[o+2];if(e.next<0&&h>f&&t[d+h*3-3]==65535){o=t[d+h*3-1];continue e}for(;f<h;){let _=f+h>>1,b=d+_+(_<<1),w=t[b],g=t[b+1]||65536;if(p<w)h=_;else if(p>=g)f=_+1;else{o=t[b+2],e.advance();continue e}}break}}function zc(t,e,s){for(let i=e,a;(a=t[i])!=65535;i++)if(a==s)return i-e;return-1}function Am(t,e,s,i){let a=zc(s,i,e);return a<0||zc(s,i,t)<a}const Dt=typeof process<"u"&&$c&&/\bparse\b/.test($c.LOG);let Zr=null;function Qc(t,e,s){let i=t.cursor(ah.IncludeAnonymous);for(i.moveTo(e);;)if(!(s<0?i.childBefore(e):i.childAfter(e)))for(;;){if((s<0?i.to<e:i.from>e)&&!i.type.isError)return s<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(t.length,Math.max(i.from+1,e+25));if(s<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return s<0?0:t.length}}class Im{constructor(e,s){this.fragments=e,this.nodeSet=s,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Qc(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Qc(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let s=this.trees.length-1;if(s<0)return this.nextFragment(),null;let i=this.trees[s],a=this.index[s];if(a==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[a],o=this.start[s]+i.positions[a];if(o>e)return this.nextStart=o,null;if(r instanceof Ta){if(o==e){if(o<this.safeFrom)return null;let l=o+r.length;if(l<=this.safeTo){let u=r.prop(go.lookAhead);if(!u||l+u<this.fragment.to)return r}}this.index[s]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[s]++,this.nextStart=o+r.length}}}class Tm{constructor(e,s){this.stream=s,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Ea)}getActions(e){let s=0,i=null,{parser:a}=e.p,{tokenizers:r}=a,o=a.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,u=0;for(let d=0;d<r.length;d++){if((1<<d&o)==0)continue;let p=r[d],f=this.tokens[d];if(!(i&&!p.fallback)&&((p.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,p,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(u=Math.max(f.lookAhead,u)),f.value!=0)){let h=s;if(f.extended>-1&&(s=this.addActions(e,f.extended,f.end,s)),s=this.addActions(e,f.value,f.end,s),!p.extend&&(i=f,s>h))break}}for(;this.actions.length>s;)this.actions.pop();return u&&e.setLookAhead(u),!i&&e.pos==this.stream.end&&(i=new Ea,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,s=this.addActions(e,i.value,i.end,s)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let s=new Ea,{pos:i,p:a}=e;return s.start=i,s.end=Math.min(i+1,a.stream.end),s.value=i==a.stream.end?a.parser.eofTerm:0,s}updateCachedToken(e,s,i){let a=this.stream.clipPos(i.pos);if(s.token(this.stream.reset(a,e),i),e.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let l=r.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(a+1)}putAction(e,s,i,a){for(let r=0;r<a;r+=3)if(this.actions[r]==e)return a;return this.actions[a++]=e,this.actions[a++]=s,this.actions[a++]=i,a}addActions(e,s,i,a){let{state:r}=e,{parser:o}=e.p,{data:l}=o;for(let u=0;u<2;u++)for(let d=o.stateSlot(r,u?2:1);;d+=3){if(l[d]==65535)if(l[d+1]==1)d=vs(l,d+2);else{a==0&&l[d+1]==2&&(a=this.putAction(vs(l,d+2),s,i,a));break}l[d]==s&&(a=this.putAction(vs(l,d+1),s,i,a))}return a}}class Rm{constructor(e,s,i,a){this.parser=e,this.input=s,this.ranges=a,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Om(s,a),this.tokens=new Tm(e,this.stream),this.topTerm=e.top[1];let{from:r}=a[0];this.stacks=[ur.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>e.bufferLength*4?new Im(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,s=this.minStackPos,i=this.stacks=[],a,r;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>s)i.push(l);else{if(this.advanceStack(l,i,e))continue;{a||(a=[],r=[]),a.push(l);let u=this.tokens.getMainToken(l);r.push(u.value,u.end)}}break}}if(!i.length){let o=a&&Dm(a);if(o)return Dt&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Dt&&a&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+s);this.recovering||(this.recovering=5)}if(this.recovering&&a){let o=this.stoppedAt!=null&&a[0].pos>this.stoppedAt?a[0]:this.runRecovery(a,r,i);if(o)return Dt&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,u)=>u.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>s)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let u=o+1;u<i.length;u++){let d=i[u];if(l.sameState(d)||l.buffer.length>500&&d.buffer.length>500)if((l.score-d.score||l.buffer.length-d.buffer.length)>0)i.splice(u--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,s,i){let a=e.pos,{parser:r}=this,o=Dt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&a>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let f=this.fragments.nodeAt(a);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?r.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!d||(f.prop(go.contextHash)||0)==p))return e.useNode(f,h),Dt&&console.log(o+this.stackID(e)+` (via reuse of ${r.getName(f.type.id)})`),!0;if(!(f instanceof Ta)||f.children.length==0||f.positions[0]>0)break;let _=f.children[0];if(_ instanceof Ta&&f.positions[0]==0)f=_;else break}}let l=r.stateSlot(e.state,4);if(l>0)return e.reduce(l),Dt&&console.log(o+this.stackID(e)+` (via always-reduce ${r.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let d=0;d<u.length;){let p=u[d++],f=u[d++],h=u[d++],_=d==u.length||!i,b=_?e:e.split(),w=this.tokens.mainToken;if(b.apply(p,f,w?w.start:b.pos,h),Dt&&console.log(o+this.stackID(b)+` (via ${(p&65536)==0?"shift":`reduce of ${r.getName(p&65535)}`} for ${r.getName(f)} @ ${a}${b==e?"":", split"})`),_)return!0;b.pos>a?s.push(b):i.push(b)}return!1}advanceFully(e,s){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Wc(e,s),!0}}runRecovery(e,s,i){let a=null,r=!1;for(let o=0;o<e.length;o++){let l=e[o],u=s[o<<1],d=s[(o<<1)+1],p=Dt?this.stackID(l)+" -> ":"";if(l.deadEnd&&(r||(r=!0,l.restart(),Dt&&console.log(p+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),h=p;for(let _=0;f.forceReduce()&&_<10&&(Dt&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));_++)Dt&&(h=this.stackID(f)+" -> ");for(let _ of l.recoverByInsert(u))Dt&&console.log(p+this.stackID(_)+" (via recover-insert)"),this.advanceFully(_,i);this.stream.end>l.pos?(d==l.pos&&(d++,u=0),l.recoverByDelete(u,d),Dt&&console.log(p+this.stackID(l)+` (via recover-delete ${this.parser.getName(u)})`),Wc(l,i)):(!a||a.score<l.score)&&(a=l)}return a}stackToTree(e){return e.close(),Ta.build({buffer:hr.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let s=(Zr||(Zr=new WeakMap)).get(e);return s||Zr.set(e,s=String.fromCodePoint(this.nextStackID++)),s+e}}function Wc(t,e){for(let s=0;s<e.length;s++){let i=e[s];if(i.pos==t.pos&&i.sameState(t)){e[s].score<t.score&&(e[s]=t);return}}e.push(t)}class Em{constructor(e,s,i){this.source=e,this.flags=s,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class pr extends th{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let s=e.nodeNames.split(" ");this.minRepeatTerm=s.length;for(let l=0;l<e.repeatNodeCount;l++)s.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),a=[];for(let l=0;l<s.length;l++)a.push([]);function r(l,u,d){a[l].push([u,u.deserialize(String(d))])}if(e.nodeProps)for(let l of e.nodeProps){let u=l[0];typeof u=="string"&&(u=go[u]);for(let d=1;d<l.length;){let p=l[d++];if(p>=0)r(p,u,l[d++]);else{let f=l[d+-p];for(let h=-p;h>0;h--)r(l[d++],u,f);d++}}}this.nodeSet=new sh(s.map((l,u)=>ih.define({name:u>=this.minRepeatTerm?void 0:l,id:u,props:a[u],top:i.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=nh;let o=va(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Uc),this.states=va(e.states,Uint32Array),this.data=va(e.stateData),this.goto=va(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Wi(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,s,i){let a=new Rm(this,e,s,i);for(let r of this.wrappers)a=r(a,e,s,i);return a}getGoto(e,s,i=!1){let a=this.goto;if(s>=a[0])return-1;for(let r=a[s+1];;){let o=a[r++],l=o&1,u=a[r++];if(l&&i)return u;for(let d=r+(o>>1);r<d;r++)if(a[r]==e)return u;if(l)return-1}}hasAction(e,s){let i=this.data;for(let a=0;a<2;a++)for(let r=this.stateSlot(e,a?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=vs(i,r+2)];else{if(i[r+1]==2)return vs(i,r+2);break}if(o==s||o==0)return vs(i,r+1)}return 0}stateSlot(e,s){return this.states[e*6+s]}stateFlag(e,s){return(this.stateSlot(e,0)&s)>0}validAction(e,s){return!!this.allActions(e,i=>i==s?!0:null)}allActions(e,s){let i=this.stateSlot(e,4),a=i?s(i):void 0;for(let r=this.stateSlot(e,1);a==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=vs(this.data,r+2);else break;a=s(vs(this.data,r+1))}return a}nextStates(e){let s=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=vs(this.data,i+2);else break;if((this.data[i+2]&1)==0){let a=this.data[i+1];s.some((r,o)=>o&1&&r==a)||s.push(this.data[i],a)}}return s}configure(e){let s=Object.assign(Object.create(pr.prototype),this);if(e.props&&(s.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);s.top=i}return e.tokenizers&&(s.tokenizers=this.tokenizers.map(i=>{let a=e.tokenizers.find(r=>r.from==i);return a?a.to:i})),e.specializers&&(s.specializers=this.specializers.slice(),s.specializerSpecs=this.specializerSpecs.map((i,a)=>{let r=e.specializers.find(l=>l.from==i.external);if(!r)return i;let o=Object.assign(Object.assign({},i),{external:r.to});return s.specializers[a]=Uc(o),o})),e.contextTracker&&(s.context=e.contextTracker),e.dialect&&(s.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(s.strict=e.strict),e.wrap&&(s.wrappers=s.wrappers.concat(e.wrap)),e.bufferLength!=null&&(s.bufferLength=e.bufferLength),s}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let s=this.dynamicPrecedences;return s==null?0:s[e]||0}parseDialect(e){let s=Object.keys(this.dialects),i=s.map(()=>!1);if(e)for(let r of e.split(" ")){let o=s.indexOf(r);o>=0&&(i[o]=!0)}let a=null;for(let r=0;r<s.length;r++)if(!i[r])for(let o=this.dialects[s[r]],l;(l=this.data[o++])!=65535;)(a||(a=new Uint8Array(this.maxTerm+1)))[l]=1;return new Em(e,i,a)}static deserialize(e){return new pr(e)}}function vs(t,e){return t[e]|t[e+1]<<16}function Dm(t){let e=null;for(let s of t){let i=s.p.stoppedAt;(s.pos==s.p.stream.end||i!=null&&s.pos>i)&&s.p.parser.stateFlag(s.state,2)&&(!e||e.score<s.score)&&(e=s)}return e}function Uc(t){if(t.external){let e=t.extend?1:0;return(s,i)=>t.external(s,i)<<1|e}return t.get}const Nm=pr.deserialize({version:14,states:"+vQYQPOOOqQPO'#C_OvQQO'#DvO{QQO'#DwO!QQQO'#DxOOQO'#Du'#DuO!VQQO'#CcOOQO'#Cc'#CcOOQO'#Dr'#DrO#TQPO'#DqOOQO'#Dq'#DqOOQO'#Di'#DiQYQPOOOOQO,58y,58yO#`QPO,5:bO#nQPO,5:cO#|QPO,5:dOOQO'#Ce'#CeOOQO'#Cg'#CgOOQO'#Ci'#CiO$[QQO'#CkO$pQQO'#CsO${QQO'#CxO%WQQO'#CzO%iQQO'#DROOQO'#DX'#DXO%wQQO'#DZO%|QQO'#D]OOQO'#Ds'#DsOOQO,58},58}O&_QPO'#DmO&sQPO,5:]OOQO,5:],5:]OOQO-E7g-E7gO'OQQO'#DjO'TQPO1G/|O'cQQO'#DkO'hQPO1G/}O'vQQO'#DlO'{QPO1G0OOOQO,59X,59XOOQO,59Z,59ZOOQO,59p,59pO(ZQQO,59_O(fQQO,59jO(nQQO,59zO(vQPO,59dO({QPO,59lO)QQPO,59}OOQO,59h,59hOOQO,59i,59iOOQO,59o,59oOOQO,59u,59uOOQO,59x,59xOOQO,59y,59yOOQO,5:X,5:XOOQO-E7k-E7kOOQO1G/w1G/wOOQO,5:U,5:UOOQO-E7h-E7hOOQO,5:V,5:VOOQO-E7i-E7iOOQO,5:W,5:WOOQO-E7j-E7jO)VQQO1G.yO)eQPO1G.zO)jQPO1G/^OOQO1G/U1G/UO)oQPO1G/VO)tQQO1G/fO*SQPO1G/gO*XQQO1G/OOOQO1G/W1G/WO*gQQO1G/iOOQO7+$g7+$gOOQO7+$f7+$fO*uQQO7+$xOOQO7+$q7+$qOOQO7+%S7+%SOOQO7+%R7+%ROOQO7+$k7+$kOOQO7+%U7+%UOOQO<<Hd<<Hd",stateData:"*z~OPOS!dOS~OSPOUWOWUO!XQO!ZRO![SO!nYO~OT]O~O`^O~Oo_O~Ov`O~OYaO[bO^cO`dOfeOkfOogOvhO|iO!OkO!hjO!mVX!nVX!oVX~O!mnO!npO!opO~O!YrO!m!ja!n!ja!o!ja~O!YtO!m!ka!n!ka!o!ka~O!YvO!m!la!n!la!o!la~ObxOdyOyzO!m_X!n_X!o_X~O`{Oo|O!O}O~O`!OOo!PO!O!QO~Ob!ROd!SO!mnX!nnX!onX~Ob!TO!muX!nuX!ouX~O!O!UO~Ob!VOd!WO!m!PX!n!PX!o!PX~OSPOUWOWUO!XQO!ZRO![SO~O!mnO!n!ZO!o!ZO~O`![O~O!YrO!m!ji!n!ji!o!ji~Oo!^O~O!YtO!m!ki!n!ki!o!ki~Ov!`O~O!YvO!m!li!n!li!o!li~Ob!cOe!bOy!dO~Ob!fOe!eO~Ob!hOe!gO~Oj!iO~Oj!jO~Oj!kO~Od!lO!mgi!ngi!ogi~Oe!mO~Oe!nO~Oe!oO~Od!pO!m!Si!n!Si!o!Si~Oe!qO~Od!rO!mli!nli!oli~Od!sO!m!Vi!n!Vi!o!Vi~Od!tO~O",goto:"$O!mPPP!nPPP!nP!sP!sP!sP!sP!sP!sPPP!s!s!sPP!s!s!sP!s!s!s!s!s!sP!s!sP!s!sP!sP!s!s!s!s!s!s!s!sPPPP!v!|#S#Y#`PPP#f#j#qP#t#y#y#yVWO[nRlUQ[ORq[Qs^R!]sQu_R!_uQw`R!awQoXR!YoTZO[SXO[R!XnRmUVVO[nVTO[n",nodeNames:" Comment Program OrgDefinition ORG Origin LabelDefinition Instruction Opcode Mode_Accumulator A Mode_Immediate_Byte ConstByte Mode_Immediate_Word ConstWord Mode_DirectPage Byte Mode_DirectPage_X X Mode_DirectPage_Y Y ) ( Mode_DirectPage_Indirect Mode_DirectPage_X_Indirect Mode_DirectPage_Indirect_Y ] [ Mode_DirectPage_IndirectLong Mode_DirectPage_IndirectLong_Y Mode_Absolute Word Mode_Absolute_X Mode_Absolute_Y Mode_Absolute_Indirect Mode_Absolute_X_Indirect Mode_Absolute_IndirectLong Mode_AbsoluteLong Long Mode_AbsoluteLong_X Mode_StackRelative S Mode_StackRelative_Indirect_Y Mode_BlockMove MoveBanks Mode_Immediate_Label LabelUsage Mode_Label Mode_Label_X Mode_Label_Y Mode_Label_Indirect Mode_Label_X_Indirect Mode_Label_Indirect_Y Mode_Label_IndirectLong Mode_Label_IndirectLong_Y DB , DW DL",maxTerm:77,nodeProps:[["openedBy",21,"(",26,"["],["closedBy",22,")",27,"]"]],skippedNodes:[0,1],repeatNodeCount:5,tokenData:"Nk~R!TXY$bYZ$m]^$mpq$bst$rtu*Tuv.txy3myz3r|}3w!O!P4o!Q![5f![!]6}!]!^7S!c!d7k!d!e8b!e!f9|!f!g:{!g!h;_!k!l;k!l!m;q!n!o<^!o!p<s!p!q=S!q!r=Y!r!s=f!t!u>}!u!v?g!v!w@f!y!zBQ!z!{Ba!}#OBj#P#QBo#T#UBt#U#VCf#V#WEQ#W#XFP#X#YF{#]#^GX#^#_G_#`#aGz#a#bHa#b#cHp#c#dHv#d#eI[#f#gJs#g#hK]#h#iL[#k#lMv#l#mNV~~Nf~$gQ!d~XY$bpq$b~$rO!n~~$wR!h~tu%Quv&Z!Q![)c~%TR!Q![%^!c!i%^#T#Z%^~%aR!Q![%j!c!i%j#T#Z%j~%oR[~!Q![%x!c!i%x#T#Z%x~%{R!Q![&U!c!i&U#T#Z&U~&ZO^~~&^Q!Q!R&d!R!S&d~&gQ!Q!R&m!R!S&m~&pQ!Q!R&v!R!S&v~&yQ!Q!R'P!R!S'P~'SQ!Q!R'Y!R!S'Y~']Q!Q!R'c!R!S'c~'fQ!Q!R'l!R!S'l~'oQ!Q!R'u!R!S'u~'zQ[~!Q!R(Q!R!S(Q~(TQ!Q!R(Z!R!S(Z~(^Q!Q!R(d!R!S(d~(gQ!Q!R(m!R!S(m~(pQ!Q!R(v!R!S(v~(yQ!Q!R)P!R!S)P~)SQ!Q!R)Y!R!S)Y~)]Q!Q!R&U!R!S&U~)hP[~!Q![)k~)pP[~!Q![)s~)xP[~!Q![){~*QP^~!Q![&U~*WR!Q![*a!c!i*a#T#Z*a~*dR!Q![*m!c!i*m#T#Z*m~*rS`Q|}+O!Q![-u!c!i-u#T#Z-u~+RRtu+[uv+y!Q![-e~+_R!Q![+h!c!i+h#T#Z+h~+kR!Q![+t!c!i+t#T#Z+t~+yO|~~+|Q!Q!R,S!R!S,S~,VQ!Q!R,]!R!S,]~,`Q!Q!R,f!R!S,f~,iQ!Q!R,o!R!S,o~,rQ!Q!R,x!R!S,x~,{Q!Q!R-R!R!S-R~-UQ!Q!R-[!R!S-[~-_Q!Q!R+t!R!S+t~-jP|~!Q![-m~-rP|~!Q![+tR-xR!Q![.R!c!i.R#T#Z.RR.WRoQ!Q![.a!c!i.a#T#Z.aR.dR!Q![.m!c!i.m#T#Z.mR.tOvQTP~.wQ!Q!R.}!R!S.}~/QQ!Q!R/W!R!S/W~/ZQ!Q!R/a!R!S/a~/dQ!Q!R/j!R!S/j~/mQ!Q!R/s!R!S/s~/vQ!Q!R/|!R!S/|~0PQ!Q!R0V!R!S0V~0YQ!Q!R0`!R!S0`~0eR`Q|}+O!Q!R0n!R!S0nR0qQ!Q!R0w!R!S0wR0zQ!Q!R1Q!R!S1QR1TQ!Q!R1Z!R!S1ZR1^Q!Q!R1d!R!S1dR1gQ!Q!R1m!R!S1mR1pQ!Q!R1v!R!S1vR1yQ!Q!R2P!R!S2PR2UQoQ!Q!R2[!R!S2[R2_Q!Q!R2e!R!S2eR2hQ!Q!R2n!R!S2nR2qQ!Q!R2w!R!S2wR2zQ!Q!R3Q!R!S3QR3TQ!Q!R3Z!R!S3ZR3^Q!Q!R3d!R!S3dR3gQ!Q!R.m!R!S.m~3rOf~~3wOe~R3|U!YP!u!v4`!z!{4e!{!|4j#g#h4`#l#m4e#m#n4jQ4eOyQQ4jObQQ4oOdQR4rR!c!}4{#R#S4{#T#o4{R5QT!OQ!Q![4{![!]5a!c!}4{#R#S4{#T#o4{P5fOUP~5kQ`Q|}+O!Q![5q~5vQ`Q|}+O!Q![5|~6RQ`Q|}+O!Q![6XR6^PoQ!Q![6aR6fPoQ!Q![6iR6pPvQTP!Q![6sR6zPvQTP!Q![.m~7SO!m~~7XSP~OY7SZ;'S7S;'S;=`7e<%lO7S~7hP;=`<%l7SR7pRYQ!f!g7y!p!q8U!u!v8[P7|P!e!f8PP8UOWPP8XP!f!g8PP8_P!n!o8PP8eW!e!f8}!g!h9W!k!l9^!o!p9d!p!q9j!r!s8[!t!u9p!x!y8}P9QQ!e!f8P!u!v8PP9ZP!s!t8PP9aP!v!w8PP9gP!k!l8PP9mP!g!h8PP9sR!c!d8P!m!n8P!n!o8PP:PS!n!o:]!o!p:l!q!r:l!r!s:rP:`S!e!f8P!f!g8P!k!l8P!x!y8PP:oP!r!s8PP:uQ!z!{8P!{!|8PP;OP!g!h;RP;UR!e!f8P!z!{8P!{!|8PP;bP!q!r;eP;hP!t!u8PP;nP!p!q;RP;tQ!o!p;z!u!v<TP;}Q!n!o8P!r!s8PP<WQ!n!o8P!t!u8PP<aQ!f!g<g!u!v;eP<jR!c!d8P!z!{8P!{!|8PP<vP!x!y<yP<|Q!p!q8P!r!s8PP=VP!q!r:lP=]P!t!u=`P=cP!c!d8PP=iR!g!h=r!j!k>O!n!o>hP=uR!c!d8P!k!l8P!t!u8PP>RV!c!d8P!d!e8P!f!g8P!m!n8P!r!s8P!z!{8P!{!|8PP>kU!c!d8P!d!e8P!f!g8P!r!s8P!z!{8P!{!|8PP?QR!g!h:l!q!r<T!v!w?ZP?^R!k!l8P!n!o8P!u!v8PP?jR!d!e7y!g!h?s!v!w@SP?vS!e!f8P!f!g8P!k!l8P!r!s8PP@VT!c!d8P!r!s8P!z!{8P!{!|8P!|!}8PP@iV!c!d:r!e!fAO!f!g7y!t!uAX!u!vA_!z!{Ak!{!|AwPARQ!f!g8P!u!v8PPA[P!d!e8PPAbR!d!e8P!e!f8P!z!{8PPAnR!c!d8P!u!v8P!{!|8PPAzQ!c!d8P!z!{8PPBTQ!c!d9d!f!gBZPB^P!o!p8PPBdQ!d!e=`!e!f9j~BoOk~~BtOj~RByRYQ#W#XCS#b#cCY#g#hC`PCVP#V#W8PPC]P#W#X8PPCcP#`#a8PPCiW#V#WDR#X#YD[#]#^Db#a#bDh#b#cDn#d#eC`#f#gDt#j#kDRPDUQ#V#W8P#g#h8PPD_P#e#f8PPDeP#h#i8PPDkP#]#^8PPDqP#X#Y8PPDwR#T#U8P#_#`8P#`#a8PPETS#`#aEa#a#bEp#c#dEp#d#eEvPEdS#V#W8P#W#X8P#]#^8P#j#k8PPEsP#d#e8PPEyQ#l#m8P#m#n8P~FSS#U#VF`#X#YFe#`#aFq#k#lFv~FeO!X~PFhR#V#W8P#l#m8P#m#n8P~FvO![~~F{O!Z~PGOP#c#dGRPGUP#f#g8PPG[P#b#cFePGbQ#a#bGh#g#hGqPGkQ#`#a8P#d#e8PPGtQ#`#a8P#f#g8PPG}Q#W#XHT#g#hGRPHWR#T#U8P#l#m8P#m#n8PPHdP#j#kHgPHjQ#b#c8P#d#e8PPHsP#c#dEp~HyP#f#gH|~IPQ#T#U8P#Z#[IV~I[OS~PI_R#X#YIh#[#]It#`#aJ^PIkR#T#U8P#]#^8P#f#g8PPIwV#T#U8P#U#V8P#W#X8P#_#`8P#d#e8P#l#m8P#m#n8PPJaU#T#U8P#U#V8P#W#X8P#d#e8P#l#m8P#m#n8PPJvR#X#YEp#c#dGq#h#iKPPKSR#]#^8P#`#a8P#g#h8PPK`R#U#VCS#X#YKi#h#iKxPKlS#V#W8P#W#X8P#]#^8P#d#e8PPK{T#T#U8P#d#e8P#l#m8P#m#n8P#n#o8PPL_V#T#UEv#V#WLt#W#XCS#f#gL}#g#hMT#l#mMa#m#nMmPLwQ#W#X8P#g#h8PPMQP#U#V8PPMWR#U#V8P#V#W8P#l#m8PPMdR#T#U8P#g#h8P#m#n8PPMpQ#T#U8P#l#m8PPMyQ#T#UDh#W#XNPPNSP#a#b8PPNYQ#U#VN`#V#WDnPNcP#T#U8P~NkO!o~",tokenizers:[0,1],topRules:{Program:[0,2]},tokenPrec:0}),Lm=Nm.configure({props:[rh({Comment:Ae.lineComment,Opcode:Ae.keyword,"A ConstByte ConstWord":Ae.number,"Byte Word Long MoveBanks Origin":Ae.variableName,"DB DW DL ORG":Ae.macroName,"LabelDefinition LabelUsage":Ae.labelName,"X Y S ,":Ae.derefOperator,"( ) [ ]":Ae.paren})]}),ad=oh.define({parser:Lm,languageData:{commentTokens:{line:";"}}});function Mm(){return new ch(ad,[])}class Bo{constructor(e){n(this,"range");this.range=e}}class Zc extends Bo{constructor(s,i){super(s);n(this,"label");this.label=i}}class Xc extends Bo{constructor(s,i){super(s);n(this,"address");this.address=i}}let $o=class{constructor(e,s,i){n(this,"opcode");n(this,"size");n(this,"range");this.opcode=e&255,this.size=s,this.range=i}};class fa extends $o{constructor(s,i,a,r){super(s,i,a);n(this,"_arg");this._arg=r}}class Bm extends fa{constructor(s,i){super(s,1,i,0);n(this,"bytes",()=>[this.opcode])}}class $m extends fa{constructor(s,i,a){super(s,2,i,a&255);n(this,"bytes",()=>[this.opcode,fs(this._arg)])}}class Vm extends fa{constructor(s,i,a){super(s,3,i,a&65535);n(this,"bytes",()=>[this.opcode,fs(this._arg),oi(this._arg)])}}class Fm extends fa{constructor(s,i,a){super(s,4,i,a&16777215);n(this,"bytes",()=>[this.opcode,fs(this._arg),oi(this._arg),Vo(this._arg)])}}class Rr extends $o{constructor(s,i){super(0,i.length,s);n(this,"_values");this._values=i}}class zm extends Rr{constructor(){super(...arguments);n(this,"bytes",()=>this._values.flatMap(s=>[fs(s)]))}}class Qm extends Rr{constructor(){super(...arguments);n(this,"bytes",()=>this._values.flatMap(s=>[fs(s),oi(s)]))}}class Wm extends Rr{constructor(){super(...arguments);n(this,"bytes",()=>this._values.flatMap(s=>[fs(s),oi(s),Vo(s)]))}}class ma extends $o{constructor(s,i,a,r,o){super(s,i,a);n(this,"_label");n(this,"_pc");this._label=r,this._pc=o}}class Um extends ma{constructor(s,i,a,r){super(s,2,i,a,r);n(this,"bytes",s=>{const i=s.get(this._label);if(i===void 0)return`Label "${this._label}" is not defined.`;const a=i-(this._pc+2);return a<-128||127<a?`Label "${this._label}" is out of reach.`:[this.opcode,fs(a)]})}}class Zm extends ma{constructor(s,i,a,r){super(s,3,i,a,r);n(this,"bytes",s=>{const i=s.get(this._label);if(i===void 0)return`Label "${this._label}" is not defined.`;const a=i-(this._pc+3);return a<-32768||32767<a?`Label "${this._label}" is out of reach.`:[this.opcode,fs(a&65535),oi(a&65535)]})}}class Xm extends ma{constructor(s,i,a){super(s,3,i,a,0);n(this,"bytes",s=>{const i=s.get(this._label);return i===void 0?`Label "${this._label}" is not defined.`:[this.opcode,fs(i),oi(i)]})}}class Ym extends ma{constructor(s,i,a){super(s,4,i,a,0);n(this,"bytes",s=>{const i=s.get(this._label);return i===void 0?`Label "${this._label}" is not defined.`:[this.opcode,fs(i),oi(i),Vo(i)]})}}const Vo=t=>t>>16&255,oi=t=>t>>8&255,fs=t=>t&255;var _i=(t=>(t[t.None=0]="None",t[t.Relative=1]="Relative",t[t.RelativeLong=2]="RelativeLong",t[t.Absolute=3]="Absolute",t[t.AbsoluteLong=4]="AbsoluteLong",t))(_i||{});const jm={"ADC-Absolute":{opcode:109,label_type:0},"ADC-AbsoluteLong":{opcode:111,label_type:0},"ADC-AbsoluteLong_X":{opcode:127,label_type:0},"ADC-Absolute_X":{opcode:125,label_type:0},"ADC-Absolute_Y":{opcode:121,label_type:0},"ADC-DirectPage":{opcode:101,label_type:0},"ADC-DirectPage_Indirect":{opcode:114,label_type:0},"ADC-DirectPage_IndirectLong":{opcode:103,label_type:0},"ADC-DirectPage_IndirectLong_Y":{opcode:119,label_type:0},"ADC-DirectPage_Indirect_Y":{opcode:113,label_type:0},"ADC-DirectPage_X":{opcode:117,label_type:0},"ADC-DirectPage_X_Indirect":{opcode:97,label_type:0},"ADC-Immediate_Byte":{opcode:105,label_type:0},"ADC-Immediate_Label":{opcode:105,label_type:3},"ADC-Immediate_Word":{opcode:105,label_type:0},"ADC-Label":{opcode:109,label_type:3},"ADC-Label_X":{opcode:125,label_type:3},"ADC-Label_Y":{opcode:121,label_type:3},"ADC-StackRelative":{opcode:99,label_type:0},"ADC-StackRelative_Indirect_Y":{opcode:115,label_type:0},"AND-Absolute":{opcode:45,label_type:0},"AND-AbsoluteLong":{opcode:47,label_type:0},"AND-AbsoluteLong_X":{opcode:63,label_type:0},"AND-Absolute_X":{opcode:61,label_type:0},"AND-Absolute_Y":{opcode:57,label_type:0},"AND-DirectPage":{opcode:37,label_type:0},"AND-DirectPage_Indirect":{opcode:50,label_type:0},"AND-DirectPage_IndirectLong":{opcode:39,label_type:0},"AND-DirectPage_IndirectLong_Y":{opcode:55,label_type:0},"AND-DirectPage_Indirect_Y":{opcode:49,label_type:0},"AND-DirectPage_X":{opcode:53,label_type:0},"AND-DirectPage_X_Indirect":{opcode:33,label_type:0},"AND-Immediate_Byte":{opcode:41,label_type:0},"AND-Immediate_Label":{opcode:41,label_type:3},"AND-Immediate_Word":{opcode:41,label_type:0},"AND-Label":{opcode:45,label_type:3},"AND-Label_X":{opcode:61,label_type:3},"AND-Label_Y":{opcode:57,label_type:3},"AND-StackRelative":{opcode:35,label_type:0},"AND-StackRelative_Indirect_Y":{opcode:51,label_type:0},"ASL-Absolute":{opcode:14,label_type:0},"ASL-Absolute_X":{opcode:30,label_type:0},"ASL-Accumulator":{opcode:10,label_type:0},"ASL-DirectPage":{opcode:6,label_type:0},"ASL-DirectPage_X":{opcode:22,label_type:0},"ASL-Label":{opcode:14,label_type:3},"ASL-Label_X":{opcode:30,label_type:3},"BCC-DirectPage":{opcode:144,label_type:0},"BCC-Label":{opcode:144,label_type:1},"BCS-DirectPage":{opcode:176,label_type:0},"BCS-Label":{opcode:176,label_type:1},"BEQ-DirectPage":{opcode:240,label_type:0},"BEQ-Label":{opcode:240,label_type:1},"BIT-Absolute":{opcode:44,label_type:0},"BIT-Absolute_X":{opcode:60,label_type:0},"BIT-DirectPage":{opcode:36,label_type:0},"BIT-DirectPage_X":{opcode:52,label_type:0},"BIT-Immediate_Byte":{opcode:137,label_type:0},"BIT-Immediate_Label":{opcode:137,label_type:3},"BIT-Immediate_Word":{opcode:137,label_type:0},"BIT-Label":{opcode:44,label_type:3},"BIT-Label_X":{opcode:60,label_type:3},"BMI-DirectPage":{opcode:48,label_type:0},"BMI-Label":{opcode:48,label_type:1},"BNE-DirectPage":{opcode:208,label_type:0},"BNE-Label":{opcode:208,label_type:1},"BPL-DirectPage":{opcode:16,label_type:0},"BPL-Label":{opcode:16,label_type:1},"BRA-DirectPage":{opcode:128,label_type:0},"BRA-Label":{opcode:128,label_type:1},"BRK-Immediate_Byte":{opcode:0,label_type:0},"BRL-Absolute":{opcode:130,label_type:0},"BRL-Label":{opcode:130,label_type:2},"BVC-DirectPage":{opcode:80,label_type:0},"BVC-Label":{opcode:80,label_type:1},"BVS-DirectPage":{opcode:112,label_type:0},"BVS-Label":{opcode:112,label_type:1},"CLC-Implied":{opcode:24,label_type:0},"CLD-Implied":{opcode:216,label_type:0},"CLI-Implied":{opcode:88,label_type:0},"CLV-Implied":{opcode:184,label_type:0},"CMP-Absolute":{opcode:205,label_type:0},"CMP-AbsoluteLong":{opcode:207,label_type:0},"CMP-AbsoluteLong_X":{opcode:223,label_type:0},"CMP-Absolute_X":{opcode:221,label_type:0},"CMP-Absolute_Y":{opcode:217,label_type:0},"CMP-DirectPage":{opcode:197,label_type:0},"CMP-DirectPage_Indirect":{opcode:210,label_type:0},"CMP-DirectPage_IndirectLong":{opcode:199,label_type:0},"CMP-DirectPage_IndirectLong_Y":{opcode:215,label_type:0},"CMP-DirectPage_Indirect_Y":{opcode:209,label_type:0},"CMP-DirectPage_X":{opcode:213,label_type:0},"CMP-DirectPage_X_Indirect":{opcode:193,label_type:0},"CMP-Immediate_Byte":{opcode:201,label_type:0},"CMP-Immediate_Label":{opcode:201,label_type:3},"CMP-Immediate_Word":{opcode:201,label_type:0},"CMP-Label":{opcode:205,label_type:3},"CMP-Label_X":{opcode:221,label_type:3},"CMP-Label_Y":{opcode:217,label_type:3},"CMP-StackRelative":{opcode:195,label_type:0},"CMP-StackRelative_Indirect_Y":{opcode:211,label_type:0},"COP-Immediate_Byte":{opcode:2,label_type:0},"CPX-Absolute":{opcode:236,label_type:0},"CPX-DirectPage":{opcode:228,label_type:0},"CPX-Immediate_Byte":{opcode:224,label_type:0},"CPX-Immediate_Label":{opcode:224,label_type:3},"CPX-Immediate_Word":{opcode:224,label_type:0},"CPX-Label":{opcode:236,label_type:3},"CPY-Absolute":{opcode:204,label_type:0},"CPY-DirectPage":{opcode:196,label_type:0},"CPY-Immediate_Byte":{opcode:192,label_type:0},"CPY-Immediate_Label":{opcode:192,label_type:3},"CPY-Immediate_Word":{opcode:192,label_type:0},"CPY-Label":{opcode:204,label_type:3},"DEC-Absolute":{opcode:206,label_type:0},"DEC-Absolute_X":{opcode:222,label_type:0},"DEC-Accumulator":{opcode:58,label_type:0},"DEC-DirectPage":{opcode:198,label_type:0},"DEC-DirectPage_X":{opcode:214,label_type:0},"DEC-Label":{opcode:206,label_type:3},"DEC-Label_X":{opcode:222,label_type:3},"DEX-Implied":{opcode:202,label_type:0},"DEY-Implied":{opcode:136,label_type:0},"EOR-Absolute":{opcode:77,label_type:0},"EOR-AbsoluteLong":{opcode:79,label_type:0},"EOR-AbsoluteLong_X":{opcode:95,label_type:0},"EOR-Absolute_X":{opcode:93,label_type:0},"EOR-Absolute_Y":{opcode:89,label_type:0},"EOR-DirectPage":{opcode:69,label_type:0},"EOR-DirectPage_Indirect":{opcode:82,label_type:0},"EOR-DirectPage_IndirectLong":{opcode:71,label_type:0},"EOR-DirectPage_IndirectLong_Y":{opcode:87,label_type:0},"EOR-DirectPage_Indirect_Y":{opcode:81,label_type:0},"EOR-DirectPage_X":{opcode:85,label_type:0},"EOR-DirectPage_X_Indirect":{opcode:65,label_type:0},"EOR-Immediate_Byte":{opcode:73,label_type:0},"EOR-Immediate_Label":{opcode:73,label_type:3},"EOR-Immediate_Word":{opcode:73,label_type:0},"EOR-Label":{opcode:77,label_type:3},"EOR-Label_X":{opcode:93,label_type:3},"EOR-Label_Y":{opcode:89,label_type:3},"EOR-StackRelative":{opcode:67,label_type:0},"EOR-StackRelative_Indirect_Y":{opcode:83,label_type:0},"INC-Absolute":{opcode:238,label_type:0},"INC-Absolute_X":{opcode:254,label_type:0},"INC-Accumulator":{opcode:26,label_type:0},"INC-DirectPage":{opcode:230,label_type:0},"INC-DirectPage_X":{opcode:246,label_type:0},"INC-Label":{opcode:238,label_type:3},"INC-Label_X":{opcode:254,label_type:3},"INX-Implied":{opcode:232,label_type:0},"INY-Implied":{opcode:200,label_type:0},"JML-AbsoluteLong":{opcode:92,label_type:0},"JML-Absolute_IndirectLong":{opcode:220,label_type:0},"JML-Label":{opcode:92,label_type:4},"JML-Label_IndirectLong":{opcode:220,label_type:3},"JMP-Absolute":{opcode:76,label_type:0},"JMP-Absolute_Indirect":{opcode:108,label_type:0},"JMP-Absolute_X_Indirect":{opcode:124,label_type:0},"JMP-Label":{opcode:76,label_type:3},"JMP-Label_Indirect":{opcode:108,label_type:3},"JMP-Label_X_Indirect":{opcode:124,label_type:3},"JSL-AbsoluteLong":{opcode:34,label_type:0},"JSL-Label":{opcode:34,label_type:4},"JSR-Absolute":{opcode:32,label_type:0},"JSR-Absolute_X_Indirect":{opcode:252,label_type:0},"JSR-Label":{opcode:32,label_type:3},"JSR-Label_X_Indirect":{opcode:252,label_type:3},"LDA-Absolute":{opcode:173,label_type:0},"LDA-AbsoluteLong":{opcode:175,label_type:0},"LDA-AbsoluteLong_X":{opcode:191,label_type:0},"LDA-Absolute_X":{opcode:189,label_type:0},"LDA-Absolute_Y":{opcode:185,label_type:0},"LDA-DirectPage":{opcode:165,label_type:0},"LDA-DirectPage_Indirect":{opcode:178,label_type:0},"LDA-DirectPage_IndirectLong":{opcode:167,label_type:0},"LDA-DirectPage_IndirectLong_Y":{opcode:183,label_type:0},"LDA-DirectPage_Indirect_Y":{opcode:177,label_type:0},"LDA-DirectPage_X":{opcode:181,label_type:0},"LDA-DirectPage_X_Indirect":{opcode:161,label_type:0},"LDA-Immediate_Byte":{opcode:169,label_type:0},"LDA-Immediate_Label":{opcode:169,label_type:3},"LDA-Immediate_Word":{opcode:169,label_type:0},"LDA-Label":{opcode:173,label_type:3},"LDA-Label_X":{opcode:189,label_type:3},"LDA-Label_Y":{opcode:185,label_type:3},"LDA-StackRelative":{opcode:163,label_type:0},"LDA-StackRelative_Indirect_Y":{opcode:179,label_type:0},"LDX-Absolute":{opcode:174,label_type:0},"LDX-Absolute_Y":{opcode:190,label_type:0},"LDX-DirectPage":{opcode:166,label_type:0},"LDX-DirectPage_Y":{opcode:182,label_type:0},"LDX-Immediate_Byte":{opcode:162,label_type:0},"LDX-Immediate_Label":{opcode:162,label_type:3},"LDX-Immediate_Word":{opcode:162,label_type:0},"LDX-Label":{opcode:174,label_type:3},"LDX-Label_Y":{opcode:190,label_type:3},"LDY-Absolute":{opcode:172,label_type:0},"LDY-Absolute_X":{opcode:188,label_type:0},"LDY-DirectPage":{opcode:164,label_type:0},"LDY-DirectPage_X":{opcode:180,label_type:0},"LDY-Immediate_Byte":{opcode:160,label_type:0},"LDY-Immediate_Label":{opcode:160,label_type:3},"LDY-Immediate_Word":{opcode:160,label_type:0},"LDY-Label":{opcode:172,label_type:3},"LDY-Label_X":{opcode:188,label_type:3},"LSR-Absolute":{opcode:78,label_type:0},"LSR-Absolute_X":{opcode:94,label_type:0},"LSR-Accumulator":{opcode:74,label_type:0},"LSR-DirectPage":{opcode:70,label_type:0},"LSR-DirectPage_X":{opcode:86,label_type:0},"LSR-Label":{opcode:78,label_type:3},"LSR-Label_X":{opcode:94,label_type:3},"MVN-BlockMove":{opcode:84,label_type:0},"MVP-BlockMove":{opcode:68,label_type:0},"NOP-Implied":{opcode:234,label_type:0},"ORA-Absolute":{opcode:13,label_type:0},"ORA-AbsoluteLong":{opcode:15,label_type:0},"ORA-AbsoluteLong_X":{opcode:31,label_type:0},"ORA-Absolute_X":{opcode:29,label_type:0},"ORA-Absolute_Y":{opcode:25,label_type:0},"ORA-DirectPage":{opcode:5,label_type:0},"ORA-DirectPage_Indirect":{opcode:18,label_type:0},"ORA-DirectPage_IndirectLong":{opcode:7,label_type:0},"ORA-DirectPage_IndirectLong_Y":{opcode:23,label_type:0},"ORA-DirectPage_Indirect_Y":{opcode:17,label_type:0},"ORA-DirectPage_X":{opcode:21,label_type:0},"ORA-DirectPage_X_Indirect":{opcode:1,label_type:0},"ORA-Immediate_Byte":{opcode:9,label_type:0},"ORA-Immediate_Label":{opcode:9,label_type:3},"ORA-Immediate_Word":{opcode:9,label_type:0},"ORA-Label":{opcode:13,label_type:3},"ORA-Label_X":{opcode:29,label_type:3},"ORA-Label_Y":{opcode:25,label_type:3},"ORA-StackRelative":{opcode:3,label_type:0},"ORA-StackRelative_Indirect_Y":{opcode:19,label_type:0},"PEA-Absolute":{opcode:244,label_type:0},"PEA-Label":{opcode:244,label_type:3},"PEI-DirectPage_Indirect":{opcode:212,label_type:0},"PER-Absolute":{opcode:98,label_type:0},"PER-Label":{opcode:98,label_type:2},"PHA-Implied":{opcode:72,label_type:0},"PHB-Implied":{opcode:139,label_type:0},"PHD-Implied":{opcode:11,label_type:0},"PHK-Implied":{opcode:75,label_type:0},"PHP-Implied":{opcode:8,label_type:0},"PHX-Implied":{opcode:218,label_type:0},"PHY-Implied":{opcode:90,label_type:0},"PLA-Implied":{opcode:104,label_type:0},"PLB-Implied":{opcode:171,label_type:0},"PLD-Implied":{opcode:43,label_type:0},"PLP-Implied":{opcode:40,label_type:0},"PLX-Implied":{opcode:250,label_type:0},"PLY-Implied":{opcode:122,label_type:0},"REP-Immediate_Byte":{opcode:194,label_type:0},"ROL-Absolute":{opcode:46,label_type:0},"ROL-Absolute_X":{opcode:62,label_type:0},"ROL-Accumulator":{opcode:42,label_type:0},"ROL-DirectPage":{opcode:38,label_type:0},"ROL-DirectPage_X":{opcode:54,label_type:0},"ROL-Label":{opcode:46,label_type:3},"ROL-Label_X":{opcode:62,label_type:3},"ROR-Absolute":{opcode:110,label_type:0},"ROR-Absolute_X":{opcode:126,label_type:0},"ROR-Accumulator":{opcode:106,label_type:0},"ROR-DirectPage":{opcode:102,label_type:0},"ROR-DirectPage_X":{opcode:118,label_type:0},"ROR-Label":{opcode:110,label_type:3},"ROR-Label_X":{opcode:126,label_type:3},"RTI-Implied":{opcode:64,label_type:0},"RTL-Implied":{opcode:107,label_type:0},"RTS-Implied":{opcode:96,label_type:0},"SBC-Absolute":{opcode:237,label_type:0},"SBC-AbsoluteLong":{opcode:239,label_type:0},"SBC-AbsoluteLong_X":{opcode:255,label_type:0},"SBC-Absolute_X":{opcode:253,label_type:0},"SBC-Absolute_Y":{opcode:249,label_type:0},"SBC-DirectPage":{opcode:229,label_type:0},"SBC-DirectPage_Indirect":{opcode:242,label_type:0},"SBC-DirectPage_IndirectLong":{opcode:231,label_type:0},"SBC-DirectPage_IndirectLong_Y":{opcode:247,label_type:0},"SBC-DirectPage_Indirect_Y":{opcode:241,label_type:0},"SBC-DirectPage_X":{opcode:245,label_type:0},"SBC-DirectPage_X_Indirect":{opcode:225,label_type:0},"SBC-Immediate_Byte":{opcode:233,label_type:0},"SBC-Immediate_Label":{opcode:233,label_type:3},"SBC-Immediate_Word":{opcode:233,label_type:0},"SBC-Label":{opcode:237,label_type:3},"SBC-Label_X":{opcode:253,label_type:3},"SBC-Label_Y":{opcode:249,label_type:3},"SBC-StackRelative":{opcode:227,label_type:0},"SBC-StackRelative_Indirect_Y":{opcode:243,label_type:0},"SEC-Implied":{opcode:56,label_type:0},"SED-Implied":{opcode:248,label_type:0},"SEI-Implied":{opcode:120,label_type:0},"SEP-Immediate_Byte":{opcode:226,label_type:0},"STA-Absolute":{opcode:141,label_type:0},"STA-AbsoluteLong":{opcode:143,label_type:0},"STA-AbsoluteLong_X":{opcode:159,label_type:0},"STA-Absolute_X":{opcode:157,label_type:0},"STA-Absolute_Y":{opcode:153,label_type:0},"STA-DirectPage":{opcode:133,label_type:0},"STA-DirectPage_Indirect":{opcode:146,label_type:0},"STA-DirectPage_IndirectLong":{opcode:135,label_type:0},"STA-DirectPage_IndirectLong_Y":{opcode:151,label_type:0},"STA-DirectPage_Indirect_Y":{opcode:145,label_type:0},"STA-DirectPage_X":{opcode:149,label_type:0},"STA-DirectPage_X_Indirect":{opcode:129,label_type:0},"STA-Label":{opcode:141,label_type:3},"STA-Label_X":{opcode:157,label_type:3},"STA-Label_Y":{opcode:153,label_type:3},"STA-StackRelative":{opcode:131,label_type:0},"STA-StackRelative_Indirect_Y":{opcode:147,label_type:0},"STP-Implied":{opcode:219,label_type:0},"STX-Absolute":{opcode:142,label_type:0},"STX-DirectPage":{opcode:134,label_type:0},"STX-DirectPage_Y":{opcode:150,label_type:0},"STX-Label":{opcode:142,label_type:3},"STY-Absolute":{opcode:140,label_type:0},"STY-DirectPage":{opcode:132,label_type:0},"STY-DirectPage_X":{opcode:148,label_type:0},"STY-Label":{opcode:140,label_type:3},"STZ-Absolute":{opcode:156,label_type:0},"STZ-Absolute_X":{opcode:158,label_type:0},"STZ-DirectPage":{opcode:100,label_type:0},"STZ-DirectPage_X":{opcode:116,label_type:0},"STZ-Label":{opcode:156,label_type:3},"STZ-Label_X":{opcode:158,label_type:3},"TAX-Implied":{opcode:170,label_type:0},"TAY-Implied":{opcode:168,label_type:0},"TCD-Implied":{opcode:91,label_type:0},"TCS-Implied":{opcode:27,label_type:0},"TDC-Implied":{opcode:123,label_type:0},"TRB-Absolute":{opcode:28,label_type:0},"TRB-DirectPage":{opcode:20,label_type:0},"TRB-Label":{opcode:28,label_type:3},"TSB-Absolute":{opcode:12,label_type:0},"TSB-DirectPage":{opcode:4,label_type:0},"TSB-Label":{opcode:12,label_type:3},"TSC-Implied":{opcode:59,label_type:0},"TSX-Implied":{opcode:186,label_type:0},"TXA-Implied":{opcode:138,label_type:0},"TXS-Implied":{opcode:154,label_type:0},"TXY-Implied":{opcode:155,label_type:0},"TYA-Implied":{opcode:152,label_type:0},"TYX-Implied":{opcode:187,label_type:0},"WAI-Implied":{opcode:203,label_type:0},"WDM-Immediate_Byte":{opcode:66,label_type:0},"XBA-Implied":{opcode:235,label_type:0},"XCE-Implied":{opcode:251,label_type:0}},Hm={Implied:{size:0,label:""},Accumulator:{size:0,label:"A"},Immediate_Byte:{size:1,label:"#const"},Immediate_Word:{size:2,label:"#const"},DirectPage:{size:1,label:"dp"},DirectPage_X:{size:1,label:"dp,x"},DirectPage_Y:{size:1,label:"dp,y"},DirectPage_Indirect:{size:1,label:"(dp)"},DirectPage_X_Indirect:{size:1,label:"(dp,x)"},DirectPage_Indirect_Y:{size:1,label:"(dp),y"},DirectPage_IndirectLong:{size:1,label:"[dp]"},DirectPage_IndirectLong_Y:{size:1,label:"[dp],y"},Absolute:{size:2,label:"addr"},Absolute_X:{size:2,label:"addr,x"},Absolute_Y:{size:2,label:"addr,y"},Absolute_Indirect:{size:2,label:"(addr)"},Absolute_X_Indirect:{size:2,label:"(addr,x)"},Absolute_IndirectLong:{size:2,label:"[addr]"},AbsoluteLong:{size:3,label:"long"},AbsoluteLong_X:{size:3,label:"long,x"},StackRelative:{size:1,label:"sr,s"},StackRelative_Indirect_Y:{size:1,label:"(sr,s),y"},BlockMove:{size:2,label:"src:dest"},Label:{size:0,label:"label"},Label_X:{size:0,label:"label,x"},Label_Y:{size:0,label:"label,y"},Label_Indirect:{size:0,label:"(label)"},Label_X_Indirect:{size:0,label:"(label,x)"},Label_Indirect_Y:{size:0,label:"(label),y"},Label_IndirectLong:{size:0,label:"[label]"},Label_IndirectLong_Y:{size:0,label:"[label],y"}};class Yc extends Bo{constructor(s){super(s);n(this,"mnemonic");n(this,"mode");n(this,"arg");n(this,"label");n(this,"bytes");this.bytes=[]}build(s){if(!this.mnemonic)return"Invalid instruction: you must specify an opcode.";const i=this.range;if(this.mnemonic==="DB")return new zm(i,this.bytes);if(this.mnemonic==="DW")return new Qm(i,this.bytes);if(this.mnemonic==="DL")return new Wm(i,this.bytes);this.mode||(this.mode="Implied");const a=Hm[this.mode];if(!a)return`Instruction mode "${this.mode}" doesn't exist.`;const r=jm[`${this.mnemonic}-${this.mode}`];if(!r)return`Instruction "${this.mnemonic} ${a.label}" doesn't exist.`;const o=r.opcode;if(r.label_type===_i.None){if(a.size>0&&this.arg===void 0)return"Instruction doesn't have the required parameter.";switch(a.size){case 0:return new Bm(o,i);case 1:return new $m(o,i,this.arg);case 2:return new Vm(o,i,this.arg);case 3:return new Fm(o,i,this.arg)}return`Instruction has invalid size ${a.size+1}.`}const l=this.label;if(l===void 0)return"Instruction doesn't have the required label.";switch(r.label_type){case _i.Relative:return new Um(o,i,l,s);case _i.RelativeLong:return new Zm(o,i,l,s);case _i.Absolute:return new Xm(o,i,l);case _i.AbsoluteLong:return new Ym(o,i,l)}}}class rd{constructor(e=""){n(this,"code","");n(this,"program",{chunks:[]});n(this,"errors",[]);this.code=e}assemble(){this.errors=[];const e=this._parse_code(),{instructionChunks:s,labels:i}=this._generate_chunks_and_labels(e);this.program=this._generate_program(s,i)}_parse_code(){const e=lh.of(this.code.split(`
`)),i=ad.parser.parse(this.code).cursor();let a;const r=[],o=()=>{a&&r.push(a),a=void 0};for(i.iterate(l=>{const u=e.lineAt(l.from).number,d=this.code.slice(l.from,l.to),p=h=>{const{from:_,to:b}=l.from===l.to?e.lineAt(l.from):l;this.errors.push(new pi(h,{from:_,to:b,line:u}))};if(i.type.isError){p("Invalid syntax.");return}if(l.name==="Instruction"){o();const h={from:i.from,to:i.to,line:u};a=new Yc(h);return}if(["Opcode","DB","DW","DL"].includes(l.name)){const h=d.toUpperCase();a?a.mnemonic?p(`Mode (${h}): mode already present`):a.mnemonic=h:p(`Mode (${h}): missing instruction builder.`);return}if(l.name.startsWith("Mode_")){const h=l.name.substring(5);a?a.mode?p(`Mode (${h}): mode already present`):a.mode=h:p(`Mode (${h}): missing instruction builder.`);return}const f=(h,_=!1)=>{const[b,w]=_?[`const ${h}`,d.substring(1)]:[h,d];if(!a)return p(`Arg (${b}): missing instruction builder.`);if(!a.mnemonic)return p(`Arg (${b}): missing instruction mnemonic.`);if(a.mnemonic==="DB"){if(h!=="byte")return p(`"db" requires bytes, but you provided a ${b}.`);a.bytes.push(yi(w));return}if(a.mnemonic==="DW"){if(h!=="word")return p(`"dw" requires words, but you provided a ${b}.`);a.bytes.push(yi(w));return}if(a.mnemonic==="DL"){if(h!=="long")return p(`"dl" requires longs, but you provided a ${b}.`);a.bytes.push(yi(w));return}if(a.arg)return p(`Arg (${b}): arg is already defined.`);a.arg=yi(w)};if(l.name=="Byte"){f("byte");return}if(l.name=="Word"){f("word");return}if(l.name=="Long"){f("long");return}if(l.name=="ConstByte"){f("byte",!0);return}if(l.name=="ConstWord"){f("word",!0);return}if(l.name=="LabelUsage"){a?a.arg?p("Arg (label): arg is already defined."):a.label=d:p("Arg (label): missing instruction builder.");return}if(l.name=="MoveBanks"){a?a.arg?p("Arg (block move): arg is already defined."):a.arg=qm(d):p("Arg (block move): missing instruction builder.");return}if(l.name==="LabelDefinition"){o();const h={from:i.from,to:i.to,line:u},_=d.substring(0,d.length-1);r.push(new Zc(h,_));return}if(l.name==="OrgDefinition"){o();const h={from:i.from,to:i.to,line:u},_=yi(d.replace(/org/,"").trim());r.push(new Xc(h,_));return}});i.next(););return o(),r}_generate_chunks_and_labels(e){let s=8421376,i={origin:s,instructions:[]};const a=[i];let r=new Map;for(const o of e){if(o instanceof Yc){const l=o.build(s);if(typeof l=="string"){this.errors.push(new pi(l,o.range));continue}i.instructions.push(l),s+=l.size;continue}if(o instanceof Zc){if(r.has(o.label)){const l=`Label: label "${o.label}" is already defined.`;this.errors.push(new pi(l,o.range));continue}r.set(o.label,s);continue}if(o instanceof Xc){if(isNaN(o.address)){const l="Origin: invalid origin address.";this.errors.push(new pi(l,o.range));continue}i={origin:o.address,instructions:[]},s=o.address,a.push(i);continue}}return{instructionChunks:a,labels:r}}_generate_program(e,s){return{chunks:e.map(i=>({origin:i.origin,bytes:i.instructions.flatMap(a=>{if(a instanceof fa||a instanceof Rr)return a.bytes();if(a instanceof ma){const l=a.bytes(s);if(typeof l=="string"){const u=new pi(l,a.range);this.errors.push(u);return}return l}const r="Invalid instruction type.",o=new pi(r,a.range);this.errors.push(o)}).filter(a=>a!==void 0)}))}}}function yi(t){return t.startsWith("$")?Number.parseInt(t.substring(1),16):t.startsWith("%")?Number.parseInt(t.substring(1),2):Number.parseInt(t,10)}function qm(t){const[e=0,s=0]=t.split(",").map(yi);return e|s<<8}const fi=new Map;function Gm(t){const[e,s]=At(0);return Yt(()=>{const a=()=>s(r=>r+1);return fi.has(t)||fi.set(t,new Set),fi.get(t).add(a),()=>{const r=fi.get(t);r&&(r.delete(a),r.size===0&&fi.delete(t))}},[t]),[C(()=>{var a;(a=fi.get(t))==null||a.forEach(r=>r())},[t]),e]}const k=1,rt=2,_e=4,E=8,ms=16,st=32,od=64,Fo=128,Er=256,cd=512,Ie=1,ce=2,cs=4,ls=8,en=16,zo=16,tn=32,tt=64,D=128;let zt=class Da{constructor(e,s=Sn){n(this,"_value");this._value=e&s}get byte(){return this._value&Js}get word(){return this._value&Ui}get long(){return this._value&Sn}get page(){return(this._value&jc)>>8}get bank(){return(this._value&Hc)>>16}set byte(e){this._value=this._value&-256|e&Js}set word(e){this._value=this._value&-65536|e&Ui}set long(e){this._value=this._value&-16777216|e&Sn}set page(e){this._value=this._value&-65281|e<<8&jc}set bank(e){this._value=this._value&-16711681|e<<16&Hc}format_byte(e=""){return Fs(this.byte,2,e)}format_word(e=""){return Fs(this.word,4,e)}format_long(e=""){return Fs(this.long,6,e)}format_page(e=""){return Fs(this.page,2,e)}format_bank(e=""){return Fs(this.bank,2,e)}format_address(){return`[${Fs(this.bank,2,"")}:${Fs(this.word,4,"")}]`}as_byte(){return new Da(this._value,Js)}as_word(){return new Da(this._value,Ui)}as_long(){return new Da(this._value,Sn)}};const ae=t=>new zt(t,Js),O=t=>new zt(t,Ui),B=t=>new zt(t,Sn),Js=255,Ui=65535,Sn=16777215,jc=65280,Hc=16711680;function Km(t,e,s){return`${s.repeat(e-t.length)}${t}`}function Fs(t,e,s){const i=t.toString(16).toUpperCase();return`${s}${Km(i,e,"0")}`}class ${constructor(e,s,i,a){n(this,"id");n(this,"_arg");n(this,"_processor");n(this,"_snapshot_before");n(this,"_snapshot_after");n(this,"_memory");n(this,"_effective_addr",B(0));this.id=e,this._arg=s,this._processor=i,this._snapshot_before=i.snapshot(),this._snapshot_after=void 0,this._memory=a}execute(){this._processor.pc=O(this._processor.pc.word+this.length),this._effective_addr=B(this.m.mapping.map_safe(this.addr)),this.execute_effect(),this._snapshot_after=this._processor.snapshot()}get mode(){return this.constructor.mode}get has_addr(){return this.mode.has_address}get addr(){return this.mode.addr(this._mode_context)}get effective_addr(){return this._effective_addr}get text(){const e=this.constructor.mnemonic,s=this.constructor.mode;return`${e} ${s.text}`}get text_with_value(){const e=this.constructor.mnemonic,s=this.constructor.mode;return`${e} ${s.format(this._mode_context)}`}get length(){const e=this.mode;let s=e.base_length;return e.length_modifier&k&&(s-=this._snapshot_before.flag_m),e.length_modifier&_e&&(s-=this._snapshot_before.flag_x),s}get cycles(){const e=this.constructor.cycles_modifier;let s=this.constructor.base_cycles;if(e&k&&(s-=this._snapshot_before.flag_m),e&_e&&(s-=this._snapshot_before.flag_x),e&E&&(s-=this._snapshot_before.dp===0?1:0),e&ms){const i=this._snapshot_before.x;s-=this._snapshot_before.flag_x||this._cross_boundary(i)}if(e&st){const i=this._snapshot_before.y;s-=this._snapshot_before.flag_x||this._cross_boundary(i)}return s}get opcode(){return this.constructor.opcode}get bytes(){const e=[this.opcode],s=this.length;return s>1&&e.push(this._arg.byte),s>2&&e.push(this._arg.page),s>3&&e.push(this._arg.bank),e}get pb(){return this._snapshot_before.pb}get pc(){return this._snapshot_before.pc}get snapshot(){return this._snapshot_after}load_m(e){return this._processor.flag_m?this._memory.load_byte(e):this._memory.load_word(e)}load_x(e){return this._processor.flag_x?this._memory.load_byte(e):this._memory.load_word(e)}save_m(e,s){this._processor.flag_m?this._memory.save_byte(e,s):this._memory.save_word(e,s)}save_x(e,s){this._processor.flag_x?this._memory.save_byte(e,s):this._memory.save_word(e,s)}get p(){return this._processor}get m(){return this._memory}_cross_boundary(e){const s=this.addr;return B(s.long+e).page===s.page?0:1}get _mode_context(){return{arg:this._arg,arg_size:this.length-1,p:this._processor,m:this._memory,pc:this._snapshot_before.pc,length:this.length}}}n($,"cycles_modifier",0),n($,"affected_flags",0);const Q=class Q{constructor(e){n(this,"addr");n(this,"format");n(this,"base_length");n(this,"length_modifier");n(this,"has_address");n(this,"text");this.addr=e.addr,this.format=e.format,this.base_length=e.base_length,this.length_modifier=e.length_modifier??0,this.has_address=e.has_address??!0,this.text=e.text}};n(Q,"Implied",new Q({addr:()=>B(-1),format:()=>"",has_address:!1,base_length:1,text:""})),n(Q,"Accumulator",new Q({addr:()=>B(-1),format:()=>"A",has_address:!1,base_length:1,text:"A"})),n(Q,"Immediate",new Q({addr:()=>B(-1),format:({arg:e})=>`#${e.format_byte("$")}`,has_address:!1,base_length:2,text:"#const"})),n(Q,"Immediate_VariableA",new Q({addr:()=>B(-1),format:({arg:e,arg_size:s})=>`#${s===1?e.format_byte("$"):e.format_word("$")}`,has_address:!1,base_length:3,length_modifier:k,text:"#const"})),n(Q,"Immediate_VariableX",new Q({addr:()=>B(-1),format:({arg:e,arg_size:s})=>`#${s===1?e.format_byte("$"):e.format_word("$")}`,has_address:!1,base_length:3,length_modifier:_e,text:"#const"})),n(Q,"DirectPage",new Q({addr:({arg:e,p:s})=>O(e.byte+s.dp.word),format:({arg:e})=>e.format_byte("$"),base_length:2,text:"dp"})),n(Q,"DirectPage_X",new Q({addr:({arg:e,p:s})=>s.flag_e&&s.dp.byte===0?O(s.dp.word+ae(e.byte+s.x.word).byte):O(s.dp.word+e.byte+s.x.word),format:({arg:e})=>`${e.format_byte("$")},x`,base_length:2,text:"dp,x"})),n(Q,"DirectPage_Y",new Q({addr:({arg:e,p:s})=>s.flag_e&&s.dp.byte===0?O(s.dp.word+ae(e.byte+s.y.word).byte):O(s.dp.word+e.byte+s.y.word),format:({arg:e})=>`${e.format_byte("$")},y`,base_length:2,text:"dp,y"})),n(Q,"DirectPage_Indirect",new Q({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=O(e.byte+s.dp.word);return B(a+i.load_word(r).word)},format:({arg:e})=>`(${e.format_byte("$")})`,base_length:2,text:"(dp)"})),n(Q,"DirectPage_X_Indirect",new Q({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=s.flag_e&&s.dp.byte===0?O(s.dp.word+ae(e.byte+s.x.word).byte):O(s.dp.word+e.byte+s.x.word);return B(a+i.load_word(r).word)},format:({arg:e})=>`(${e.format_byte("$")},x)`,base_length:2,text:"(dp,x)"})),n(Q,"DirectPage_Indirect_Y",new Q({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=O(e.byte+s.dp.word);return B(a+i.load_word(r).word+s.y.word)},format:({arg:e})=>`(${e.format_byte("$")}),y`,base_length:2,text:"(dp),y"})),n(Q,"DirectPage_IndirectLong",new Q({addr:({arg:e,p:s,m:i})=>{const a=O(e.byte+s.dp.word);return i.load_long(a)},format:({arg:e})=>`[${e.format_byte("$")}]`,base_length:2,text:"[dp]"})),n(Q,"DirectPage_IndirectLong_Y",new Q({addr:({arg:e,p:s,m:i})=>{const a=O(e.byte+s.dp.word);return B(i.load_long(a).long+s.y.word)},format:({arg:e})=>`[${e.format_byte("$")}],y`,base_length:2,text:"[dp],y"})),n(Q,"Absolute",new Q({addr:({arg:e,p:s})=>{const i=s.db.byte<<16;return B(i+e.word)},format:({arg:e})=>`${e.format_word("$")}`,base_length:3,text:"addr"})),n(Q,"Absolute_X",new Q({addr:({arg:e,p:s})=>{const i=s.db.byte<<16;return B(i+O(e.word+s.x.word).word)},format:({arg:e})=>`${e.format_word("$")},x`,base_length:3,text:"addr,x"})),n(Q,"Absolute_Y",new Q({addr:({arg:e,p:s})=>{const i=s.db.byte<<16;return B(i+O(e.word+s.y.word).word)},format:({arg:e})=>`${e.format_word("$")},y`,base_length:3,text:"addr,y"})),n(Q,"Absolute_Indirect",new Q({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=B(a+e.word);return B(a+i.load_word(r).word)},format:({arg:e})=>`(${e.format_word("$")})`,base_length:3,text:"(addr)"})),n(Q,"Absolute_X_Indirect",new Q({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=B(a+O(e.word+s.x.word).word);return B(a+i.load_word(r).word)},format:({arg:e})=>`(${e.format_word("$")},x)`,base_length:3,text:"(addr,x)"})),n(Q,"Absolute_IndirectLong",new Q({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=B(a+e.word);return i.load_long(r)},format:({arg:e})=>`[${e.format_word("$")}]`,base_length:3,text:"[addr]"})),n(Q,"AbsoluteLong",new Q({addr:({arg:e})=>e,format:({arg:e})=>`${e.format_long("$")}`,base_length:4,text:"long"})),n(Q,"AbsoluteLong_X",new Q({addr:({arg:e,p:s})=>B(e.long+s.x.word),format:({arg:e})=>`${e.format_long("$")},x`,base_length:4,text:"long,x"})),n(Q,"StackRelative",new Q({addr:({arg:e,p:s})=>O(e.byte+s.sp.word),format:({arg:e})=>`${e.format_byte("$")},s`,base_length:2,text:"sr,s"})),n(Q,"StackRelative_Indirect_Y",new Q({addr:({arg:e,p:s,m:i})=>{const a=s.db.byte<<16,r=O(e.byte+s.sp.word);return B(a+O(i.load_word(r).word+s.y.word).word)},format:({arg:e})=>`(${e.format_byte("$")},s),y`,base_length:2,text:"(sr,s),y"})),n(Q,"Offset",new Q({addr:({arg:e,p:s,pc:i,length:a})=>{const r=s.db.byte<<16,o=e.byte,l=o&D?o-256:o;return B(r+O(i+a+l).word)},format:({arg:e})=>e.format_byte("$"),base_length:2,text:"offsetNear"})),n(Q,"OffsetLong",new Q({addr:({arg:e,p:s,pc:i,length:a})=>{const r=s.db.byte<<16,o=e.word,l=e.page&D?o-65536:o;return B(r+O(i+a+l).word)},format:({arg:e})=>e.format_word("$"),base_length:3,text:"offset"})),n(Q,"BlockMove",new Q({addr:({arg:e})=>e,format:({arg:e})=>`${e.format_byte("$")},${e.format_page("$")}`,has_address:!1,base_length:3,text:"srcBank,destBank"}));let y=Q;class Cn extends ${execute_effect(){}get length(){return 0}get bytes(){return[]}}n(Cn,"mnemonic","<initial>"),n(Cn,"opcode",-1),n(Cn,"mode",y.Implied),n(Cn,"base_cycles",0);class Jm{constructor(e){n(this,"_memory");n(this,"_mapping");this._memory=new Map,this._mapping=e}as_map(){return new Map(this._memory)}get mapping(){return this._mapping}reset(e){this._memory=new Map,this._mapping=e}_load(e){return(this._memory.get(e)??0)&Js}_save(e,s){this._memory.set(e,s&Js)}load_byte(e){return ae(this._load(this._mapping.map(e)))}load_word(e){const s=this._load(this._mapping.map(e)),i=this._load(this._mapping.map(B(e.long+1)));return O((i<<8)+s)}load_long(e){const s=this._load(this._mapping.map(e)),i=this._load(this._mapping.map(B(e.long+1))),a=this._load(this._mapping.map(B(e.long+2)));return B((a<<16)+(i<<8)+s)}save_byte(e,s,i=!1){this._save(this._map(e,!i),s.byte)}save_word(e,s,i=!1){this._save(this._map(e,!i),s.byte),this._save(this._map(B(e.long+1),!i),s.page)}save_long(e,s,i=!1){this._save(this._map(e,!i),s.byte),this._save(this._map(B(e.long+1),!i),s.page),this._save(this._map(B(e.long+2),!i),s.bank)}load_byte_raw(e){try{return this._memory.get(this._mapping.map(e))}catch{return}}_map(e,s){return s?this._mapping.map_readonly(e):this._mapping.map(e)}}const Fi=class Fi{constructor(e,s=i=>i){n(this,"map");n(this,"_ranges");this.map=s,this._ranges=e}get initial_address(){return this._ranges[0].min}contains(e){return this._ranges.some(s=>{const i=e.bank,a=e.word,r=s.min.bank<=i&&i<=s.max.bank,o=s.min.word<=a&&a<=s.max.word;return r&&o})}};n(Fi,"WRAM",new Fi([{min:B(8257536),max:B(8265727)},{min:B(8265728),max:B(8388607)}])),n(Fi,"WRAM_Mirror",new Fi([{min:B(0),max:B(4136959)},{min:B(8323072),max:B(8331263)},{min:B(8388608),max:B(12525567)}],e=>B(8257536|e.word)));let Vi=Fi;const gr=class gr{constructor(e,s){n(this,"_ram");n(this,"_rom");this._ram=e,this._rom=s}get ram_initial_address(){return this._ram[0].initial_address}get rom_initial_address(){return this._rom[0].initial_address}map(e){for(const i of this._ram)if(i.contains(e))return i.map(e).long;for(const i of this._rom)if(i.contains(e))return i.map(e).long;const s=`Reading from invalid address ${e.format_address()}: unsupported area.`;throw new Error(s)}map_readonly(e){for(const i of this._ram)if(i.contains(e))return i.map(e).long;for(const i of this._rom)if(i.contains(e)){const a=`Writing to invalid address ${e.format_address()}: cannot write in ROM.`;throw new Error(a)}const s=`Writing to invalid address ${e.format_address()}: unsupported area.`;throw new Error(s)}map_safe(e){for(const s of this._ram)if(s.contains(e))return s.map(e).long;for(const s of this._rom)if(s.contains(e))return s.map(e).long;return e.long}};n(gr,"LoROM",new gr([Vi.WRAM,Vi.WRAM_Mirror],[new Vi([{min:B(8421376),max:B(16777215)}]),new Vi([{min:B(32768),max:B(8257535)}],e=>B(ae(e.bank+128).byte<<16|e.word))]));let fr=gr;function qc(t,e,s,i){let a=0;for(let r=0;r<i;++r){const o=t>>r*4&15,l=e>>r*4&15,u=o+l+s;s=Math.floor(u/10),a|=u%10<<r*4}return a+(s<<i*4)}class ze extends ${adc(e){if(this.p.flag_m){const s=this.p.flag_d?qc(this.p.a.byte,e.byte,this.p.flag_c,2):this.p.a.byte+e.byte+this.p.flag_c,i=ae(s);return this.p.flag_n=i.byte&D,this.p.flag_v=i.byte&tt,this.p.flag_z=i.byte===0,this.p.flag_c=s>Js,i}else{const s=this.p.flag_d?qc(this.p.a.word,e.word,this.p.flag_c,4):this.p.a.word+e.word+this.p.flag_c,i=O(s);return this.p.flag_n=i.page&D,this.p.flag_v=i.page&tt,this.p.flag_z=i.word===0,this.p.flag_c=s>Ui,i}}}n(ze,"mnemonic","ADC"),n(ze,"affected_flags",D|tt|ce|Ie);class yt extends ze{execute_effect(){const e=this.load_m(this.addr);this.p.a=this.adc(e)}}(t=>{class e extends t{execute_effect(){this.p.a=this.adc(this._arg)}}n(e,"opcode",105),n(e,"mode",y.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",k),t.Immediate_VariableA=e;class s extends yt{}n(s,"opcode",101),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends yt{}n(i,"opcode",117),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends yt{}n(a,"opcode",114),n(a,"mode",y.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",k|E),t.DirectPage_Indirect=a;class r extends yt{}n(r,"opcode",97),n(r,"mode",y.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",k|E),t.DirectPage_X_Indirect=r;class o extends yt{}n(o,"opcode",113),n(o,"mode",y.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",k|E|st),t.DirectPage_Indirect_Y=o;class l extends yt{}n(l,"opcode",103),n(l,"mode",y.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",k|E),t.DirectPage_IndirectLong=l;class u extends yt{}n(u,"opcode",119),n(u,"mode",y.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",k|E),t.DirectPage_IndirectLong_Y=u;class d extends yt{}n(d,"opcode",109),n(d,"mode",y.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",k),t.Absolute=d;class p extends yt{}n(p,"opcode",125),n(p,"mode",y.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",k|ms),t.Absolute_X=p;class f extends yt{}n(f,"opcode",121),n(f,"mode",y.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",k|st),t.Absolute_Y=f;class h extends yt{}n(h,"opcode",111),n(h,"mode",y.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",k),t.AbsoluteLong=h;class _ extends yt{}n(_,"opcode",127),n(_,"mode",y.AbsoluteLong_X),n(_,"base_cycles",6),n(_,"cycles_modifier",k),t.AbsoluteLong_X=_;class b extends yt{}n(b,"opcode",99),n(b,"mode",y.StackRelative),n(b,"base_cycles",5),n(b,"cycles_modifier",k),t.StackRelative=b;class w extends yt{}n(w,"opcode",115),n(w,"mode",y.StackRelative_Indirect_Y),n(w,"base_cycles",8),n(w,"cycles_modifier",k),t.StackRelative_Indirect_Y=w})(ze||(ze={}));class Qe extends ${and(e){if(this.p.flag_m){const s=ae(e.byte&this.p.a.byte);return this.p.flag_n=s.byte&D,this.p.flag_z=s.byte===0,s}else{const s=O(e.word&this.p.a.word);return this.p.flag_n=s.page&D,this.p.flag_z=s.word===0,s}}}n(Qe,"mnemonic","AND"),n(Qe,"affected_flags",D|ce);class vt extends Qe{execute_effect(){this.p.a=this.and(this.load_m(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.a=this.and(this._arg)}}n(e,"opcode",41),n(e,"mode",y.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",k),t.Immediate_VariableA=e;class s extends vt{}n(s,"opcode",37),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends vt{}n(i,"opcode",53),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends vt{}n(a,"opcode",50),n(a,"mode",y.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",k|E),t.DirectPage_Indirect=a;class r extends vt{}n(r,"opcode",33),n(r,"mode",y.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",k|E),t.DirectPage_X_Indirect=r;class o extends vt{}n(o,"opcode",49),n(o,"mode",y.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",k|E|st),t.DirectPage_Indirect_Y=o;class l extends vt{}n(l,"opcode",39),n(l,"mode",y.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",k|E),t.DirectPage_IndirectLong=l;class u extends vt{}n(u,"opcode",55),n(u,"mode",y.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",k|E),t.DirectPage_IndirectLong_Y=u;class d extends vt{}n(d,"opcode",45),n(d,"mode",y.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",k),t.Absolute=d;class p extends vt{}n(p,"opcode",61),n(p,"mode",y.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",k|ms),t.Absolute_X=p;class f extends vt{}n(f,"opcode",57),n(f,"mode",y.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",k|st),t.Absolute_Y=f;class h extends vt{}n(h,"opcode",47),n(h,"mode",y.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",k),t.AbsoluteLong=h;class _ extends vt{}n(_,"opcode",63),n(_,"mode",y.AbsoluteLong_X),n(_,"base_cycles",6),n(_,"cycles_modifier",k),t.AbsoluteLong_X=_;class b extends vt{}n(b,"opcode",35),n(b,"mode",y.StackRelative),n(b,"base_cycles",5),n(b,"cycles_modifier",k),t.StackRelative=b;class w extends vt{}n(w,"opcode",51),n(w,"mode",y.StackRelative_Indirect_Y),n(w,"base_cycles",8),n(w,"cycles_modifier",k),t.StackRelative_Indirect_Y=w})(Qe||(Qe={}));class Gt extends ${asl(e){if(this.p.flag_m){const s=ae(e.byte<<1);return this.p.flag_n=s.byte&D,this.p.flag_z=s.byte===0,this.p.flag_c=e.byte&D,s}else{const s=O(e.word<<1);return this.p.flag_n=s.page&D,this.p.flag_z=s.word===0,this.p.flag_c=e.page&D,s}}}n(Gt,"mnemonic","ASL"),n(Gt,"affected_flags",D|ce|Ie);class wa extends Gt{execute_effect(){const e=this.addr;this.save_m(e,this.asl(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.asl(this.p.a)}}n(e,"opcode",10),n(e,"mode",y.Accumulator),n(e,"base_cycles",2),t.Accumulator=e;class s extends wa{}n(s,"opcode",6),n(s,"mode",y.DirectPage),n(s,"base_cycles",7),n(s,"cycles_modifier",rt|E),t.DirectPage=s;class i extends wa{}n(i,"opcode",22),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",8),n(i,"cycles_modifier",rt|E),t.DirectPage_X=i;class a extends wa{}n(a,"opcode",14),n(a,"mode",y.Absolute),n(a,"base_cycles",8),n(a,"cycles_modifier",rt),t.Absolute=a;class r extends wa{}n(r,"opcode",30),n(r,"mode",y.Absolute_X),n(r,"base_cycles",9),n(r,"cycles_modifier",rt),t.Absolute_X=r})(Gt||(Gt={}));const Hs=class Hs extends ${constructor(){super(...arguments);n(this,"_branch_taken",!1)}get cycles(){return this._branch_taken?Hs.base_cycles+1+this._snapshot_before.flag_e:Hs.base_cycles}execute_effect(){this._branch_taken=this.check_branch(),this._branch_taken&&(this.p.pc=this.addr)}};n(Hs,"mode",y.Offset),n(Hs,"base_cycles",2),n(Hs,"cycles_modifier",od);let Xt=Hs;class io extends Xt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_c===0)}}n(io,"mnemonic","BCC"),n(io,"opcode",144);class no extends Xt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_c===1)}}n(no,"mnemonic","BCS"),n(no,"opcode",176);class ao extends Xt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_z===0)}}n(ao,"mnemonic","BNE"),n(ao,"opcode",208);class ro extends Xt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_z===1)}}n(ro,"mnemonic","BEQ"),n(ro,"opcode",240);class oo extends Xt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_n===0)}}n(oo,"mnemonic","BPL"),n(oo,"opcode",16);class co extends Xt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_n===1)}}n(co,"mnemonic","BMI"),n(co,"opcode",48);class lo extends Xt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_v===0)}}n(lo,"mnemonic","BVC"),n(lo,"opcode",80);class uo extends Xt{constructor(){super(...arguments);n(this,"check_branch",()=>this.p.flag_v===1)}}n(uo,"mnemonic","BVS"),n(uo,"opcode",112);class On extends Xt{constructor(){super(...arguments);n(this,"check_branch",()=>!0)}}n(On,"mnemonic","BRA"),n(On,"opcode",128),n(On,"base_cycles",3),n(On,"cycles_modifier",0);class Pn extends ${execute_effect(){this.p.pc=this.addr}}n(Pn,"mnemonic","BRL"),n(Pn,"opcode",130),n(Pn,"mode",y.OffsetLong),n(Pn,"base_cycles",4);class ws extends ${bit(e){if(this.p.flag_m){const s=ae(this.p.a.byte&e.byte);this.p.flag_n=e.byte&D,this.p.flag_v=e.byte&tt,this.p.flag_z=s.byte===0}else{const s=O(this.p.a.word&e.word);this.p.flag_n=e.page&D,this.p.flag_v=e.page&tt,this.p.flag_z=s.word===0}}}n(ws,"mnemonic","BIT");class An extends ws{execute_effect(){this.bit(this.load_m(this.addr))}}n(An,"affected_flags",D|tt|ce);(t=>{class e extends t{execute_effect(){const l=this.p.flag_m?this.p.a.byte&this._arg.byte:this.p.a.word&this._arg.word;this.p.flag_z=l===0}}n(e,"affected_flags",ce),n(e,"opcode",137),n(e,"mode",y.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",k),t.Immediate_VariableA=e;class s extends An{}n(s,"opcode",36),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends An{}n(i,"opcode",52),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends An{}n(a,"opcode",44),n(a,"mode",y.Absolute),n(a,"base_cycles",5),n(a,"cycles_modifier",k),t.Absolute=a;class r extends An{}n(r,"opcode",60),n(r,"mode",y.Absolute_X),n(r,"base_cycles",5),n(r,"cycles_modifier",k|ms),t.Absolute_X=r})(ws||(ws={}));class vi extends ${execute_effect(){throw new Error("BRK: Unsupported instruction.")}}n(vi,"mnemonic","BRK"),n(vi,"opcode",0),n(vi,"mode",y.Immediate),n(vi,"base_cycles",8),n(vi,"cycles_modifier",Er);class wi extends ${execute_effect(){this.p.flag_c=0}}n(wi,"mnemonic","CLC"),n(wi,"opcode",24),n(wi,"mode",y.Implied),n(wi,"base_cycles",2),n(wi,"affected_flags",Ie);class xi extends ${execute_effect(){this.p.flag_d=0}}n(xi,"mnemonic","CLD"),n(xi,"opcode",216),n(xi,"mode",y.Implied),n(xi,"base_cycles",2),n(xi,"affected_flags",ls);class ki extends ${execute_effect(){this.p.flag_i=0}}n(ki,"mnemonic","CLI"),n(ki,"opcode",88),n(ki,"mode",y.Implied),n(ki,"base_cycles",2),n(ki,"affected_flags",cs);class Ws extends ${execute_effect(){this.p.flag_v=0}}n(Ws,"mnemonic","CLV"),n(Ws,"opcode",184),n(Ws,"mode",y.Implied),n(Ws,"base_cycles",2),n(Ws,"baseLength",1),n(Ws,"affected_flags",tt);class qe extends ${cmp(e){this.p.flag_m?(this.p.flag_n=ae(this.p.a.byte-e.byte).byte&D,this.p.flag_z=this.p.a.byte===e.byte,this.p.flag_c=this.p.a.byte>=e.byte):(this.p.flag_n=O(this.p.a.word-e.word).page&D,this.p.flag_z=this.p.a.word===e.word,this.p.flag_c=this.p.a.word>=e.word)}execute_effect(){this.cmp(this.load_m(this.addr))}}n(qe,"mnemonic","CMP"),n(qe,"affected_flags",D|ce|Ie);(t=>{class e extends t{execute_effect(){this.cmp(this._arg)}}n(e,"opcode",201),n(e,"mode",y.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",k),t.Immediate_VariableA=e;class s extends t{}n(s,"opcode",197),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends t{}n(i,"opcode",213),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends t{}n(a,"opcode",210),n(a,"mode",y.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",k|E),t.DirectPage_Indirect=a;class r extends t{}n(r,"opcode",193),n(r,"mode",y.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",k|E),t.DirectPage_X_Indirect=r;class o extends t{}n(o,"opcode",209),n(o,"mode",y.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",k|E|st),t.DirectPage_Indirect_Y=o;class l extends t{}n(l,"opcode",199),n(l,"mode",y.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",k|E),t.DirectPage_IndirectLong=l;class u extends t{}n(u,"opcode",215),n(u,"mode",y.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",k|E),t.DirectPage_IndirectLong_Y=u;class d extends t{}n(d,"opcode",205),n(d,"mode",y.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",k),t.Absolute=d;class p extends t{}n(p,"opcode",221),n(p,"mode",y.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",k|ms),t.Absolute_X=p;class f extends t{}n(f,"opcode",217),n(f,"mode",y.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",k|st),t.Absolute_Y=f;class h extends t{}n(h,"opcode",207),n(h,"mode",y.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",k),t.AbsoluteLong=h;class _ extends t{}n(_,"opcode",223),n(_,"mode",y.AbsoluteLong_X),n(_,"base_cycles",6),n(_,"cycles_modifier",k),t.AbsoluteLong_X=_;class b extends t{}n(b,"opcode",195),n(b,"mode",y.StackRelative),n(b,"base_cycles",5),n(b,"cycles_modifier",k),t.StackRelative=b;class w extends t{}n(w,"opcode",211),n(w,"mode",y.StackRelative_Indirect_Y),n(w,"base_cycles",8),n(w,"cycles_modifier",k),t.StackRelative_Indirect_Y=w})(qe||(qe={}));class Si extends ${execute_effect(){throw new Error("COP: Unsupported instruction.")}}n(Si,"mnemonic","COP"),n(Si,"opcode",2),n(Si,"mode",y.Immediate),n(Si,"base_cycles",8),n(Si,"cycles_modifier",Er);class ei extends ${cpx(e){this.p.flag_x?(this.p.flag_n=ae(this.p.x.byte-e.byte).byte&D,this.p.flag_z=this.p.x.byte===e.byte,this.p.flag_c=this.p.x.byte>=e.byte):(this.p.flag_n=O(this.p.x.word-e.word).page&D,this.p.flag_z=this.p.x.word===e.word,this.p.flag_c=this.p.x.word>=e.word)}execute_effect(){this.cpx(this.load_x(this.addr))}}n(ei,"mnemonic","CPX"),n(ei,"affected_flags",D|ce|Ie);(t=>{class e extends t{execute_effect(){this.cpx(this._arg)}}n(e,"opcode",224),n(e,"mode",y.Immediate_VariableX),n(e,"base_cycles",3),n(e,"cycles_modifier",_e),t.Immediate_VariableX=e;class s extends t{}n(s,"opcode",228),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",_e|E),t.DirectPage=s;class i extends t{}n(i,"opcode",236),n(i,"mode",y.Absolute),n(i,"base_cycles",5),n(i,"cycles_modifier",_e),t.Absolute=i})(ei||(ei={}));class ti extends ${cpy(e){this.p.flag_x?(this.p.flag_n=ae(this.p.y.byte-e.byte).byte&D,this.p.flag_z=this.p.y.byte===e.byte,this.p.flag_c=this.p.y.byte>=e.byte):(this.p.flag_n=O(this.p.y.word-e.word).page&D,this.p.flag_z=this.p.y.word===e.word,this.p.flag_c=this.p.y.word>=e.word)}execute_effect(){this.cpy(this.load_x(this.addr))}}n(ti,"mnemonic","CPY"),n(ti,"affected_flags",D|ce|Ie);(t=>{class e extends t{execute_effect(){this.cpy(this._arg)}}n(e,"opcode",192),n(e,"mode",y.Immediate_VariableX),n(e,"base_cycles",3),n(e,"cycles_modifier",_e),t.Immediate_VariableX=e;class s extends t{}n(s,"opcode",196),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",_e|E),n(s,"baseLength",2),t.DirectPage=s;class i extends t{}n(i,"opcode",204),n(i,"mode",y.Absolute),n(i,"base_cycles",5),n(i,"cycles_modifier",_e),n(i,"baseLength",3),t.Absolute=i})(ti||(ti={}));class Kt extends ${dec(e){if(this.p.flag_m){const s=O(e.byte-1);return this.p.flag_n=s.byte&D,this.p.flag_z=s.byte===0,s}else{const s=O(e.word-1);return this.p.flag_n=s.page&D,this.p.flag_z=s.word===0,s}}}n(Kt,"mnemonic","DEC"),n(Kt,"affected_flags",D|ce);class xa extends Kt{execute_effect(){const e=this.addr;this.save_m(e,this.dec(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.dec(this.p.a)}}n(e,"opcode",58),n(e,"mode",y.Accumulator),n(e,"base_cycles",2),t.Accumulator=e;class s extends xa{}n(s,"opcode",198),n(s,"mode",y.DirectPage),n(s,"base_cycles",7),n(s,"cycles_modifier",rt|E),t.DirectPage=s;class i extends xa{}n(i,"opcode",214),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",8),n(i,"cycles_modifier",rt|E),t.DirectPage_X=i;class a extends xa{}n(a,"opcode",206),n(a,"mode",y.Absolute),n(a,"base_cycles",8),n(a,"cycles_modifier",rt),t.Absolute=a;class r extends xa{}n(r,"opcode",222),n(r,"mode",y.Absolute_X),n(r,"base_cycles",9),n(r,"cycles_modifier",rt),t.Absolute_X=r})(Kt||(Kt={}));class Ci extends ${execute_effect(){if(this.p.flag_x){const e=O(this.p.x.byte-1);this.p.flag_n=e.byte&D,this.p.flag_z=e.byte===0,this.p.x=e}else{const e=O(this.p.x.word-1);this.p.flag_n=e.page&D,this.p.flag_z=e.word===0,this.p.x=e}}}n(Ci,"mnemonic","DEX"),n(Ci,"opcode",202),n(Ci,"mode",y.Implied),n(Ci,"base_cycles",2),n(Ci,"affected_flags",D|ce);class Oi extends ${execute_effect(){if(this.p.flag_x){const e=O(this.p.y.byte-1);this.p.flag_n=e.byte&D,this.p.flag_z=e.byte===0,this.p.y=e}else{const e=O(this.p.y.word-1);this.p.flag_n=e.page&D,this.p.flag_z=e.word===0,this.p.y=e}}}n(Oi,"mnemonic","DEY"),n(Oi,"opcode",136),n(Oi,"mode",y.Implied),n(Oi,"base_cycles",2),n(Oi,"affected_flags",D|ce);class We extends ${eor(e){if(this.p.flag_m){const s=ae(e.byte^this.p.a.byte);return this.p.flag_n=s.byte&D,this.p.flag_z=s.byte===0,s}else{const s=O(e.word^this.p.a.word);return this.p.flag_n=s.page&D,this.p.flag_z=s.word===0,s}}}n(We,"mnemonic","EOR"),n(We,"affected_flags",D|ce);class wt extends We{execute_effect(){this.p.a=this.eor(this.load_m(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.a=this.eor(this._arg)}}n(e,"opcode",73),n(e,"mode",y.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",k),t.Immediate_VariableA=e;class s extends wt{}n(s,"opcode",69),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends wt{}n(i,"opcode",85),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends wt{}n(a,"opcode",82),n(a,"mode",y.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",k|E),t.DirectPage_Indirect=a;class r extends wt{}n(r,"opcode",65),n(r,"mode",y.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",k|E),t.DirectPage_X_Indirect=r;class o extends wt{}n(o,"opcode",81),n(o,"mode",y.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",k|E|st),t.DirectPage_Indirect_Y=o;class l extends wt{}n(l,"opcode",71),n(l,"mode",y.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",k|E),t.DirectPage_IndirectLong=l;class u extends wt{}n(u,"opcode",87),n(u,"mode",y.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",k|E),t.DirectPage_IndirectLong_Y=u;class d extends wt{}n(d,"opcode",77),n(d,"mode",y.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",k),t.Absolute=d;class p extends wt{}n(p,"opcode",93),n(p,"mode",y.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",k|ms),t.Absolute_X=p;class f extends wt{}n(f,"opcode",89),n(f,"mode",y.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",k|st),t.Absolute_Y=f;class h extends wt{}n(h,"opcode",79),n(h,"mode",y.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",k),t.AbsoluteLong=h;class _ extends wt{}n(_,"opcode",95),n(_,"mode",y.AbsoluteLong_X),n(_,"base_cycles",6),n(_,"cycles_modifier",k),t.AbsoluteLong_X=_;class b extends wt{}n(b,"opcode",67),n(b,"mode",y.StackRelative),n(b,"base_cycles",5),n(b,"cycles_modifier",k),t.StackRelative=b;class w extends wt{}n(w,"opcode",83),n(w,"mode",y.StackRelative_Indirect_Y),n(w,"base_cycles",8),n(w,"cycles_modifier",k),t.StackRelative_Indirect_Y=w})(We||(We={}));class Jt extends ${inc(e){if(this.p.flag_m){const s=O(e.byte+1);return this.p.flag_n=s.byte&D,this.p.flag_z=s.byte===0,s}else{const s=O(e.word+1);return this.p.flag_n=s.page&D,this.p.flag_z=s.word===0,s}}}n(Jt,"mnemonic","INC"),n(Jt,"affected_flags",D|ce);class ka extends Jt{execute_effect(){const e=this.addr;this.save_m(e,this.inc(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.inc(this.p.a)}}n(e,"opcode",26),n(e,"mode",y.Accumulator),n(e,"base_cycles",2),n(e,"baseLength",1),t.Accumulator=e;class s extends ka{}n(s,"opcode",230),n(s,"mode",y.DirectPage),n(s,"base_cycles",7),n(s,"cycles_modifier",rt|E),n(s,"baseLength",2),t.DirectPage=s;class i extends ka{}n(i,"opcode",246),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",8),n(i,"cycles_modifier",rt|E),n(i,"baseLength",2),t.DirectPage_X=i;class a extends ka{}n(a,"opcode",238),n(a,"mode",y.Absolute),n(a,"base_cycles",8),n(a,"cycles_modifier",rt),n(a,"baseLength",3),t.Absolute=a;class r extends ka{}n(r,"opcode",254),n(r,"mode",y.Absolute_X),n(r,"base_cycles",9),n(r,"cycles_modifier",rt),n(r,"baseLength",3),t.Absolute_X=r})(Jt||(Jt={}));class Us extends ${execute_effect(){if(this.p.flag_x){const e=O(this.p.x.byte+1);this.p.flag_n=e.byte&D,this.p.flag_z=e.byte===0,this.p.x=e}else{const e=O(this.p.x.word+1);this.p.flag_n=e.page&D,this.p.flag_z=e.word===0,this.p.x=e}}}n(Us,"mnemonic","INX"),n(Us,"opcode",232),n(Us,"mode",y.Implied),n(Us,"base_cycles",2),n(Us,"baseLength",1),n(Us,"affected_flags",D|ce);class Zs extends ${execute_effect(){if(this.p.flag_x){const e=O(this.p.y.byte+1);this.p.flag_n=e.byte&D,this.p.flag_z=e.byte===0,this.p.y=e}else{const e=O(this.p.y.word+1);this.p.flag_n=e.page&D,this.p.flag_z=e.word===0,this.p.y=e}}}n(Zs,"mnemonic","INY"),n(Zs,"opcode",200),n(Zs,"mode",y.Implied),n(Zs,"base_cycles",2),n(Zs,"baseLength",1),n(Zs,"affected_flags",D|ce);class Is extends ${execute_effect(){this.p.pc=this.addr}}n(Is,"mnemonic","JMP");class ho extends ${execute_effect(){const e=this.addr;this.p.pb=ae(e.bank),this.p.pc=e}}n(ho,"mnemonic","JML");(t=>{class e extends t{}n(e,"opcode",76),n(e,"mode",y.Absolute),n(e,"base_cycles",3),t.Absolute=e;class s extends t{}n(s,"opcode",108),n(s,"mode",y.Absolute_Indirect),n(s,"base_cycles",5),t.Absolute_Indirect=s;class i extends t{}n(i,"opcode",124),n(i,"mode",y.Absolute_X_Indirect),n(i,"base_cycles",6),t.Absolute_X_Indirect=i;class a extends ho{}n(a,"opcode",220),n(a,"mode",y.Absolute_IndirectLong),n(a,"base_cycles",6),t.Absolute_IndirectLong=a;class r extends ho{}n(r,"opcode",92),n(r,"mode",y.AbsoluteLong),n(r,"base_cycles",4),t.AbsoluteLong=r})(Is||(Is={}));class Zi extends ${execute_effect(){this.p.pc=O(this.p.pc.word-1),this.p.sp=O(this.p.sp.word-2),this.m.save_byte(O(this.p.sp.word+2),ae(this.p.pc.page)),this.m.save_byte(O(this.p.sp.word+1),ae(this.p.pc.byte)),this.p.pc=this.addr}}n(Zi,"mnemonic","JSR");class ld extends ${execute_effect(){this.p.pc=O(this.p.pc.word-1),this.p.sp=O(this.p.sp.word-3),this.m.save_byte(O(this.p.sp.word+3),ae(this.p.pb.byte)),this.m.save_byte(O(this.p.sp.word+2),ae(this.p.pc.page)),this.m.save_byte(O(this.p.sp.word+1),ae(this.p.pc.byte));const e=this.addr;this.p.pb=ae(e.bank),this.p.pc=e}}n(ld,"mnemonic","JSL");(t=>{class e extends t{}n(e,"opcode",32),n(e,"mode",y.Absolute),n(e,"base_cycles",6),t.Absolute=e;class s extends t{}n(s,"opcode",252),n(s,"mode",y.Absolute_X_Indirect),n(s,"base_cycles",8),t.Absolute_X_Indirect=s;class i extends ld{}n(i,"opcode",34),n(i,"mode",y.AbsoluteLong),n(i,"base_cycles",8),t.AbsoluteLong=i})(Zi||(Zi={}));class Ue extends ${lda(e){return this.p.flag_m?(this.p.flag_n=e.byte&D,this.p.flag_z=e.byte===0):(this.p.flag_n=e.page&D,this.p.flag_z=e.word===0),e}}n(Ue,"mnemonic","LDA"),n(Ue,"affected_flags",D|ce);class xt extends Ue{execute_effect(){this.p.a=this.lda(this.load_m(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.a=this.lda(this._arg)}}n(e,"opcode",169),n(e,"mode",y.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",k),t.Immediate_VariableA=e;class s extends xt{}n(s,"opcode",165),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends xt{}n(i,"opcode",181),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends xt{}n(a,"opcode",178),n(a,"mode",y.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",k|E),t.DirectPage_Indirect=a;class r extends xt{}n(r,"opcode",161),n(r,"mode",y.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",k|E),t.DirectPage_X_Indirect=r;class o extends xt{}n(o,"opcode",177),n(o,"mode",y.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",k|E|st),t.DirectPage_Indirect_Y=o;class l extends xt{}n(l,"opcode",167),n(l,"mode",y.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",k|E),t.DirectPage_IndirectLong=l;class u extends xt{}n(u,"opcode",183),n(u,"mode",y.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",k|E),t.DirectPage_IndirectLong_Y=u;class d extends xt{}n(d,"opcode",173),n(d,"mode",y.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",k),t.Absolute=d;class p extends xt{}n(p,"opcode",189),n(p,"mode",y.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",k+ms),t.Absolute_X=p;class f extends xt{}n(f,"opcode",185),n(f,"mode",y.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",k+st),t.Absolute_Y=f;class h extends xt{}n(h,"opcode",175),n(h,"mode",y.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",k),t.AbsoluteLong=h;class _ extends xt{}n(_,"opcode",191),n(_,"mode",y.AbsoluteLong_X),n(_,"base_cycles",6),n(_,"cycles_modifier",k),t.AbsoluteLong_X=_;class b extends xt{}n(b,"opcode",163),n(b,"mode",y.StackRelative),n(b,"base_cycles",5),n(b,"cycles_modifier",k),t.StackRelative=b;class w extends xt{}n(w,"opcode",179),n(w,"mode",y.StackRelative_Indirect_Y),n(w,"base_cycles",8),n(w,"cycles_modifier",k),t.StackRelative_Indirect_Y=w})(Ue||(Ue={}));class es extends ${ldx(e){return this.p.flag_x?(this.p.flag_n=e.byte&D,this.p.flag_z=e.byte===0):(this.p.flag_n=e.page&D,this.p.flag_z=e.word===0),e}}n(es,"mnemonic","LDX"),n(es,"affected_flags",D|ce);class Sa extends es{execute_effect(){this.p.x=this.ldx(this.load_x(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.x=this.ldx(this._arg)}}n(e,"opcode",162),n(e,"mode",y.Immediate_VariableX),n(e,"base_cycles",3),n(e,"cycles_modifier",_e),t.Immediate_VariableX=e;class s extends Sa{}n(s,"opcode",166),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",_e|E),t.DirectPage=s;class i extends Sa{}n(i,"opcode",182),n(i,"mode",y.DirectPage_Y),n(i,"base_cycles",5),n(i,"cycles_modifier",_e|E),t.DirectPage_Y=i;class a extends Sa{}n(a,"opcode",174),n(a,"mode",y.Absolute),n(a,"base_cycles",5),n(a,"cycles_modifier",_e),t.Absolute=a;class r extends Sa{}n(r,"opcode",190),n(r,"mode",y.Absolute_Y),n(r,"base_cycles",5),n(r,"cycles_modifier",_e+st),t.Absolute_Y=r})(es||(es={}));class ts extends ${ldy(e){return this.p.flag_x?(this.p.flag_n=e.byte&D,this.p.flag_z=e.byte===0):(this.p.flag_n=e.page&D,this.p.flag_z=e.word===0),e}}n(ts,"mnemonic","LDY"),n(ts,"affected_flags",D|ce);class Ca extends ts{execute_effect(){this.p.y=this.ldy(this.load_x(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.y=this.ldy(this._arg)}}n(e,"opcode",160),n(e,"mode",y.Immediate_VariableX),n(e,"base_cycles",3),n(e,"cycles_modifier",_e),t.Immediate_VariableX=e;class s extends Ca{}n(s,"opcode",164),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",_e|E),t.DirectPage=s;class i extends Ca{}n(i,"opcode",180),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",_e|E),t.DirectPage_X=i;class a extends Ca{}n(a,"opcode",172),n(a,"mode",y.Absolute),n(a,"base_cycles",5),n(a,"cycles_modifier",_e),t.Absolute=a;class r extends Ca{}n(r,"opcode",188),n(r,"mode",y.Absolute_X),n(r,"base_cycles",5),n(r,"cycles_modifier",_e+st),t.Absolute_X=r})(ts||(ts={}));class ss extends ${lsr(e){if(this.p.flag_m){const s=ae(e.byte>>1);return this.p.flag_n=0,this.p.flag_z=s.byte===0,this.p.flag_c=e.byte&Ie,s}else{const s=O(e.word>>1);return this.p.flag_n=0,this.p.flag_z=s.word===0,this.p.flag_c=e.byte&Ie,s}}}n(ss,"mnemonic","LSR"),n(ss,"affected_flags",D|ce|Ie);class Oa extends ss{execute_effect(){const e=this.addr;this.save_m(e,this.lsr(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.lsr(this.p.a)}}n(e,"opcode",74),n(e,"mode",y.Accumulator),n(e,"base_cycles",2),t.Accumulator=e;class s extends Oa{}n(s,"opcode",70),n(s,"mode",y.DirectPage),n(s,"base_cycles",6),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends Oa{}n(i,"opcode",86),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",7),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends Oa{}n(a,"opcode",78),n(a,"mode",y.Absolute),n(a,"base_cycles",7),n(a,"cycles_modifier",k),t.Absolute=a;class r extends Oa{}n(r,"opcode",94),n(r,"mode",y.Absolute_X),n(r,"base_cycles",8),n(r,"cycles_modifier",k),t.Absolute_X=r})(ss||(ss={}));class Pi extends ${constructor(){super(...arguments);n(this,"_iterations",0)}get cycles(){return this._iterations*7}execute_effect(){const s=this._arg.byte,i=this._arg.page;for(this.p.db=ae(i),this._iterations=0;this.p.c.word!==65535;){this._iterations++;const a=this.m.load_byte(B((s<<16)+this.p.x.word));this.m.save_byte(B((i<<16)+this.p.y.word),a),this.p.x=O(this.p.x.word+1),this.p.y=O(this.p.y.word+1),this.p.c=O(this.p.c.word-1)}}}n(Pi,"mnemonic","MVN"),n(Pi,"opcode",84),n(Pi,"mode",y.BlockMove),n(Pi,"base_cycles",0),n(Pi,"cycles_modifier",Fo);class Ai extends ${constructor(){super(...arguments);n(this,"_iterations",0)}get cycles(){return this._iterations*7}execute_effect(){const s=this._arg.byte,i=this._arg.page;for(this.p.db=ae(i),this._iterations=0;this.p.c.word!==65535;){this._iterations++;const a=this.m.load_byte(B((s<<16)+this.p.x.word));this.m.save_byte(B((i<<16)+this.p.y.word),a),this.p.x=O(this.p.x.word-1),this.p.y=O(this.p.y.word-1),this.p.c=O(this.p.c.word-1)}}}n(Ai,"mnemonic","MVP"),n(Ai,"opcode",68),n(Ai,"mode",y.BlockMove),n(Ai,"base_cycles",0),n(Ai,"cycles_modifier",Fo);class In extends ${execute_effect(){}}n(In,"mnemonic","NOP"),n(In,"opcode",234),n(In,"mode",y.Implied),n(In,"base_cycles",2);class Ze extends ${ora(e){if(this.p.flag_m){const s=ae(e.byte|this.p.a.byte);return this.p.flag_n=s.byte&D,this.p.flag_z=s.byte===0,s}else{const s=O(e.word|this.p.a.word);return this.p.flag_n=s.page&D,this.p.flag_z=s.word===0,s}}}n(Ze,"mnemonic","ORA"),n(Ze,"affected_flags",D|ce);class kt extends Ze{execute_effect(){this.p.a=this.ora(this.load_m(this.addr))}}(t=>{class e extends t{execute_effect(){this.p.a=this.ora(this._arg)}}n(e,"opcode",9),n(e,"mode",y.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",k),t.Immediate_VariableA=e;class s extends kt{}n(s,"opcode",5),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends kt{}n(i,"opcode",21),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends kt{}n(a,"opcode",18),n(a,"mode",y.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",k|E),t.DirectPage_Indirect=a;class r extends kt{}n(r,"opcode",1),n(r,"mode",y.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",k|E),t.DirectPage_X_Indirect=r;class o extends kt{}n(o,"opcode",17),n(o,"mode",y.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",k|E|st),t.DirectPage_Indirect_Y=o;class l extends kt{}n(l,"opcode",7),n(l,"mode",y.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",k|E),t.DirectPage_IndirectLong=l;class u extends kt{}n(u,"opcode",23),n(u,"mode",y.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",k|E),t.DirectPage_IndirectLong_Y=u;class d extends kt{}n(d,"opcode",13),n(d,"mode",y.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",k),t.Absolute=d;class p extends kt{}n(p,"opcode",29),n(p,"mode",y.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",k|ms),t.Absolute_X=p;class f extends kt{}n(f,"opcode",25),n(f,"mode",y.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",k|st),t.Absolute_Y=f;class h extends kt{}n(h,"opcode",15),n(h,"mode",y.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",k),t.AbsoluteLong=h;class _ extends kt{}n(_,"opcode",31),n(_,"mode",y.AbsoluteLong_X),n(_,"base_cycles",6),n(_,"cycles_modifier",k),t.AbsoluteLong_X=_;class b extends kt{}n(b,"opcode",3),n(b,"mode",y.StackRelative),n(b,"base_cycles",5),n(b,"cycles_modifier",k),t.StackRelative=b;class w extends kt{}n(w,"opcode",19),n(w,"mode",y.StackRelative_Indirect_Y),n(w,"base_cycles",8),n(w,"cycles_modifier",k),t.StackRelative_Indirect_Y=w})(Ze||(Ze={}));class Tn extends ${execute_effect(){this.p.sp=O(this.p.sp.word-2),this.m.save_byte(O(this.p.sp.word+2),ae(this._arg.page)),this.m.save_byte(O(this.p.sp.word+1),ae(this._arg.byte))}}n(Tn,"mnemonic","PEA"),n(Tn,"opcode",244),n(Tn,"mode",y.Absolute),n(Tn,"base_cycles",5);class Ii extends ${execute_effect(){this.p.sp=O(this.p.sp.word-2);const e=this.m.load_byte(B(this.addr.long+1));this.m.save_byte(O(this.p.sp.word+2),e);const s=this.m.load_byte(this.addr);this.m.save_byte(O(this.p.sp.word+1),s)}}n(Ii,"mnemonic","PEI"),n(Ii,"opcode",212),n(Ii,"mode",y.DirectPage_Indirect),n(Ii,"base_cycles",6),n(Ii,"cycles_modifier",E);class Rn extends ${execute_effect(){this.p.sp=O(this.p.sp.word-2);const e=this.addr;this.m.save_byte(O(this.p.sp.word+2),ae(e.page)),this.m.save_byte(O(this.p.sp.word+1),ae(e.byte))}}n(Rn,"mnemonic","PER"),n(Rn,"opcode",98),n(Rn,"mode",y.OffsetLong),n(Rn,"base_cycles",6);class Bs extends ${push_byte(e){this.p.sp=O(this.p.sp.word-1),this.m.save_byte(O(this.p.sp.word+1),ae(e))}push_word(e){this.p.sp=O(this.p.sp.word-2),this.m.save_word(O(this.p.sp.word+1),O(e))}}n(Bs,"mode",y.Implied);class En extends Bs{execute_effect(){this.p.flag_m?this.push_byte(this.p.a.byte):this.push_word(this.p.a.word)}}n(En,"mnemonic","PHA"),n(En,"opcode",72),n(En,"base_cycles",4),n(En,"cycles_modifier",k);class Dn extends Bs{execute_effect(){this.p.flag_x?this.push_byte(this.p.x.byte):this.push_word(this.p.x.word)}}n(Dn,"mnemonic","PHX"),n(Dn,"opcode",218),n(Dn,"base_cycles",4),n(Dn,"cycles_modifier",_e);class Nn extends Bs{execute_effect(){this.p.flag_x?this.push_byte(this.p.y.byte):this.push_word(this.p.y.word)}}n(Nn,"mnemonic","PHY"),n(Nn,"opcode",90),n(Nn,"base_cycles",4),n(Nn,"cycles_modifier",_e);class Na extends Bs{execute_effect(){this.push_byte(this.p.db.byte)}}n(Na,"mnemonic","PHB"),n(Na,"opcode",139),n(Na,"base_cycles",3);class La extends Bs{execute_effect(){this.push_word(this.p.dp.word)}}n(La,"mnemonic","PHD"),n(La,"opcode",11),n(La,"base_cycles",4);class Ma extends Bs{execute_effect(){this.push_byte(this.p.flags)}}n(Ma,"mnemonic","PHP"),n(Ma,"opcode",8),n(Ma,"base_cycles",3);class Ba extends Bs{execute_effect(){this.push_byte(this.p.pb.byte)}}n(Ba,"mnemonic","PHK"),n(Ba,"opcode",75),n(Ba,"base_cycles",3);class Ls extends ${pull_byte(){const e=this.m.load_byte(O(this.p.sp.word+1));return this.p.flag_n=e.byte&D,this.p.flag_z=e.byte===0,this.p.sp=O(this.p.sp.word+1),e}pull_word(){const e=this.m.load_word(O(this.p.sp.word+1));return this.p.flag_n=e.page&D,this.p.flag_z=e.word===0,this.p.sp=O(this.p.sp.word+2),e}}n(Ls,"mode",y.Implied),n(Ls,"affected_flags",D|ce);class Ln extends Ls{execute_effect(){this.p.a=this.p.flag_m?this.pull_byte():this.pull_word()}}n(Ln,"mnemonic","PLA"),n(Ln,"opcode",104),n(Ln,"base_cycles",5),n(Ln,"cycles_modifier",k);class Mn extends Ls{execute_effect(){this.p.x=this.p.flag_x?this.pull_byte():this.pull_word()}}n(Mn,"mnemonic","PLX"),n(Mn,"opcode",250),n(Mn,"base_cycles",5),n(Mn,"cycles_modifier",_e);class Bn extends Ls{execute_effect(){this.p.y=this.p.flag_x?this.pull_byte():this.pull_word()}}n(Bn,"mnemonic","PLY"),n(Bn,"opcode",122),n(Bn,"base_cycles",5),n(Bn,"cycles_modifier",_e);class $a extends Ls{execute_effect(){this.p.db=this.pull_byte()}}n($a,"mnemonic","PLB"),n($a,"opcode",171),n($a,"base_cycles",4);class Va extends Ls{execute_effect(){this.p.dp=this.pull_word()}}n(Va,"mnemonic","PLD"),n(Va,"opcode",43),n(Va,"base_cycles",6);class Fa extends Ls{execute_effect(){this.p.flags=this.pull_byte().byte}}n(Fa,"mnemonic","PLP"),n(Fa,"opcode",40),n(Fa,"base_cycles",4);class Xs extends ${execute_effect(){const e=this._arg.byte;this.p.flag_e?(e&D&&(this.p.flag_n=0),e&tt&&(this.p.flag_v=0),e&zo&&(this.p.flag_b=0),e&ls&&(this.p.flag_d=0),e&cs&&(this.p.flag_i=0),e&ce&&(this.p.flag_z=0),e&Ie&&(this.p.flag_c=0),this.p.flag_m=1,this.p.flag_x=1):(e&D&&(this.p.flag_n=0),e&tt&&(this.p.flag_v=0),e&tn&&(this.p.flag_m=0),e&en&&(this.p.flag_x=0),e&ls&&(this.p.flag_d=0),e&cs&&(this.p.flag_i=0),e&ce&&(this.p.flag_z=0),e&Ie&&(this.p.flag_c=0))}}n(Xs,"mnemonic","REP"),n(Xs,"opcode",194),n(Xs,"mode",y.Immediate),n(Xs,"base_cycles",3),n(Xs,"baseLength",2),n(Xs,"affected_flags",D|tt|tn|en|ls|cs|ce|Ie);class is extends ${rol(e){if(this.p.flag_m){const s=ae((e.byte<<1)+this.p.flag_c);return this.p.flag_n=s.byte&D,this.p.flag_z=s.byte===0,this.p.flag_c=e.byte&D,s}else{const s=O((e.word<<1)+this.p.flag_c);return this.p.flag_n=s.page&D,this.p.flag_z=s.word===0,this.p.flag_c=e.page&D,s}}}n(is,"mnemonic","ROL"),n(is,"affected_flags",D|ce|Ie);class Pa extends is{execute_effect(){const e=this.addr;this.save_m(e,this.rol(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.rol(this.p.a)}}n(e,"opcode",42),n(e,"mode",y.Accumulator),n(e,"base_cycles",2),t.Accumulator=e;class s extends Pa{}n(s,"opcode",38),n(s,"mode",y.DirectPage),n(s,"base_cycles",6),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends Pa{}n(i,"opcode",54),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",7),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends Pa{}n(a,"opcode",46),n(a,"mode",y.Absolute),n(a,"base_cycles",7),n(a,"cycles_modifier",k),t.Absolute=a;class r extends Pa{}n(r,"opcode",62),n(r,"mode",y.Absolute_X),n(r,"base_cycles",8),n(r,"cycles_modifier",k),t.Absolute_X=r})(is||(is={}));class ns extends ${ror(e){if(this.p.flag_m){const s=ae(e.byte>>1|this.p.flag_c<<7);return this.p.flag_n=0,this.p.flag_z=s.byte===0,this.p.flag_c=e.byte&Ie,s}else{const s=O(e.word>>1|this.p.flag_c<<15);return this.p.flag_n=0,this.p.flag_z=s.word===0,this.p.flag_c=e.byte&Ie,s}}}n(ns,"mnemonic","ROR"),n(ns,"affected_flags",D|ce|Ie);class Aa extends ns{execute_effect(){const e=this.addr;this.save_m(e,this.ror(this.load_m(e)))}}(t=>{class e extends t{execute_effect(){this.p.a=this.ror(this.p.a)}}n(e,"opcode",106),n(e,"mode",y.Accumulator),n(e,"base_cycles",2),t.Accumulator=e;class s extends Aa{}n(s,"opcode",102),n(s,"mode",y.DirectPage),n(s,"base_cycles",6),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends Aa{}n(i,"opcode",118),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",7),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends Aa{}n(a,"opcode",110),n(a,"mode",y.Absolute),n(a,"base_cycles",7),n(a,"cycles_modifier",k),t.Absolute=a;class r extends Aa{}n(r,"opcode",126),n(r,"mode",y.Absolute_X),n(r,"base_cycles",8),n(r,"cycles_modifier",k),t.Absolute_X=r})(ns||(ns={}));class Ti extends ${execute_effect(){throw new Error("RTI: Unsupported instruction.")}}n(Ti,"mnemonic","RTI"),n(Ti,"opcode",64),n(Ti,"mode",y.Implied),n(Ti,"base_cycles",7),n(Ti,"cycles_modifier",Er);class $n extends ${execute_effect(){const e=this.m.load_byte(O(this.p.sp.word+1)).byte,s=this.m.load_byte(O(this.p.sp.word+2)).byte;this.p.pc=O(s<<8|e),this.p.pb=this.m.load_byte(O(this.p.sp.word+3)),this.p.sp=O(this.p.sp.word+3),this.p.pc=O(this.p.pc.word+1)}}n($n,"mnemonic","RTL"),n($n,"opcode",107),n($n,"mode",y.Implied),n($n,"base_cycles",6);class Vn extends ${execute_effect(){const e=this.m.load_byte(O(this.p.sp.word+1)).byte,s=this.m.load_byte(O(this.p.sp.word+2)).byte;this.p.pc=O(s<<8|e),this.p.sp=O(this.p.sp.word+2),this.p.pc=O(this.p.pc.word+1)}}n(Vn,"mnemonic","RTS"),n(Vn,"opcode",96),n(Vn,"mode",y.Implied),n(Vn,"base_cycles",6);function Gc(t,e,s,i){let a=0;s=1-s;for(let r=0;r<i;++r){const o=t>>r*4&15,l=e>>r*4&15,u=o-l-s;s=u<0?Math.floor(Math.abs(u)/10)+1:-Math.floor(u/10),a|=Ja(u,10)<<r*4}return a}class Xe extends ${sbc(e){if(this.p.flag_m){const s=this.p.flag_d?Gc(this.p.a.byte,e.byte,this.p.flag_c,2):this.p.a.byte+~e.byte+this.p.flag_c,i=ae(s);return this.p.flag_n=i.byte&D,this.p.flag_v=i.byte&tt,this.p.flag_z=i.byte===0,this.p.flag_c=s<0?0:1,i}else{const s=this.p.flag_d?Gc(this.p.a.word,e.word,this.p.flag_c,4):this.p.a.word+~e.word+this.p.flag_c,i=O(s);return this.p.flag_n=i.page&D,this.p.flag_v=i.page&tt,this.p.flag_z=i.word===0,this.p.flag_c=s<0?0:1,i}}}n(Xe,"mnemonic","SBC"),n(Xe,"affected_flags",D|tt|ce|Ie);class St extends Xe{execute_effect(){const e=this.load_m(this.addr);this.p.a=this.sbc(e)}}(t=>{class e extends t{execute_effect(){this.p.a=this.sbc(this._arg)}}n(e,"opcode",233),n(e,"mode",y.Immediate_VariableA),n(e,"base_cycles",3),n(e,"cycles_modifier",k),t.Immediate_VariableA=e;class s extends St{}n(s,"opcode",229),n(s,"mode",y.DirectPage),n(s,"base_cycles",4),n(s,"cycles_modifier",k|E),t.DirectPage=s;class i extends St{}n(i,"opcode",245),n(i,"mode",y.DirectPage_X),n(i,"base_cycles",5),n(i,"cycles_modifier",k|E),t.DirectPage_X=i;class a extends St{}n(a,"opcode",242),n(a,"mode",y.DirectPage_Indirect),n(a,"base_cycles",6),n(a,"cycles_modifier",k|E),t.DirectPage_Indirect=a;class r extends St{}n(r,"opcode",225),n(r,"mode",y.DirectPage_X_Indirect),n(r,"base_cycles",7),n(r,"cycles_modifier",k|E),t.DirectPage_X_Indirect=r;class o extends St{}n(o,"opcode",241),n(o,"mode",y.DirectPage_Indirect_Y),n(o,"base_cycles",6),n(o,"cycles_modifier",k|E|st),t.DirectPage_Indirect_Y=o;class l extends St{}n(l,"opcode",231),n(l,"mode",y.DirectPage_IndirectLong),n(l,"base_cycles",7),n(l,"cycles_modifier",k|E),t.DirectPage_IndirectLong=l;class u extends St{}n(u,"opcode",247),n(u,"mode",y.DirectPage_IndirectLong_Y),n(u,"base_cycles",7),n(u,"cycles_modifier",k|E),t.DirectPage_IndirectLong_Y=u;class d extends St{}n(d,"opcode",237),n(d,"mode",y.Absolute),n(d,"base_cycles",5),n(d,"cycles_modifier",k),t.Absolute=d;class p extends St{}n(p,"opcode",253),n(p,"mode",y.Absolute_X),n(p,"base_cycles",5),n(p,"cycles_modifier",k|ms),t.Absolute_X=p;class f extends St{}n(f,"opcode",249),n(f,"mode",y.Absolute_Y),n(f,"base_cycles",5),n(f,"cycles_modifier",k|st),t.Absolute_Y=f;class h extends St{}n(h,"opcode",239),n(h,"mode",y.AbsoluteLong),n(h,"base_cycles",6),n(h,"cycles_modifier",k),t.AbsoluteLong=h;class _ extends St{}n(_,"opcode",255),n(_,"mode",y.AbsoluteLong_X),n(_,"base_cycles",6),n(_,"cycles_modifier",k),t.AbsoluteLong_X=_;class b extends St{}n(b,"opcode",227),n(b,"mode",y.StackRelative),n(b,"base_cycles",5),n(b,"cycles_modifier",k),t.StackRelative=b;class w extends St{}n(w,"opcode",243),n(w,"mode",y.StackRelative_Indirect_Y),n(w,"base_cycles",8),n(w,"cycles_modifier",k),t.StackRelative_Indirect_Y=w})(Xe||(Xe={}));class Ri extends ${execute_effect(){this.p.flag_c=1}}n(Ri,"mnemonic","SEC"),n(Ri,"opcode",56),n(Ri,"mode",y.Implied),n(Ri,"base_cycles",2),n(Ri,"affected_flags",Ie);class Ei extends ${execute_effect(){this.p.flag_d=1}}n(Ei,"mnemonic","SED"),n(Ei,"opcode",248),n(Ei,"mode",y.Implied),n(Ei,"base_cycles",2),n(Ei,"affected_flags",ls);class Di extends ${execute_effect(){this.p.flag_i=1}}n(Di,"mnemonic","SEI"),n(Di,"opcode",120),n(Di,"mode",y.Implied),n(Di,"base_cycles",2),n(Di,"affected_flags",cs);class Ys extends ${execute_effect(){const e=this._arg.byte;this.p.flag_e?(e&D&&(this.p.flag_n=1),e&tt&&(this.p.flag_v=1),e&zo&&(this.p.flag_b=1),e&ls&&(this.p.flag_d=1),e&cs&&(this.p.flag_i=1),e&ce&&(this.p.flag_z=1),e&Ie&&(this.p.flag_c=1)):(e&D&&(this.p.flag_n=1),e&tt&&(this.p.flag_v=1),e&tn&&(this.p.flag_m=1),e&en&&(this.p.flag_x=1),e&ls&&(this.p.flag_d=1),e&cs&&(this.p.flag_i=1),e&ce&&(this.p.flag_z=1),e&Ie&&(this.p.flag_c=1))}}n(Ys,"mnemonic","SEP"),n(Ys,"opcode",226),n(Ys,"mode",y.Immediate),n(Ys,"base_cycles",3),n(Ys,"baseLength",2),n(Ys,"affected_flags",D|tt|tn|en|ls|cs|ce|Ie);class nt extends ${execute_effect(){this.save_m(this.addr,this.p.a)}}n(nt,"mnemonic","STA");(t=>{class e extends t{}n(e,"opcode",133),n(e,"mode",y.DirectPage),n(e,"base_cycles",4),n(e,"cycles_modifier",k|E),t.DirectPage=e;class s extends t{}n(s,"opcode",149),n(s,"mode",y.DirectPage_X),n(s,"base_cycles",5),n(s,"cycles_modifier",k|E),t.DirectPage_X=s;class i extends t{}n(i,"opcode",146),n(i,"mode",y.DirectPage_Indirect),n(i,"base_cycles",6),n(i,"cycles_modifier",k|E),t.DirectPage_Indirect=i;class a extends t{}n(a,"opcode",129),n(a,"mode",y.DirectPage_X_Indirect),n(a,"base_cycles",7),n(a,"cycles_modifier",k|E),t.DirectPage_X_Indirect=a;class r extends t{}n(r,"opcode",145),n(r,"mode",y.DirectPage_Indirect_Y),n(r,"base_cycles",7),n(r,"cycles_modifier",k|E),t.DirectPage_Indirect_Y=r;class o extends t{}n(o,"opcode",135),n(o,"mode",y.DirectPage_IndirectLong),n(o,"base_cycles",7),n(o,"cycles_modifier",k|E),t.DirectPage_IndirectLong=o;class l extends t{}n(l,"opcode",151),n(l,"mode",y.DirectPage_IndirectLong_Y),n(l,"base_cycles",7),n(l,"cycles_modifier",k|E),t.DirectPage_IndirectLong_Y=l;class u extends t{}n(u,"opcode",141),n(u,"mode",y.Absolute),n(u,"base_cycles",5),n(u,"cycles_modifier",k),t.Absolute=u;class d extends t{}n(d,"opcode",157),n(d,"mode",y.Absolute_X),n(d,"base_cycles",6),n(d,"cycles_modifier",k),t.Absolute_X=d;class p extends t{}n(p,"opcode",153),n(p,"mode",y.Absolute_Y),n(p,"base_cycles",6),n(p,"cycles_modifier",k),t.Absolute_Y=p;class f extends t{}n(f,"opcode",143),n(f,"mode",y.AbsoluteLong),n(f,"base_cycles",6),n(f,"cycles_modifier",k),t.AbsoluteLong=f;class h extends t{}n(h,"opcode",159),n(h,"mode",y.AbsoluteLong_X),n(h,"base_cycles",6),n(h,"cycles_modifier",k),t.AbsoluteLong_X=h;class _ extends t{}n(_,"opcode",131),n(_,"mode",y.StackRelative),n(_,"base_cycles",5),n(_,"cycles_modifier",k),t.StackRelative=_;class b extends t{}n(b,"opcode",147),n(b,"mode",y.StackRelative_Indirect_Y),n(b,"base_cycles",8),n(b,"cycles_modifier",k),t.StackRelative_Indirect_Y=b})(nt||(nt={}));class Fn extends ${execute_effect(){throw new Error("STP: Unsupported instruction.")}}n(Fn,"mnemonic","STP"),n(Fn,"opcode",219),n(Fn,"mode",y.Implied),n(Fn,"base_cycles",3);class Xi extends ${execute_effect(){this.save_x(this.addr,this.p.x)}}n(Xi,"mnemonic","STX");(t=>{class e extends t{}n(e,"opcode",134),n(e,"mode",y.DirectPage),n(e,"base_cycles",4),n(e,"cycles_modifier",_e|E),t.DirectPage=e;class s extends t{}n(s,"opcode",150),n(s,"mode",y.DirectPage_Y),n(s,"base_cycles",5),n(s,"cycles_modifier",_e|E),t.DirectPage_Y=s;class i extends t{}n(i,"opcode",142),n(i,"mode",y.Absolute),n(i,"base_cycles",5),n(i,"cycles_modifier",_e),t.Absolute=i})(Xi||(Xi={}));class Yi extends ${execute_effect(){this.save_x(this.addr,this.p.y)}}n(Yi,"mnemonic","STY");(t=>{class e extends t{}n(e,"opcode",132),n(e,"mode",y.DirectPage),n(e,"base_cycles",4),n(e,"cycles_modifier",_e|E),t.DirectPage=e;class s extends t{}n(s,"opcode",148),n(s,"mode",y.DirectPage_X),n(s,"base_cycles",5),n(s,"cycles_modifier",_e|E),t.DirectPage_X=s;class i extends t{}n(i,"opcode",140),n(i,"mode",y.Absolute),n(i,"base_cycles",5),n(i,"cycles_modifier",_e),t.Absolute=i})(Yi||(Yi={}));class qs extends ${execute_effect(){this.save_m(this.addr,O(0))}}n(qs,"mnemonic","STZ");(t=>{class e extends t{}n(e,"opcode",100),n(e,"mode",y.DirectPage),n(e,"base_cycles",4),n(e,"cycles_modifier",k|E),t.DirectPage=e;class s extends t{}n(s,"opcode",116),n(s,"mode",y.DirectPage_X),n(s,"base_cycles",5),n(s,"cycles_modifier",k|E),t.DirectPage_X=s;class i extends t{}n(i,"opcode",156),n(i,"mode",y.Absolute),n(i,"base_cycles",5),n(i,"cycles_modifier",k),t.Absolute=i;class a extends t{}n(a,"opcode",158),n(a,"mode",y.Absolute_X),n(a,"base_cycles",6),n(a,"cycles_modifier",k),t.Absolute_X=a})(qs||(qs={}));class Pt extends ${transfer_byte(e){return this.p.flag_n=e.byte&D,this.p.flag_z=e.byte===0,e}transfer_word(e){return this.p.flag_n=e.page&D,this.p.flag_z=e.word===0,e}transfer(e,s){return s?this.transfer_byte(e):this.transfer_word(e)}}n(Pt,"mode",y.Implied),n(Pt,"affected_flags",D|ce);class za extends Pt{execute_effect(){this.p.x=this.transfer(this.p.c,this.p.flag_x)}}n(za,"mnemonic","TAX"),n(za,"opcode",170),n(za,"base_cycles",2);class Qa extends Pt{execute_effect(){this.p.y=this.transfer(this.p.c,this.p.flag_x)}}n(Qa,"mnemonic","TAY"),n(Qa,"opcode",168),n(Qa,"base_cycles",2);class Wa extends Pt{execute_effect(){this.p.dp=this.transfer_word(this.p.c)}}n(Wa,"mnemonic","TCD"),n(Wa,"opcode",91),n(Wa,"base_cycles",2);class Ua extends Pt{execute_effect(){this.p.sp=this.transfer(this.p.c,this.p.flag_e)}}n(Ua,"mnemonic","TCS"),n(Ua,"opcode",27),n(Ua,"base_cycles",2);class Za extends Pt{execute_effect(){this.p.c=this.transfer_word(this.p.dp)}}n(Za,"mnemonic","TDC"),n(Za,"opcode",123),n(Za,"base_cycles",2);class Xa extends Pt{execute_effect(){this.p.c=this.transfer_word(this.p.sp)}}n(Xa,"mnemonic","TSC"),n(Xa,"opcode",59),n(Xa,"base_cycles",2);class Ya extends Pt{execute_effect(){this.p.x=this.transfer(this.p.sp,this.p.flag_x)}}n(Ya,"mnemonic","TSX"),n(Ya,"opcode",186),n(Ya,"base_cycles",2);class ja extends Pt{execute_effect(){this.p.a=this.transfer(this.p.x,this.p.flag_m)}}n(ja,"mnemonic","TXA"),n(ja,"opcode",138),n(ja,"base_cycles",2);class Ha extends Pt{execute_effect(){this.p.sp=this.transfer(this.p.x,this.p.flag_e)}}n(Ha,"mnemonic","TXS"),n(Ha,"opcode",154),n(Ha,"base_cycles",2);class qa extends Pt{execute_effect(){this.p.y=this.transfer(this.p.x,this.p.flag_x)}}n(qa,"mnemonic","TXY"),n(qa,"opcode",155),n(qa,"base_cycles",2);class Ga extends Pt{execute_effect(){this.p.a=this.transfer(this.p.y,this.p.flag_m)}}n(Ga,"mnemonic","TYA"),n(Ga,"opcode",152),n(Ga,"base_cycles",2);class Ka extends Pt{execute_effect(){this.p.x=this.transfer(this.p.y,this.p.flag_x)}}n(Ka,"mnemonic","TYX"),n(Ka,"opcode",187),n(Ka,"base_cycles",2);class sn extends ${execute_effect(){const e=this.addr;if(this.p.flag_m){const s=this.m.load_byte(e),i=s.byte&~this.p.a.byte;this.p.flag_z=(s.byte&this.p.a.byte)===0,this.m.save_byte(e,ae(i))}else{const s=this.m.load_word(e),i=s.word&~this.p.a.word;this.p.flag_z=(s.word&this.p.a.word)===0,this.m.save_word(e,O(i))}}}n(sn,"mnemonic","TRB"),n(sn,"affected_flags",ce);(t=>{class e extends t{}n(e,"opcode",20),n(e,"mode",y.DirectPage),n(e,"base_cycles",7),n(e,"cycles_modifier",rt|E),t.DirectPage=e;class s extends t{}n(s,"opcode",28),n(s,"mode",y.Absolute),n(s,"base_cycles",8),n(s,"cycles_modifier",rt),t.Absolute=s})(sn||(sn={}));class nn extends ${execute_effect(){const e=this.addr;if(this.p.flag_m){const s=this.m.load_byte(e),i=s.byte|this.p.a.byte;this.p.flag_z=(s.byte&this.p.a.byte)===0,this.m.save_byte(e,ae(i))}else{const s=this.m.load_word(e),i=s.word|this.p.a.word;this.p.flag_z=(s.word&this.p.a.word)===0,this.m.save_word(e,O(i))}}}n(nn,"mnemonic","TSB"),n(nn,"affected_flags",ce);(t=>{class e extends t{}n(e,"opcode",4),n(e,"mode",y.DirectPage),n(e,"base_cycles",7),n(e,"cycles_modifier",rt|E),t.DirectPage=e;class s extends t{}n(s,"opcode",12),n(s,"mode",y.Absolute),n(s,"base_cycles",8),n(s,"cycles_modifier",rt),t.Absolute=s})(nn||(nn={}));class Ni extends ${execute_effect(){throw new Error("WAI: Unsupported instruction.")}}n(Ni,"mnemonic","WAI"),n(Ni,"opcode",203),n(Ni,"mode",y.Implied),n(Ni,"base_cycles",3),n(Ni,"cycles_modifier",cd);class zn extends ${execute_effect(){}}n(zn,"mnemonic","WDM"),n(zn,"opcode",66),n(zn,"mode",y.Immediate),n(zn,"base_cycles",2);class Li extends ${execute_effect(){const e=this.p.c.byte,s=this.p.c.page;this.p.c=O(e<<8|s),this.p.flag_n=s&D,this.p.flag_z=s===0}}n(Li,"mnemonic","XBA"),n(Li,"opcode",235),n(Li,"mode",y.Implied),n(Li,"base_cycles",3),n(Li,"affected_flags",D|ce);class Mi extends ${execute_effect(){const e=this.p.flag_c,s=this.p.flag_e;this.p.flag_c=s,this.p.flag_e=e}}n(Mi,"mnemonic","XCE"),n(Mi,"opcode",251),n(Mi,"mode",y.Implied),n(Mi,"base_cycles",2),n(Mi,"affected_flags",tn|en|Ie);const dd={105:ze.Immediate_VariableA,101:ze.DirectPage,117:ze.DirectPage_X,114:ze.DirectPage_Indirect,97:ze.DirectPage_X_Indirect,113:ze.DirectPage_Indirect_Y,103:ze.DirectPage_IndirectLong,119:ze.DirectPage_IndirectLong_Y,109:ze.Absolute,125:ze.Absolute_X,121:ze.Absolute_Y,111:ze.AbsoluteLong,127:ze.AbsoluteLong_X,99:ze.StackRelative,115:ze.StackRelative_Indirect_Y,41:Qe.Immediate_VariableA,37:Qe.DirectPage,53:Qe.DirectPage_X,50:Qe.DirectPage_Indirect,33:Qe.DirectPage_X_Indirect,49:Qe.DirectPage_Indirect_Y,39:Qe.DirectPage_IndirectLong,55:Qe.DirectPage_IndirectLong_Y,45:Qe.Absolute,61:Qe.Absolute_X,57:Qe.Absolute_Y,47:Qe.AbsoluteLong,63:Qe.AbsoluteLong_X,35:Qe.StackRelative,51:Qe.StackRelative_Indirect_Y,10:Gt.Accumulator,6:Gt.DirectPage,22:Gt.DirectPage_X,14:Gt.Absolute,30:Gt.Absolute_X,144:io,176:no,208:ao,240:ro,16:oo,48:co,80:lo,112:uo,128:On,130:Pn,137:ws.Immediate_VariableA,36:ws.DirectPage,52:ws.DirectPage_X,44:ws.Absolute,60:ws.Absolute_X,0:vi,2:Si,24:wi,88:ki,216:xi,184:Ws,201:qe.Immediate_VariableA,197:qe.DirectPage,213:qe.DirectPage_X,210:qe.DirectPage_Indirect,193:qe.DirectPage_X_Indirect,209:qe.DirectPage_Indirect_Y,199:qe.DirectPage_IndirectLong,215:qe.DirectPage_IndirectLong_Y,205:qe.Absolute,221:qe.Absolute_X,217:qe.Absolute_Y,207:qe.AbsoluteLong,223:qe.AbsoluteLong_X,195:qe.StackRelative,211:qe.StackRelative_Indirect_Y,224:ei.Immediate_VariableX,228:ei.DirectPage,236:ei.Absolute,192:ti.Immediate_VariableX,196:ti.DirectPage,204:ti.Absolute,58:Kt.Accumulator,198:Kt.DirectPage,214:Kt.DirectPage_X,206:Kt.Absolute,222:Kt.Absolute_X,202:Ci,136:Oi,73:We.Immediate_VariableA,69:We.DirectPage,85:We.DirectPage_X,82:We.DirectPage_Indirect,65:We.DirectPage_X_Indirect,81:We.DirectPage_Indirect_Y,71:We.DirectPage_IndirectLong,87:We.DirectPage_IndirectLong_Y,77:We.Absolute,93:We.Absolute_X,89:We.Absolute_Y,79:We.AbsoluteLong,95:We.AbsoluteLong_X,67:We.StackRelative,83:We.StackRelative_Indirect_Y,26:Jt.Accumulator,230:Jt.DirectPage,246:Jt.DirectPage_X,238:Jt.Absolute,254:Jt.Absolute_X,232:Us,200:Zs,76:Is.Absolute,108:Is.Absolute_Indirect,124:Is.Absolute_X_Indirect,220:Is.Absolute_IndirectLong,92:Is.AbsoluteLong,32:Zi.Absolute,252:Zi.Absolute_X_Indirect,34:Zi.AbsoluteLong,169:Ue.Immediate_VariableA,165:Ue.DirectPage,181:Ue.DirectPage_X,178:Ue.DirectPage_Indirect,161:Ue.DirectPage_X_Indirect,177:Ue.DirectPage_Indirect_Y,167:Ue.DirectPage_IndirectLong,183:Ue.DirectPage_IndirectLong_Y,173:Ue.Absolute,189:Ue.Absolute_X,185:Ue.Absolute_Y,175:Ue.AbsoluteLong,191:Ue.AbsoluteLong_X,163:Ue.StackRelative,179:Ue.StackRelative_Indirect_Y,162:es.Immediate_VariableX,166:es.DirectPage,182:es.DirectPage_Y,174:es.Absolute,190:es.Absolute_Y,160:ts.Immediate_VariableX,164:ts.DirectPage,180:ts.DirectPage_X,172:ts.Absolute,188:ts.Absolute_X,74:ss.Accumulator,70:ss.DirectPage,86:ss.DirectPage_X,78:ss.Absolute,94:ss.Absolute_X,84:Pi,68:Ai,234:In,9:Ze.Immediate_VariableA,5:Ze.DirectPage,21:Ze.DirectPage_X,18:Ze.DirectPage_Indirect,1:Ze.DirectPage_X_Indirect,17:Ze.DirectPage_Indirect_Y,7:Ze.DirectPage_IndirectLong,23:Ze.DirectPage_IndirectLong_Y,13:Ze.Absolute,29:Ze.Absolute_X,25:Ze.Absolute_Y,15:Ze.AbsoluteLong,31:Ze.AbsoluteLong_X,3:Ze.StackRelative,19:Ze.StackRelative_Indirect_Y,244:Tn,212:Ii,98:Rn,72:En,218:Dn,90:Nn,139:Na,11:La,75:Ba,8:Ma,104:Ln,250:Mn,122:Bn,171:$a,43:Va,40:Fa,194:Xs,226:Ys,42:is.Accumulator,38:is.DirectPage,54:is.DirectPage_X,46:is.Absolute,62:is.Absolute_X,106:ns.Accumulator,102:ns.DirectPage,118:ns.DirectPage_X,110:ns.Absolute,126:ns.Absolute_X,96:Vn,107:$n,64:Ti,233:Xe.Immediate_VariableA,229:Xe.DirectPage,245:Xe.DirectPage_X,242:Xe.DirectPage_Indirect,225:Xe.DirectPage_X_Indirect,241:Xe.DirectPage_Indirect_Y,231:Xe.DirectPage_IndirectLong,247:Xe.DirectPage_IndirectLong_Y,237:Xe.Absolute,253:Xe.Absolute_X,249:Xe.Absolute_Y,239:Xe.AbsoluteLong,255:Xe.AbsoluteLong_X,227:Xe.StackRelative,243:Xe.StackRelative_Indirect_Y,56:Ri,120:Di,248:Ei,133:nt.DirectPage,149:nt.DirectPage_X,146:nt.DirectPage_Indirect,129:nt.DirectPage_X_Indirect,145:nt.DirectPage_Indirect_Y,135:nt.DirectPage_IndirectLong,151:nt.DirectPage_IndirectLong_Y,141:nt.Absolute,157:nt.Absolute_X,153:nt.Absolute_Y,143:nt.AbsoluteLong,159:nt.AbsoluteLong_X,131:nt.StackRelative,147:nt.StackRelative_Indirect_Y,219:Fn,134:Xi.DirectPage,150:Xi.DirectPage_Y,142:Xi.Absolute,132:Yi.DirectPage,148:Yi.DirectPage_X,140:Yi.Absolute,100:qs.DirectPage,116:qs.DirectPage_X,156:qs.Absolute,158:qs.Absolute_X,170:za,168:Qa,91:Wa,27:Ua,123:Za,59:Xa,186:Ya,138:ja,154:Ha,155:qa,152:Ga,187:Ka,20:sn.DirectPage,28:sn.Absolute,4:nn.DirectPage,12:nn.Absolute,203:Ni,66:zn,235:Li,251:Mi};class eg{constructor(){n(this,"_a",new zt(0));n(this,"_x",new zt(0));n(this,"_y",new zt(0));n(this,"_db",new zt(0));n(this,"_dp",new zt(0));n(this,"_sp",new zt(0));n(this,"_pb",new zt(0));n(this,"_pc",new zt(0));n(this,"_flag_n",0);n(this,"_flag_v",0);n(this,"_flag_m",1);n(this,"_flag_x",1);n(this,"_flag_d",0);n(this,"_flag_i",0);n(this,"_flag_z",0);n(this,"_flag_c",0);n(this,"_flag_e",0);n(this,"_flag_b",0)}get a(){return this._flag_m?this._a.as_byte():this._a.as_word()}set a(e){this._flag_m?this._a.byte=e.byte:this._a.word=e.word}get c(){return this._a.as_word()}set c(e){this._a.word=e.word}get x(){return this._flag_x?this._x.as_byte():this._x.as_word()}set x(e){this._flag_x?this._x.byte=e.byte:this._x.word=e.word}get y(){return this._flag_x?this._y.as_byte():this._y.as_word()}set y(e){this._flag_x?this._y.byte=e.byte:this._y.word=e.word}get db(){return this._db}set db(e){this._db.byte=e.byte}get dp(){return this._dp}set dp(e){this._flag_e||(this._dp.word=e.word)}get sp(){return this._sp}set sp(e){this._flag_e?this._sp.byte=e.byte:this._sp.word=e.word}get pb(){return this._pb}set pb(e){this._pb.byte=e.byte}get pc(){return this._pc}set pc(e){this._pc.word=e.word}get flag_n(){return this._flag_n}set flag_n(e){this._flag_n=e?1:0}get flag_v(){return this._flag_v}set flag_v(e){this._flag_v=e?1:0}get flag_m(){return this._flag_m}set flag_m(e){e||this.flag_e?this._flag_m=1:this._flag_m=0}get flag_x(){return this._flag_x}set flag_x(e){e||this.flag_e?(this._flag_x=1,this._x.page=0,this._y.page=0):this._flag_x=0}get flag_d(){return this._flag_d}set flag_d(e){this._flag_d=e?1:0}get flag_i(){return this._flag_i}set flag_i(e){this._flag_i=e?1:0}get flag_z(){return this._flag_z}set flag_z(e){this._flag_z=e?1:0}get flag_c(){return this._flag_c}set flag_c(e){this._flag_c=e?1:0}get flag_e(){return this._flag_e}set flag_e(e){e?(this._flag_e=1,this.flag_m=1,this.flag_x=1,this._sp.page=1):this._flag_e=0}get flag_b(){return this._flag_b}set flag_b(e){this._flag_b=e?1:0}get flags(){return this._flag_e?this.flag_c|this.flag_z<<1|this.flag_i<<2|this.flag_d<<3|this.flag_b<<4|this.flag_v<<6|this.flag_n<<7:this.flag_c|this.flag_z<<1|this.flag_i<<2|this.flag_d<<3|this.flag_x<<4|this.flag_m<<5|this.flag_v<<6|this.flag_n<<7}set flags(e){this.flag_e?(this.flag_c=e&Ie,this.flag_z=e&ce,this.flag_i=e&cs,this.flag_d=e&ls,this.flag_b=e&zo,this.flag_v=e&tt,this.flag_n=e&D):(this.flag_c=e&Ie,this.flag_z=e&ce,this.flag_i=e&cs,this.flag_d=e&ls,this.flag_x=e&en,this.flag_m=e&tn,this.flag_v=e&tt,this.flag_n=e&D)}reset(e){this.flag_e=e.flag_e,this.flag_n=e.flags>>7&1,this.flag_v=e.flags>>6&1,this.flag_m=e.flags>>5&1,this.flag_x=e.flags>>4&1,this.flag_d=e.flags>>3&1,this.flag_i=e.flags>>2&1,this.flag_z=e.flags>>1&1,this.flag_c=e.flags>>0&1,this.flag_b=0,this._a.long=e.a&Ui,this.x=O(e.x),this.y=O(e.y),this.sp=O(e.sp),this.dp=O(e.dp),this.db=ae(e.db),this._pb.long=e.pb,this._pc.long=e.pc}snapshot(){return{a:this._a.word,x:this.x.word,y:this.y.word,db:this.db.byte,dp:this.dp.word,sp:this.sp.word,pb:this.pb.byte,pc:this.pc.word,flag_n:this.flag_n,flag_v:this.flag_v,flag_m:this.flag_m,flag_x:this.flag_x,flag_d:this.flag_d,flag_i:this.flag_i,flag_z:this.flag_z,flag_c:this.flag_c,flag_e:this.flag_e,flag_b:this.flag_b}}}let tg=class{constructor(){n(this,"_program",{chunks:[]});n(this,"_processor",new eg);n(this,"_memory",new Jm(fr.LoROM));n(this,"_instructions",[]);n(this,"_errors",[]);n(this,"_max_instructions",100);n(this,"_memory_mapping",fr.LoROM);n(this,"set_max_instructions",e=>{this._max_instructions=Math.max(e,1)});n(this,"initial_a",0);n(this,"initial_x",0);n(this,"initial_y",0);n(this,"initial_sp",508);n(this,"initial_dp",0);n(this,"initial_db",0);n(this,"initial_flags",48);n(this,"initial_flag_e",0);n(this,"initial_memory",new Map);n(this,"_soft_initial_a",0);n(this,"_soft_initial_x",0);n(this,"_soft_initial_y",0);n(this,"_soft_initial_sp",508);n(this,"_soft_initial_dp",0);n(this,"_soft_initial_db",0);n(this,"_soft_initial_flags",48);n(this,"_soft_initial_flag_e",0);n(this,"_soft_initial_memory",new Map)}get instructions(){return this._instructions}get errors(){return this._errors}get cycles(){return this._instructions.reduce((e,s)=>e+s.cycles,0)}get length(){return this._program.chunks.reduce((e,s)=>e+s.bytes.length,0)}get snapshot(){return this._processor.snapshot()}get memory(){return this._memory.as_map()}get initial_ram_address(){return this._memory_mapping.ram_initial_address.long}get initial_rom_address(){return this._memory_mapping.rom_initial_address.long}get sp(){return this._processor.sp.word}get memory_mapping(){return this._memory_mapping}read_byte(e){return this._memory.load_byte_raw(B(e))}set_program(e){this._program=e}run(){this.reset_processor(!0),this.reset_memory(!0),this._instructions=[this._initial_instruction()],this._errors=[];try{for(;;){const e=this._instructions.length,s=B(this._processor.pb.byte<<16|this._processor.pc.word),i=this._next_instruction(e,s);if(!i)break;if(this._instructions.length-1>=this._max_instructions){const a=`Reached the maximum amount of instructions (${this._max_instructions}).`;this._errors.push(a);break}this._instructions.push(i),i.execute()}}catch(e){e instanceof Error?this._errors.push(e.message):this._errors.push("Execution failed: unknown error.")}}run_until(e){this.reset_processor(!1),this.reset_memory(!1);try{for(const s of this._instructions)if(s.execute(),s.id===e)break}catch{}}reset_processor(e){e&&(this._soft_initial_a=this.initial_a,this._soft_initial_x=this.initial_x,this._soft_initial_y=this.initial_y,this._soft_initial_db=this.initial_db,this._soft_initial_dp=this.initial_dp,this._soft_initial_sp=this.initial_sp,this._soft_initial_flags=this.initial_flags,this._soft_initial_flag_e=this.initial_flag_e),this._processor.reset({a:this._soft_initial_a,x:this._soft_initial_x,y:this._soft_initial_y,db:this._soft_initial_db,dp:this._soft_initial_dp,sp:this._soft_initial_sp,flags:this._soft_initial_flags,flag_e:this._soft_initial_flag_e,pb:this._memory_mapping.rom_initial_address.bank,pc:this._memory_mapping.rom_initial_address.word})}reset_memory(e){this._memory.reset(this._memory_mapping);for(const s of this._program.chunks)for(let i=0;i<s.bytes.length;++i){const a=B(s.origin+i);this._memory.save_byte(a,ae(s.bytes[i]),!0)}e&&(this._soft_initial_memory=this.initial_memory);for(const[s,i]of this._soft_initial_memory)this._memory.save_byte(B(s),ae(i))}_opcode(e){return this._memory.load_byte_raw(e)}_arg(e){const s=this._memory.load_byte_raw(B(e.long+1))??0,i=(this._memory.load_byte_raw(B(e.long+2))??0)<<8,a=(this._memory.load_byte_raw(B(e.long+3))??0)<<16;return B(s+i+a)}_initial_instruction(){const e=new Cn(0,B(0),this._processor,this._memory);return e.execute(),e}_next_instruction(e,s){const i=this._opcode(s);if(i===void 0)return;const a=dd[i];return new a(e,this._arg(s),this._processor,this._memory)}};function Dr(t){const e=new Set;let s=t;return function(){const[a,r]=At(s);Yt(()=>(e.add(r),()=>e.delete(r)),[]);const o=C(l=>{s=l,e.forEach(u=>u(l))},[]);return[a,o]}}const Cs="Emulator",Ne=new tg,sg=`; This is an example program that doesn't mean much.

JSL .store_data

org $818000

.store_data:
  PHK : PLB
  LDX #$02
.store_data_loop:
  LDA .data,x : STA $10,x
  DEX : BPL .store_data_loop
  RTL

.data:
  db $0A, $0B, $0C
`,ig=j.object({a:j.number(),x:j.number(),y:j.number(),sp:j.number(),dp:j.number(),db:j.number(),flags:j.number()}),ng={a:0,x:0,y:0,sp:508,dp:0,db:0,flags:48},ud=()=>ri(`${Cs}.code`,sg),hd=()=>Ve(`${Cs}.initialState`,ng,ig.parse),pd=()=>Ms(`${Cs}.maxInstructions`,100),ag=Dr([]),rg=Dr(Ne.snapshot),og=Dr(-1),cg=Dr(""),lg=()=>Ms(`${Cs}.memory.baseAddress`,8257536),dg=()=>Oe(`${Cs}.tab.initialState.isVisible`,!0),ug=()=>Oe(`${Cs}.tab.log.isVisible`,!0),hg=()=>Oe(`${Cs}.tab.memory.isVisible`,!0),pg=()=>Oe(`${Cs}.tab.opcode.isVisible`,!0),fg=()=>Oe(`${Cs}.tab.tutorial.isVisible`,!1),yn=new rd;function Nr(){const[t]=ud(),[e,s]=ag(),[i,a]=rg(),[r,o]=og(),[l]=pd(),[u]=hd(),[d,p]=Gm("emulator"),f=C(()=>{yn.code=t.trimEnd(),yn.assemble(),Ne.set_program(yn.program),Ne.set_max_instructions(l),Ne.initial_a=u.a,Ne.initial_x=u.x,Ne.initial_y=u.y,Ne.initial_sp=u.sp,Ne.initial_dp=u.dp,Ne.initial_db=u.db,Ne.initial_flags=u.flags,yn.errors.length===0?(Ne.run(),d(),s([]),a(Ne.snapshot),o(-1)):s(yn.errors.map(b=>`Line ${b.range.line}: ${b.message}`))},[t,u,l,d,s]),h=C(b=>{Ne.run_until(b),d(),o(b)},[d]),_=C(b=>Ne.read_byte(b),[p]);return{compilationErrors:e,cycles:Ne.cycles,executionErrors:Ne.errors,initialRamAddress:Ne.initial_ram_address,initialRomAddress:Ne.initial_rom_address,instructions:Ne.instructions,length:Ne.length,memoryMapping:Ne.memory_mapping,readByte:_,run:f,runUntil:h,selectedInstructionId:r,snapshot:i,stackPointer:Ne.sp}}function mg(){const{run:t}=Nr(),e=me(()=>[{key:"e",ctrl:!0,onPress:t},{key:"m",ctrl:!0,onPress:t}],[t]);return dn(e),null}function gg({labelOn:t,labelOff:e,onChange:s,size:i,value:a}){return t??(t="1".repeat(i)),e??(e="0".repeat(i)),c("div",{className:"Bitmask",children:rs(i).map(r=>{const o=i-r-1,l=a>>o&1,u=a&~(1<<o)|(~l&1)<<o;return c("span",{onClick:()=>s(u),children:l?t.charAt(r):e.charAt(r)})})})}function Qo({format:t,max:e,min:s,monospace:i,onChange:a,pattern:r,placeholder:o,prefix:l="",size:u,type:d,value:p}){const f=Le(null),h=Le(p),_=C(()=>{if(!f.current)return;const W=f.current.selectionStart,T=f.current.selectionEnd;f.current.value=h.current,d==="text"&&(f.current.selectionStart=W&&W-1,f.current.selectionEnd=T&&T-1)},[d]),b=C(W=>{var T;W.preventDefault(),(T=f.current)==null||T.focus()},[]),w=C(W=>{W.stopPropagation();const T=W.currentTarget.value;if((!r||r.test(T))&&(u===void 0||T.length<=u)){const R=a(T);R===void 0?h.current=T:(R!==T&&_(),h.current=R)}else f.current&&_();t&&(h.current=t(h.current))},[t,a,r,_,u]),g=C(W=>{W.stopPropagation()},[]);return c("div",{class:i?"Input monospace":"Input",onMouseDown:b,children:[l&&c("span",{class:"Input_Prefix",children:l}),c("input",{max:e,min:s,onChange:w,onKeyDown:g,placeholder:o,ref:f,size:u,spellcheck:!1,type:d,value:p})]})}const Kc=(t,e,s)=>{if(isNaN(t))return"";const i=ks[s][e];return e===X.Bin?ll(t,i):e===X.Dec?yr(t,i):ot(t,i)},bg=t=>t.toUpperCase(),_g=(t,e)=>(t=isNaN(t)?0:t,e=isNaN(e)?0:e,t===e);function As({encoding:t,onChange:e,unit:s,value:i,...a}){const[r,o]=At(()=>Kc(i,t,s)),l=C(d=>o(Kc(d,t,s)),[t,s]),u=C(d=>{const p=parseInt(d,Ji[t]);isNaN(p)?(e(0),o("")):(e(p),o(d.toUpperCase()))},[t,e]);return Yt(()=>{_g(i,parseInt(r,Ji[t]))||l(i)},[t,l,s,i]),c(Qo,{format:bg,monospace:!0,onChange:u,pattern:xf[t],prefix:Co[t],size:ks[s][t],type:"text",value:r,...a})}function yg(){const[t,e]=dg(),[s,i]=hd(),a=C(f=>i(h=>({...h,a:f})),[i]),r=C(f=>i(h=>({...h,x:f})),[i]),o=C(f=>i(h=>({...h,y:f})),[i]),l=C(f=>i(h=>({...h,sp:f})),[i]),u=C(f=>i(h=>({...h,dp:f})),[i]),d=C(f=>i(h=>({...h,db:f})),[i]),p=C(f=>i(h=>({...h,flags:f})),[i]);return c(It,{isVisible:t,label:"Initial State",onChange:e,children:c("div",{className:"App_SectionCluster",children:[c(ne,{label:"A",size:"md",children:c(As,{encoding:X.Hex,onChange:a,placeholder:"0000",unit:be.Word,value:s.a})}),c(ne,{label:"X",size:"md",children:c(As,{encoding:X.Hex,onChange:r,placeholder:"0000",unit:be.Word,value:s.x})}),c(ne,{label:"Y",size:"md",children:c(As,{encoding:X.Hex,onChange:o,placeholder:"0000",unit:be.Word,value:s.y})}),c(ne,{label:"SP",size:"md",children:c(As,{encoding:X.Hex,onChange:l,placeholder:"01FC",unit:be.Word,value:s.sp})}),c(ne,{label:"DP",size:"md",children:c(As,{encoding:X.Hex,onChange:u,placeholder:"0000",unit:be.Word,value:s.dp})}),c(ne,{label:"DB",size:"md",children:c(As,{encoding:X.Hex,onChange:d,placeholder:"00",unit:be.Byte,value:s.db})}),c(ne,{label:"Flags",size:"md",children:c(gg,{labelOn:"NVMXDIZC",labelOff:"nvmxdizc",onChange:p,size:8,value:s.flags})})]})})}function vg(t,e){const s=Le(!1),i=Le(0),a=C(l=>{s.current=!0,i.current=l.clientY},[]),r=C(l=>{if(l.preventDefault(),s.current&&t.current){const u=l.clientY-i.current;i.current=l.clientY,e(cn(u/t.current.clientHeight,-1,1))}},[t.current,e]),o=C(()=>{s.current=!1},[r]);return Yt(()=>(window.addEventListener("mousemove",r),window.addEventListener("mouseup",o),()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o)}),[r,o]),{handleMouseDown:a,handleMouseMove:r,handleMouseUp:o}}function wg(t,e){return{handleScroll:C(i=>{i.preventDefault(),t.current&&e(cn(i.deltaY/t.current.clientHeight,-1,1))},[t.current,e])}}function xg(t,e){const s=Le(null),i=Le(0),[a,r]=At(0);Yt(()=>{r(0),i.current=0},[t]);const o=C((h,_)=>{const w=(t.length-e)/t.length,g=i.current+h/_;i.current=cn(g,0,w),r(Math.floor(i.current*t.length))},[t.length,e]),l=C(h=>o(h,1),[o]),u=C(h=>o(h,t.length/3),[t.length,o]),d=vg(s,l),p=wg(s,u),f=me(()=>t.slice(a,a+e),[a,t,e]);return{elementRef:s,index:a,items:f,mouseDrag:d,mouseScroll:p}}function fd({columns:t,isRowClickable:e=()=>!1,isRowSelected:s=()=>!1,items:i,maxVisibleItems:a,onClickRow:r=()=>{},withFooter:o=!1}){a=a??i.length;const l=xg(i,Math.min(a,i.length)),u=me(()=>t.map(f=>Ct([[f.align,!!f.align&&f.align!=="left"],[`space-${f.space}`,!!f.space]])),[t]),d=`${100*l.items.length/i.length}%`,p=`${100*l.index/i.length}%`;return c("div",{className:"Table",children:[c("table",{children:[c("thead",{children:c("tr",{className:"Table_Header",children:t.map((f,h)=>c("td",{className:u[h],children:f.header}))})}),c("tbody",{ref:l.elementRef,onWheel:l.mouseScroll.handleScroll,children:l.items.map((f,h)=>{const _=Ct([["selected",s(f)],["clickable",e(f)]]);return c("tr",{className:_,onClick:()=>r(f),children:t.map((b,w)=>{var W;const g={prev:l.items[h-1],next:l.items[h+1]},q=((W=b==null?void 0:b.colSpan)==null?void 0:W.call(b,f,g))??1;return q>0?c("td",{className:u[w],colSpan:q,children:b.value(f,g)}):null})})})}),c("tfoot",{children:o&&c("tr",{className:"Table_Footer",children:t.map((f,h)=>c("td",{className:u[h],children:f.footer}))})})]}),l.items.length<i.length&&c("div",{className:"Table_Scrollbar",children:[c("div",{className:"Table_Scrollbar_Spacer top",children:""}),c("div",{className:"Table_Scrollbar_Track",children:c("div",{className:"Table_Scrollbar_Handle",onDrag:f=>f.currentTarget,style:{height:d,top:p},onMouseDown:l.mouseDrag.handleMouseDown,onMouseMove:l.mouseDrag.handleMouseMove,onMouseUp:l.mouseDrag.handleMouseUp})}),o&&c("div",{className:"Table_Scrollbar_Spacer bottom",children:""})]})]})}function Wo({children:t,monospace:e=!1,position:s="top",tooltip:i}){const a=Ct([[`Tooltip_Content ${s}`,!0],["monospace",e]]);return c("div",{className:"Tooltip",children:c("div",{className:a,"data-tooltip":i,children:t})})}const kg=Co[X.Bin],Sg=Co[X.Hex],po=(t,e,s)=>{const i=ks[s],a=ll(t,i[X.Bin]),r=yr(t),o=ot(t,i[X.Hex]),l=`${kg}${a} / ${r} / ${Sg}${o}`;return e===X.Bin?{tooltip:l,formatted:a}:e===X.Dec?{tooltip:l,formatted:r}:{tooltip:l,formatted:o}};function mr({dim:t,encoding:e,unit:s,value:i}){const{formatted:a,tooltip:r}=me(()=>po(i,e,s),[e,s,i]);return c(Wo,{monospace:!0,tooltip:r,children:t?c("dim",{children:a}):a})}function Cg({cycles:t,compilationErrors:e,executionErrors:s,instructions:i,length:a,onClickValidInstruction:r,selectedInstructionId:o,snapshot:l}){if(e.length>0)return c("div",{children:[c("div",{className:"SnesLog_CompilationErrorLabel",children:e.length===1?"Compilation error:":"Compilation errors:"}),c("ul",{className:"SnesLog_CompilationErrors",children:e.map(d=>c("li",{children:d}))})]});if(i.length===0)return c("div",{className:"SnesLog",children:"Run the emulator to see the processor's state."});const u=`${i.length}`.length;return c("div",{className:"SnesLog",children:[c(fd,{columns:[{header:"Id",footer:c(Jc,{id:i.length-1,length:u}),value:d=>c(Jc,{id:d.id,length:u})},{header:"PC",footer:c(el,{pb:l.pb,pc:l.pc}),value:d=>c(el,{pb:d.pb,pc:d.pc})},{header:"Instruction",value:d=>c(Og,{instruction:d})},{header:"A",footer:c(mi,{is8Bit:!!l.flag_m,value:l.a}),value:(d,{prev:p})=>{var f;return d.snapshot?c(mi,{didChange:gi(d.snapshot.a,(f=p==null?void 0:p.snapshot)==null?void 0:f.a),is8Bit:!!d.snapshot.flag_m,value:d.snapshot.a}):c("span",{className:"SnesLog_Error",children:"*** Error ***"})},colSpan:d=>d.snapshot?1:7},{header:"X",footer:c(mi,{is8Bit:!!l.flag_x,value:l.x}),value:(d,{prev:p})=>{var f;return d.snapshot&&c(mi,{didChange:gi(d.snapshot.x,(f=p==null?void 0:p.snapshot)==null?void 0:f.x),is8Bit:!!d.snapshot.flag_x,value:d.snapshot.x})},colSpan:d=>d.snapshot?1:0},{header:"Y",footer:c(mi,{is8Bit:!!l.flag_x,value:l.y}),value:(d,{prev:p})=>{var f;return d.snapshot&&c(mi,{didChange:gi(d.snapshot.y,(f=p==null?void 0:p.snapshot)==null?void 0:f.y),is8Bit:!!d.snapshot.flag_x,value:d.snapshot.y})},colSpan:d=>d.snapshot?1:0},{header:"SP",footer:c(Ia,{value:l.sp}),value:(d,{prev:p})=>{var f;return d.snapshot&&c(Ia,{didChange:gi(d.snapshot.sp,(f=p==null?void 0:p.snapshot)==null?void 0:f.sp),value:d.snapshot.sp})},colSpan:d=>d.snapshot?1:0},{header:"DP",footer:c(Ia,{value:l.dp}),value:(d,{prev:p})=>{var f;return d.snapshot&&c(Ia,{didChange:gi(d.snapshot.dp,(f=p==null?void 0:p.snapshot)==null?void 0:f.dp),value:d.snapshot.dp})},colSpan:d=>d.snapshot?1:0},{header:"DB",footer:c(tl,{value:l.db}),value:(d,{prev:p})=>{var f;return d.snapshot&&c(tl,{didChange:gi(d.snapshot.db,(f=p==null?void 0:p.snapshot)==null?void 0:f.db),value:d.snapshot.db})},space:"right",colSpan:d=>d.snapshot?1:0},{header:"Flags",footer:c(sl,{flags:Xr(l)}),value:(d,{prev:p})=>d.snapshot&&c(sl,{flags:Xr(d.snapshot),prevFlags:(p==null?void 0:p.snapshot)&&Xr(p.snapshot)}),colSpan:d=>d.snapshot?1:0},{header:"C",footer:t,value:d=>d.cycles,align:"right"},{header:"L",footer:a,value:d=>d.length,align:"right",space:"left"}],isRowClickable:d=>!!d.snapshot,isRowSelected:d=>d.id===o,items:i,onClickRow:d=>{if(d.snapshot){const p=d.id===o?-1:d.id;r(p)}},maxVisibleItems:16,withFooter:!0}),s.length>0&&c("div",{className:"SnesLog_ExecutionErrors",children:s.map(d=>c("div",{children:d}))})]})}function Jc({id:t,length:e}){return c("span",{children:ln(`${t}`,e," ")})}function el({pb:t,pc:e}){return c("span",{children:B(t<<16|e).format_address()})}function mi({didChange:t=!1,is8Bit:e,value:s}){const i=po(s&255,X.Hex,be.Byte),a=po(s,X.Hex,be.Word),r=`8-bit: ${i.tooltip}
16-bit: ${a.tooltip}`;return c("span",{className:t?"SnesLog_Highlight":void 0,children:c(Wo,{monospace:!0,tooltip:r,children:e?c(ji,{children:[c("dim",{children:ot(s>>8&255,2)}),c("span",{children:i.formatted})]}):c("span",{children:a.formatted})})})}function tl({didChange:t,value:e}){const[s,i]=[X.Hex,be.Byte];return c("span",{className:t?"SnesLog_Highlight":void 0,children:c(mr,{encoding:s,unit:i,value:e})})}function Ia({didChange:t=!1,value:e}){const[s,i]=[X.Hex,be.Word];return c("span",{className:t?"SnesLog_Highlight":void 0,children:c(mr,{encoding:s,unit:i,value:e})})}function sl({flags:t,prevFlags:e=""}){return c("span",{children:t.split("").map((s,i)=>{const a=s===s.toUpperCase()&&s!=="-",r=e[i]??s,o=s!==r?"SnesLog_Highlight":void 0;return a?c("span",{className:o,children:s}):c("dim",{className:o,children:s})})})}function Og({instruction:t}){const e=t.bytes.map(i=>ot(i,2)).join(" "),s=t.has_addr?`${e} ${t.effective_addr.format_address()}`:e;return c("span",{className:"flex",children:s?c(Wo,{monospace:!0,tooltip:s,children:t.text_with_value}):t.text_with_value})}const Xr=t=>t.flag_e?[t.flag_n?"N":"n",t.flag_v?"V":"v","-",t.flag_b?"B":"b",t.flag_d?"D":"d",t.flag_i?"I":"i",t.flag_z?"Z":"z",t.flag_c?"C":"c"].join(""):[t.flag_n?"N":"n",t.flag_v?"V":"v",t.flag_m?"M":"m",t.flag_x?"X":"x",t.flag_d?"D":"d",t.flag_i?"I":"i",t.flag_z?"Z":"z",t.flag_c?"C":"c"].join(""),gi=(t,e)=>e!==void 0&&t!==e;function Pg(){const t=Nr(),[e,s]=ug(),i=C(a=>t.runUntil(a),[t.runUntil]);return c(It,{isVisible:e,label:"Log",onChange:s,children:c(Cg,{cycles:t.cycles,compilationErrors:t.compilationErrors,executionErrors:t.executionErrors,instructions:t.instructions,length:t.length,onClickValidInstruction:i,selectedInstructionId:t.selectedInstructionId,snapshot:t.snapshot})})}const zs=Ki[Ot.Dark],Qs=Ki[Ot.Light],Ag=(t,e)=>{const s=e===Ce.Disco?zs.color[Ce.Blue]:zs.color[e],i=e===Ce.Disco?Qs.color[Ce.Blue]:Qs.color[e];return t===Ot.Dark?Oc({theme:"dark",settings:{background:zs.background2,foreground:zs.neutral1,caret:s.primary2,selection:s.highlight1,selectionMatch:s.highlight1,lineHighlight:s.highlight2,gutterBackground:zs.background1,gutterForeground:zs.neutral2,gutterActiveForeground:zs.neutral1,fontFamily:"monospace",fontSize:"1em"},styles:[{tag:Ae.comment,color:"#78a178"},{tag:Ae.derefOperator,color:"#a1a1a1"},{tag:Ae.keyword,color:"#81a1c1"},{tag:Ae.labelName,color:"#b45f8a"},{tag:Ae.macroName,color:"#f6ad55"},{tag:Ae.number,color:"#c57d83"},{tag:Ae.paren,color:"#8c81b4"},{tag:Ae.variableName,color:"#e0cf81"}]}):Oc({theme:"light",settings:{background:Qs.background2,foreground:Qs.neutral1,caret:i.primary2,selection:i.highlight1,selectionMatch:i.highlight1,lineHighlight:i.highlight2,gutterBackground:Qs.background1,gutterForeground:Qs.neutral2,gutterActiveForeground:Qs.neutral1,fontFamily:"monospace",fontSize:"1em"},styles:[{tag:Ae.comment,color:"#365736"},{tag:Ae.derefOperator,color:"#777777"},{tag:Ae.keyword,color:"#384d61"},{tag:Ae.labelName,color:"#662b49"},{tag:Ae.macroName,color:"#ed8936"},{tag:Ae.number,color:"#733d41"},{tag:Ae.paren,color:"#504673"},{tag:Ae.variableName,color:"#968845"}]})},Ig={completionKeymap:!1,foldGutter:!1,foldKeymap:!1,highlightSpecialChars:!1,lintKeymap:!1,searchKeymap:!1};function Tg({extensions:t,onChange:e,value:s}){const i=Il(),[a]=Tl(),r=me(()=>Ag(i.mode,a),[i.mode,a]);return c("div",{className:"CodeEditor",children:c(Ku,{autoFocus:!0,basicSetup:Ig,extensions:t,indentWithTab:!1,height:"20em",onChange:e,theme:r,value:s})})}const Rg=/^[+-]?[0-9]*$/;function Lr({isInteger:t=!1,onChange:e,value:s,...i}){const a=C(r=>{const o=cn(Number.parseInt(r),i.min??-1/0,i.max??1/0),l=e(o)??o;return Number.isNaN(l)?"":`${l}`},[t,e]);return c(Qo,{...i,monospace:!0,onChange:a,type:"number",pattern:t?Rg:void 0,value:Number.isNaN(s)?"":`${s}`})}const Yr=new rd,Eg=Ju(t=>{const e=[];return Yr.code=t.state.doc.toString(),Yr.assemble(),Dg(Yr.errors).forEach(s=>{e.push({...s.range,message:s.message,severity:"error"})}),e});function Dg(t){const e=[...t].sort((a,r)=>a.range.from===r.range.from?a.range.to-r.range.to:r.range.from-a.range.from),s=[];let i=1/0;for(const a of e)a.range.to<=i&&(s.push(a),i=a.range.to);return s}function Ng(){const[t,e]=Lo(yo,_o,1e3),s=C(i=>{navigator.clipboard.writeText(i),e()},[]);return[t,s]}const Lg=[Mm(),Eg];function Mg(){const[t,e]=Ng(),s=Nr(),[i,a]=ud(),r=C(()=>a(""),[a]),o=C(()=>e(i),[i,e]),[l,u]=pd(),d=me(()=>[{icon:Ph,onClick:s.run,tooltip:"Run (Ctrl+E)"},{icon:er,onClick:r,tooltip:"Clear editor"},{icon:t,onClick:o,tooltip:"Copy code"}],[t,r,o,s.run]);return c(No,{actions:d,label:"Editor",children:c("div",{className:"App_SectionCol",children:[c(Tg,{extensions:Lg,onChange:a,value:i}),c(ne,{inline:!0,label:"Max Instructions",size:"md",children:c(Lr,{isInteger:!0,max:1e3,min:1,onChange:u,placeholder:"100",value:l})})]})})}const jr=16777215,vn=16777200;function Bg({baseAddress:t,columnCount:e=16,initialRamAddress:s,initialRomAddress:i,memoryMapping:a,stackAddress:r,memory:o,onChangeAddress:l}){const[u,d]=At();s=a.map_safe(B(s)),i=a.map_safe(B(i)),r=a.map_safe(B(r)),Yt(()=>d(void 0),[o]);const p=C(()=>{l(t+16&jr)},[t]),f=C(()=>{l(t-16&jr)},[t]),h=C(()=>{l(s)},[t,s]),_=C(()=>{l(i)},[t,i]),b=C(()=>{l(r&vn)},[t,r]),w=a.map_safe(B(t))&vn,g=w===(s&vn),q=w===(i&vn),W=w===(r&vn);return c("div",{className:"SnesMemory",children:[c("div",{className:"SnesMemory_Table",children:[c("div",{className:"SnesMemory_Table_Group",children:[c("div",{className:"SnesMemory_Table_Corner",children:"".repeat(6)}),c("div",{className:"SnesMemory_Table_RowIndex",children:rs(o.length/e).map(T=>c("div",{children:ot(t+e*T&jr,6)}))})]}),c("div",{className:"SnesMemory_Table_Group flex_1",children:[c("div",{className:"SnesMemory_Table_ColIndex",children:rs(e).map(T=>c("div",{children:ot(T,1)}))}),c("div",{className:"SnesMemory_Table_Grid",children:o.map((T,R)=>{const V=(u==null?void 0:u.index)===R,re=t+R&16777215,xe=Ct([["selected",V],["stack",a.map_safe(B(re))===r]]);return c("div",{className:xe,onClick:()=>d(V?void 0:{address:re,byte:T??0,index:R}),children:T===void 0?c(mr,{dim:!0,encoding:X.Hex,unit:be.Byte,value:0}):c(mr,{encoding:X.Hex,unit:be.Byte,value:T})})})})]})]}),c("div",{className:"SnesMemory_Footer",children:c(ne,{inline:!0,label:"Base address",size:"md",children:c("div",{className:"App_SectionCluster",children:[c(Nt,{label:"-10",onClick:f}),c(As,{encoding:X.Hex,onChange:l,placeholder:"7E0000",unit:be.Long,value:t}),c(Nt,{label:"+10",onClick:p}),c("div",{className:"divider"}),c(Nt,{isSelected:g,label:"RAM",onClick:h}),c(Nt,{isSelected:q,label:"ROM",onClick:_}),c(Nt,{isSelected:W,label:"Stack",onClick:b})]})})})]})}const $g=8*16;function Vg(){const t=Nr(),[e,s]=lg(),[i,a]=hg(),r=me(()=>rs($g).map(l=>t.readByte(e+l)),[e,t.readByte]),o=t.selectedInstructionId===-1?"Memory":`Memory (instruction ${t.selectedInstructionId})`;return c(It,{isVisible:i,label:o,onChange:a,children:c("div",{className:"App_SectionCol",children:c(Bg,{baseAddress:e,initialRamAddress:t.initialRamAddress,initialRomAddress:t.initialRomAddress,memory:r,memoryMapping:t.memoryMapping,stackAddress:t.stackPointer,onChangeAddress:s})})})}function md(t){return c(Qo,{...t,type:"text"})}const Fg=["n","v","m","x","d","i","z","c"],zg=[{header:"Hex",value:t=>ot(t.opcode,2)},{header:"Mode",value:t=>t.mode.text||"<implied>"},{header:"Example",value:t=>`${t.mnemonic} ${t.mode.format({arg:B(0),arg_size:t.mode.base_length-1})}`},{header:"Flags",value:t=>Fg.map((e,s)=>t.affected_flags&1<<7-s?e:"-").join("")},{header:"Cycles",value:t=>{let e=`${t.base_cycles}`;return t.cycles_modifier&k&&(e+="-m"),t.cycles_modifier&rt&&(e+="-2*m"),t.cycles_modifier&_e&&(e+="-x"),t.cycles_modifier&Er&&(e+="-e"),t.cycles_modifier&E&&(e+="+d"),t.cycles_modifier&ms&&(e+="+p"),t.cycles_modifier&st&&(e+="+p"),t.cycles_modifier&od&&(e+="+b"),t.cycles_modifier&Fo&&(e+="+7*t"),t.cycles_modifier&cd&&(e+="+r"),e},align:"right"},{header:"Length",value:t=>{let e=`${t.mode.base_length}`;return t.mode.length_modifier&k&&(e+="-m"),t.mode.length_modifier&_e&&(e+="-x"),e},align:"right"}];function Qg(){const[t,e]=pg(),[s,i]=cg(),a=me(()=>Object.values(dd).filter(r=>r.mnemonic===s.toUpperCase()).sort((r,o)=>r.opcode<o.opcode?-1:r.opcode>o.opcode?1:0),[s]);return c(It,{isVisible:t,label:"Search Opcode",onChange:e,children:c("div",{className:"App_SectionCol",children:[c(md,{onChange:i,placeholder:"ADC",size:3,value:s}),a.length>0&&c(fd,{columns:zg,items:a})]})})}const Wg=[{name:"<code>808000</code>-<code>FFFFFF</code>",description:"ROM",keybindings:[]},{name:"<code>008000</code>-<code>7DFFFF</code>",description:"Mirror of <code>808000</code>-<code>FDFFFF</code>",keybindings:[]},{name:"<code>7E0000</code>-<code>7E1FFF</code> <code>7E2000</code>-<code>7FFFFF</code>",description:"WRAM",keybindings:[]},{name:"<code>000000</code>-<code>3F1FFF</code> <code>7F0000</code>-<code>7F1FFF</code> <code>800000</code>-<code>BF1FFF</code>",description:"Mirror of <code>7E0000</code>-<code>7E1FFF</code>",keybindings:[]}],Ug=[{name:"PC",description:"Program Counter. A combination of the Program Bank and the 16-bit Program Counter. This is the program counter before the instruction executes.",keybindings:[]},{name:"A",description:"Accumulator. When in 8-bit mode, the high byte is dimmed.",keybindings:[]},{name:"X",description:"X index. When in 8-bit mode, the high byte is dimmed.",keybindings:[]},{name:"Y",description:"Y index. When in 8-bit mode, the high byte is dimmed.",keybindings:[]},{name:"SP",description:"Stack Pointer. In the <i>Memory</i> section, the stack pointer is marked with a colored outline.",keybindings:[]},{name:"DP",description:"Direct Page.",keybindings:[]},{name:"DB",description:"Data Bank.",keybindings:[]},{name:"Flags",description:"Processor status, NVMXDIZC in native mode and NV-BDIZC in emulation mode. Uppercase letters indicate set values, lowercase letters indicate cleared values.",keybindings:[]}],Zg=[{name:"m",description:"1 if the M flag is set, 0 if cleared.",keybindings:[]},{name:"x",description:"1 if the X flag is set, 0 if cleared.",keybindings:[]},{name:"e",description:"1 if the E flag is set, 0 if cleared.",keybindings:[]},{name:"d",description:"1 if the low byte of the direct page register is not zero, 0 otherwise.",keybindings:[]},{name:"p",description:"1 if the X flag is set or if the index crosses the page boundary while computing the effective address during the instruction, 0 otherwise.",keybindings:[]},{name:"b",description:"1 if branch has been taken, 0 otherwise.",keybindings:[]},{name:"t",description:"Amount of bytes transferred during a MVN or MVP.",keybindings:[]},{name:"r",description:"A variable amount due to processor restart.",keybindings:[]}];function Xg(){const[t,e]=fg();return c(le,{isVisible:t,onChangeVisibility:e,children:[c(le.Section,{title:"General",children:[c("div",{children:["This is a basic code editor, assembler, and emulator for the 65816. You can write ASM code and execute it, the result will be displayed in the ",c("i",{children:"Log"})," and ",c("i",{children:"Memory"})," sections. The emulator is a rough imitation of an actual SNES, simulating its processor and (partially) its memory."]}),c("div",{children:['You can run the emulator by pressing the "Play" button on the right side of the "Emulator" text or via the ',c("kbd",{children:"Ctrl-E"})," shortcut."]})]}),c(le.Section,{title:"The Processor",children:[c("div",{children:["Running the emulator will execute the code present in the editor and display the state of the processor (i.e., its registers) in the"," ",c("i",{children:"Log"})," section for each instruction, as well as the instruction's cycles and length (in bytes), represented by the C and L columns respectively."]}),c("div",{children:"The last row features the final state of the processor, where C represents the total amount of cycles taken by the program and L the total amount of bytes (note that L is not necessarily the sum of all instructions' lengths, as some may have been skipped or executed several times)."}),c("div",{children:"The processor is made of the following registers:"}),c(le.Actions,{actions:Ug}),c("div",{children:["All registers but the Program Counter indicate the state of the processor ",c("i",{children:"after"})," the instruction executed."]}),c("div",{children:"Colored values are values that changed compared to the previous instruction. You can hover an instruction to display its bytes and the effective address used by the instruction (in brackets), if applicable. Hovering a register shows its values in binary, decimal, and hexadecimal."})]}),c(le.Section,{title:"Memory",children:[c("div",{children:["The ",c("i",{children:"Memory"})," section represents both RAM and ROM. When executing a program, the code's bytes will be written in ROM. By default, this section will show the state of memory at the end of execution, but you can click on an instruction in the ",c("i",{children:"Log"})," section to show the state of memory at that moment (click again the selected instruction to show the final state)."]}),c("div",{children:"Memory follows a pattern similar to LoROM. Supported memory areas are:"}),c(le.Actions,{actions:Wg}),c("div",{children:["You can write to RAM during code execution, but not to ROM (it will result in an error). You can execute code from any location (e.g., you can ",c("code",{children:"JML"})," to RAM)."]}),c("div",{children:["Code execution always starts from address ",c("code",{children:"808000"})," (alias"," ",c("code",{children:"008000"}),")."]}),c("div",{children:"Dimmed values are values that have not been set by the user (both in RAM and ROM). The Stack Pointer address is marked with an outline."})]}),c(le.Section,{title:"The Language",children:[c("div",{children:["All operations are supported and assemble correctly; however the following operations are not implemented during emulation:"," ",c("code",{children:"BRK"}),", ",c("code",{children:"COP"}),", ",c("code",{children:"RTI"}),", ",c("code",{children:"STP"}),", and ",c("code",{children:"WAI"}),". In particular, anything that involves interrupts doesn't work. Opcodes can be written uppercase or lowercase, but not mixed."]}),c("div",{children:["Numbers can be specified in decimal form, binary (prefixed by a"," ",c("code",{children:"%"}),"), or hexadecimal (prefixed by a ",c("code",{children:"$"}),"). For example, the value 10 (decimal) can be written as ",c("code",{children:"10"}),","," ",c("code",{children:"%00001010"}),", or ",c("code",{children:"$0A"}),". Binaries can only be expressed with 8, 16, or 24 digits, and hexadecimals with 2, 4, or 6 digits (e.g., ",c("code",{children:"$1"})," is not valid). Based on their length in digits, values will always be assembled to the corresponding 8, 16, or 24 bit value. Decimals with 1-3 digits assemble to an 8-bit value, 4-5 to 16-bit, and 6-8 to 24-bit."]}),c("div",{children:["Labels represent a specific address in memory and are defined by specifying an alphanumeric sequence prefixed by a period and ending with a column (e.g., ",c("code",{children:".my_label:"}),"). To use a label you omit the column (e.g., ",c("code",{children:"BEQ .my_label"}),"). Labels can be used in branching operations, ",c("code",{children:"JMP"}),", ",c("code",{children:"JML"}),","," ",c("code",{children:"JSR"}),", ",c("code",{children:"JSL"}),", ",c("code",{children:"PER"}),", and anywhere you could put an absolute address (e.g., ",c("code",{children:"LDA .my_label,x"}),")."]}),c("div",{children:["You can define data tables with ",c("code",{children:"db"})," for 8-bit numbers,"," ",c("code",{children:"dw"})," for 16-bit numbers, and ",c("code",{children:"dl"})," for 24-bit numbers. Every table instruction must be followed by one or more comma-separated values of corresponding size. These values will be written directly into ROM in little endian format. Labels are not allowed in data tables. Examples:",c("div",{children:c("code",{children:["db $01, $02, $04, $08",c("br",{}),"dw $1234, %0110000001001111",c("br",{}),"dl %011000000100111100000000, 124711, $7E1233"]})})]}),c("div",{children:["You can change the code's PC with ",c("code",{children:"org"}),". For example, all code that follows ",c("code",{children:"org $818000"})," will be written in bank 81."]}),c("div",{children:["Every instruction, data table, change of origin, or label definition must either start on a new line or be separated by a column (e.g.,"," ",c("code",{children:"CLC : ADC #$10)."})]}),c("div",{children:["Line comments start with a semi-column (e.g.,"," ",c("code",{children:"; This is a comment"}),")."]})]}),c(le.Section,{title:"Initial State and Other Options",children:[c("div",{children:"For ease of use, you can specify the processor's initial state via the corresponding section. The initial state will take effect when running the emulator (it does not live update). You can specify a 16-bit value for A even if the M flag is set (i.e., A is 8-bit). If you specify a high byte for X or Y when the X flag is set, the high byte will automatically be set to 0 at runtime. Press on a flag to toggle its status (uppercase is set, lowercase is clear)."}),c("div",{children:"It's not possible to set memory's initial state (everything but ROM will be initialized to 0)."}),c("div",{children:"The emulator will always start in native mode (E flag clear)."}),c("div",{children:"The emulator will automatically stop when it tries to read an opcode from an address that has not been initialized, or if it exceeds the specified number of maximum instructions."})]}),c(le.Section,{title:"Searching Opcodes",children:[c("div",{children:["You can search for instructions in the ",c("i",{children:"Search Opcodes"})," section, by typing the instruction's mnemonic in the input field. The result will show all related instructions with their hex opcode, argument mode, example usage, flags affected, cycles used, and bytes required."]}),c("div",{children:"Cycles and bytes might be affected by the following modifiers:"}),c(le.Actions,{actions:Zg})]}),c(le.Section,{title:"Unexpected Results",children:c("div",{children:["If something is not working as you might expect or the result doesn't match with those of others emulators, then it might be a bug. Feel free to open a"," ",c(Ra,{href:"https://github.com/zuccha/smw-toolbox/issues/new?assignees=&labels=bug&projects=&template=bug_report.md&title=",label:"bug report"})," ","on GitHub."]})})]})}function Yg(){return c("div",{class:"App_Module",children:[c(mg,{}),c("div",{class:"App_ModuleBlock",children:[c(Mg,{}),c(yg,{}),c(Qg,{})]}),c("div",{class:"App_ModuleBlock",children:[c(Pg,{}),c(Vg,{}),c(Xg,{})]})]})}function ra(t,e,s){const{xStart:i,xEnd:a,yStart:r,yEnd:o}=t;return i<=e&&e<a&&r<=s&&s<o}const hs={},jg=t=>j.object({items:j.array(j.array(t)),height:j.number(),width:j.number()}),fn=(...t)=>wr(...t);function gd(t,e,s,i){const a=[];for(let r=0;r<e;++r){const o=[];for(let l=0;l<t;++l)o.push(s);a.push(o)}return{items:a,height:e,width:t}}gd.deps=fn();function mn(t,e,s=void 0){return s?{xStart:Math.max(0,s.xStart),xEnd:Math.min(t.width,s.xEnd),yStart:Math.max(0,s.yStart),yEnd:Math.min(t.height,s.yEnd)}:{xStart:0,xEnd:t.width,yStart:0,yEnd:t.height}}mn.deps=fn(["height","width"]);function bd(t,e,s,i){const a=mn(t);return ra(a,s,i)?t.items[i][s]:void 0}bd.deps=fn(["height","items","width"],[],[mn]);function _d(t,e,s){if(t.items.length!==t.height||t.items.some(a=>a.length!==t.width))return t;const i=[...t.items.map((a,r)=>[...a.map((o,l)=>s(l,r,o))])];return{...t,items:i}}_d.deps=fn(["height","items","width"]);function yd(t,e,s,i,a){const r=mn(t,e,void 0);if(!ra(r,s,i))return t;const o=[...t.items.map(l=>[...l])];return o[i][s]=a,{...t,items:o}}yd.deps=fn(["height","items","width"],[],[mn]);function vd(t,e,s){for(let i=0;i<t.items.length;++i)for(let a=0;a<t.items[i].length;++a)if(s(a,i,t.items[i][a]))return!0;return!1}vd.deps=fn(["items"]);const ps={computeBounds:mn,map:_d,get:bd,set:yd,some:vd};var wd=(t=>(t[t.Unselected=0]="Unselected",t[t.Selected=1]="Selected",t[t.SelectedRect=2]="SelectedRect",t))(wd||{});const Hg=j.nativeEnum(wd),il=j.object({x1:j.number(),x2:j.number(),y1:j.number(),y2:j.number()});j.object({grid:jg(Hg),rect:j.union([il,j.undefined()]),rectPrev:j.union([il,j.undefined()])});const Vt=wr;function Uo(t,e,s){return 0<=e&&e<t.grid.width&&0<=s&&s<t.grid.height}function oa(t,e){return{grid:gd(t,e,0),rect:void 0,rectPrev:void 0}}oa.deps=Vt();function xd(t,e){return oa(e.width,e.height)}xd.deps=Vt([],[],[oa]);function an(t,e){return t.rect?ps.computeBounds(t.grid,hs,{xStart:Math.min(t.rect.x1,t.rect.x2),xEnd:Math.max(t.rect.x1,t.rect.x2)+1,yStart:Math.min(t.rect.y1,t.rect.y2),yEnd:Math.max(t.rect.y1,t.rect.y2)+1}):ps.computeBounds(t.grid,hs)}an.deps=Vt(["grid","rect"]);function kd(t,e){return ps.some(t.grid,hs,(s,i)=>Mr(t,e,s,i))}kd.deps=Vt(["grid"],[],[Mr]);function Mr(t,e,s,i){const a=ps.get(t.grid,hs,s,i);return a===1||a===2}Mr.deps=Vt(["grid"],[]);function Sd(t,e,s,i,a=!1){if(!t.rectPrev)return t;if(a){const u=Math.min(t.rectPrev.x1,t.rectPrev.x2),d=Math.min(t.rectPrev.y1,t.rectPrev.y2);return Br(t,e,u+s,d+i,!0)}const r=t.rectPrev,o=r.x2+s,l=r.y2+i;return $r({...t,rect:r,rectPrev:r},e,o,l,!0)}Sd.deps=Vt(["rectPrev"],[],[Br,$r]);function Br(t,e,s,i,a=!1){if(!Uo(t,s,i))return t;const r=ps.map(t.grid,hs,(l,u)=>s===l&&i===u?1:0),o={x1:s,x2:s,y1:i,y2:i};return{grid:r,rect:a?void 0:o,rectPrev:o}}Br.deps=Vt(["grid"],[]);function Cd(t,e,s,i){const a=ps.set(t.grid,hs,s,i,1);return{...t,grid:a}}Cd.deps=Vt(["grid"],[]);function Od(t,e,s){const i=ps.map(t.grid,hs,(a,r,o)=>s(a,r)?1:o);return{...t,grid:i}}Od.deps=Vt(["grid"],[]);function Pd(t,e,s,i){if(!Uo(t,s,i))return t;const a=ps.set(t.grid,hs,s,i,1),r={x1:s,x2:s,y1:i,y2:i};return{grid:a,rect:r,rectPrev:r}}Pd.deps=Vt(["grid"],[]);function Ad(t,e){if(!t.rect)return t;const s=an(t),i=ps.map(t.grid,hs,(a,r,o)=>o===2&&ra(s,a,r)?1:o);return{...t,grid:i,rect:void 0}}Ad.deps=Vt(["grid","rect"],[],[an]);function $r(t,e,s,i,a=!1){if(!t.rect||!Uo(t,s,i))return t;const r={...t.rect,x2:s,y2:i},o=an(t),l=an({...t,rect:r});return{grid:ps.map(t.grid,hs,(d,p,f)=>ra(l,d,p)?f===0?2:f:ra(o,d,p)&&f===2?0:f),rect:a?void 0:r,rectPrev:r}}$r.deps=Vt(["grid","rect"],[],[an]);const Ht={clear:xd,hasSelection:kd,isSelected:Mr,move:Sd,restart:Br,select:Cd,selectIf:Od,start:Pd,stop:Ad,update:$r};function qg(t,e){const[s,i]=At(oa(t,e));Yt(()=>{i(oa(t,e))},[t,e]);const a={obj:s,setObj:i,context:{height:e,width:t}},r=$e(Ht.clear,a),o=Nc(Ht.hasSelection,a),l=Nc(Ht.isSelected,a),u=$e(Ht.move,a),d=$e(Ht.restart,a),p=$e(Ht.select,a),f=$e(Ht.selectIf,a),h=$e(Ht.start,a),_=$e(Ht.stop,a),b=$e(Ht.update,a);return[s,{clear:r,hasSelection:o,isSelected:l,move:u,restart:d,select:p,selectIf:f,start:h,stop:_,update:b}]}const rn=["#FF5733","#FFFF00","#00FF00","#FF0066","#FF66FF","#F1C40F","#1ABC9C","#16A085","#2980B9","#66FFFF","#CCFF00","#9B59B6","#99CC33","#FF3300","#FFCC00","#FF6699","#FF6600","#99CC00","#9966CC","#E67E22","#C0392B","#999966","#2ECC71","#FF3399","#FF6666","#66CC99","#FF9900","#E74C3C","#36D7B7","#99CC66","#66FF66","#99CC99","#9999CC","#6699FF","#FF0000","#66CCFF","#FFFF66","#996633","#FF66CC","#9966FF","#CC9966","#66FFCC","#996699","#8E44AD","#999999","#CC6699","#FF33CC","#F39C12","#27AE60","#FF0033","#3498DB","#CC9900","#00FF99","#00FF33","#CC6600","#00FF66","#FF9966","#9999FF","#CC6666","#FFC300","#996600","#66CC66","#CCFF66","#66CC00"],fo={[be.Byte]:"db",[be.Word]:"dw",[be.Long]:"dl"};function Gg(t){t=t.trim();const e=fo[be.Byte],s=fo[be.Word],[i,a]=t.startsWith(e)?[e,be.Byte]:t.startsWith(s)?[s,be.Word]:[void 0,void 0];if(!i)return[void 0,{code:0,message:"no size instruction ('db' or 'dw') found"}];t=t.replace(i,"").trim();const r=t.split(/\s*,\s*/),o=[];for(let u=0;u<r.length;++u){const d=r[u],p=Po(d,{unit:a});if(!p)return[void 0,{code:1,rawValue:d,rawValueIndex:u,message:`value '${t}' is not a valid`}];o.push(p)}const l={integers:o,unit:a};return Id(l)===0?[void 0,{code:2,message:"no values found"}]:[l,void 0]}function Kg(t,e){const s=fo[t.unit],i=t.integers.map(a=>Ml(a,e.encoding,e.isSigned,!0,{unit:t.unit})).join(e.shouldSpaceValues?", ":",");return`${s} ${i}`}function Id(t){return t.integers.length*Dl[t.unit]}const Jg={getSize:Id};var Wt=(t=>(t[t.None=0]="None",t[t.RowNumberDec=1]="RowNumberDec",t[t.RowNumberHex=2]="RowNumberHex",t[t.RowRangeHex=3]="RowRangeHex",t))(Wt||{});const eb=j.nativeEnum(Wt);function tb(t){const e=t.split(/\s*:\s*/),s=[];for(let a=0;a<e.length;++a){const r=e[a],[o,l]=Gg(r);if(l)return[void 0,{code:0,rawChunk:r,rawChunkIndex:a,chunkError:l,message:`chunk ${a}, ${l.message}`}];s.push(o)}const i={chunks:s};return Td(i)===0?[void 0,{code:1,message:"no chunks found"}]:[i,void 0]}function sb(t,e){const s=" ".repeat(e.indentation),i=t.chunks.map(a=>Kg(a,e)).join(" : ");return`${s}${i}`}function Td(t){return cl(t.chunks.map(Jg.getSize))}const Rd={getSize:Td};function ib(t,e,s,i,a,r,o){switch(s){case Wt.RowNumberDec:return`${" ".repeat(t)} ; ${yr(i)}`;case Wt.RowNumberHex:{const l=ot(e-1).length;return`${" ".repeat(t)} ; ${ot(i,l)}`}case Wt.RowRangeHex:{const l=ot(o-1).length,u=ot(r,l),d=ot(r+a-1,l);return`${" ".repeat(t)} ; ${u}-${d}`}}return""}function nb(t){const e=t.split(`
`).map(r=>r.split(";")[0].trim());let s="";const i=[];for(let r=0;r<e.length;++r){const o=e[r];if(!o)continue;if(fh.test(o)){s=o.substring(0,o.length-1);continue}const[l,u]=tb(o);if(u)return[void 0,{code:0,rawRow:o,rawRowIndex:r,rowError:u,message:`row ${r}, ${u.message}`}];i.push(l)}const a={name:s,rows:i};return Ed(a)===0?[void 0,{code:1,message:"no rows found"}]:[a,void 0]}function ab(t,e){const s=t.name?`${t.name}:
`:"",i=t.rows.map(o=>({str:sb(o,e),size:Rd.getSize(o)}));let a=i.map(o=>o.str);if(e.rowCommentType!==Wt.None){const o=Math.max(...i.map(d=>d.str.length)),l=Ed(t);let u=0;a=i.map((d,p)=>{const f=d.str+ib(o-d.str.length,i.length,e.rowCommentType,p,d.size,u,l);return u+=d.size,f})}const r=a.join(`
`);return`${s}${r}`}function Ed(t){return cl(t.rows.map(Rd.getSize))}var Gs=(t=>(t[t.None=0]="None",t[t.ColumnNumberDec=1]="ColumnNumberDec",t[t.ColumnNumberHex=2]="ColumnNumberHex",t[t.ColumnValueHex=3]="ColumnValueHex",t))(Gs||{});const rb=j.nativeEnum(Gs);function ob(t,e,s,i,a,r){const o=ks[r][i]+sa[i].length,l=`;${" ".repeat(Math.max(0,a-1)+3)}`,u=o*e+s*(e-1),d=`${l}${"-".repeat(u)}
`;switch(t){case 1:{const p=rs(e).map(f=>Vr(yr(f),o)).join(" ".repeat(s));return`${l}${p}
${d}`}case 2:{const p=ot(e-1).length,f=rs(e).map(h=>Vr(ot(h,p),o)).join(" ".repeat(s));return`${l}${f}
${d}`}case 3:{const p=ot(e-1).length,f=Dl[r],h=rs(e).map(_=>Vr(ot(_*f,p),o)).join(" ".repeat(s));return`${l}${h}
${d}`}}return""}function cb(t){const e=t.rows.length;if(e===0)return[void 0,{code:3,message:"no data found"}];const s=t.rows.map(l=>{const u=l.chunks[0];return l.chunks.length===1&&u?{cells:u.integers,unit:u.unit}:void 0});if(s.some(l=>!l))return[void 0,{code:0,message:"one or more rows use multiple 'db' or 'dw' instructions"}];const i=s[0].cells.length;if(s.some(l=>l.cells.length!==i))return[void 0,{code:1,message:"one or more rows have a different number of elements"}];const a=s[0].unit;if(s.some(l=>l.unit!==a))return[void 0,{code:2,message:"one or more rows use different 'db' or 'dw' instructions"}];const r=s.map(l=>l.cells),o=t.name;return[{grid:r,height:e,name:o,unit:a,width:i},void 0]}function lb(t){const[e,s]=nb(t);return s?[void 0,{code:0,dataError:s,message:s.message}]:cb(e)}function db(t,e){const s=e.name?`${e.name}:
`:"",i=ob(e.columnCommentType,t.width,e.shouldSpaceValues?2:1,e.encoding,e.indentation,t.unit),a=ub(t),r=ab({...a,name:""},e);return`${s}${i}${r}`}function ub(t){const e=[];for(let s=0;s<t.height;++s){const i=[];for(let r=0;r<t.width;++r){const o=t.grid[s][r];i.push(o)}const a={integers:i,unit:t.unit};e.push({chunks:[a]})}return{name:t.name,rows:e}}const _s=(t,e,s)=>`${t}.grid[${s}][${e}]`,Dd={...ql,isSigned:!1,shouldMoveAfterTyping:!1,typingDirection:ht.Left},hb=ai(({colorOpacity:t,encoding:e,isBackgroundImageVisible:s,id:i,isEditing:a,isSelected:r,onDoubleClick:o,onMouseDown:l,onMouseOver:u,unit:d,x:p,y:f},h)=>{const[_,{setValue:b}]=Io(_s(i,p,f),ia,{unit:d}),w=_.value,[{digits:g}]=Ao(_,rl,{...Dd,encoding:e,unit:d}),q=me(()=>{if(!a)return g.length;const Ye=g.findIndex(Se=>Se!=="0");return Ye===-1?g.length:Ye},[g,a]),W=g.slice(0,q),T=g.slice(q),[R]=ri(`${i}.color.value[${w}]`,rn[w%rn.length]),V=C(()=>{o(w,p,f)},[w,o,p,f]),re=C(()=>{l(p,f)},[l,p,f]),xe=C(()=>{u(p,f)},[u,p,f]),Te=Ct([["IntegerGridEditor_Cell",!0],["selected",r]]),ue=C(()=>_,[_]),te=C(()=>w,[w]);br(h,()=>({get:ue,getValue:te,setValue:b}),[ue,te,b]);const Re=me(()=>r?{opacity:s?.7:1}:{opacity:t/100,backgroundColor:R},[R,t,s,r,w]);return c("div",{class:Te,onDblClick:V,onMouseDown:re,onMouseOver:xe,children:[c("div",{class:"IntegerGridEditor_Cell_Background",style:Re}),c("div",{children:[c("span",{children:W.join("")}),c("span",{children:T.join("")})]})]})}),pb=ai(({backgroundImage:t,backgroundImageOpacity:e=0,columnCommentType:s,colorOpacity:i,encoding:a,height:r,id:o,indentation:l,name:u,onBackgroundImageError:d=()=>{},onCopy:p,onPaste:f,onSelect:h,rowCommentType:_,shouldSpaceValues:b,unit:w,width:g},q)=>{r=Number.isNaN(r)?1:r,g=Number.isNaN(g)?1:g;const W=Le({}),T=Le(!1),[R,V]=qg(g,r),[re,xe]=Lf(ia,{unit:w}),[Te,ue]=Ao(re,C(z=>xe.setValue(z.value),[xe.setValue]),{...Dd,encoding:a,unit:w}),[te,Re]=At(!1);Yt(()=>{Re(!1),xe.setValue(0)},[R]);const Ye=C(z=>{var he;for(let we=0;we<r;++we)for(let ge=0;ge<g;++ge)(he=W.current[_s(o,ge,we)])==null||he.setValue(z)},[r,o,g]),Se=C(z=>{var he;for(let we=0;we<r;++we)for(let ge=0;ge<g;++ge)V.isSelected(ge,we)&&((he=W.current[_s(o,ge,we)])==null||he.setValue(z))},[V.isSelected,r,o,g]),Me=C(()=>{var ge;const z=[];for(let He=0;He<r;++He){const Tt=[];for(let Os=0;Os<g;++Os)Tt.push(((ge=W.current[_s(o,Os,He)])==null?void 0:ge.get())??ia);z.push(Tt)}const he={grid:z,height:r,name:u,unit:w,width:g},we=db(he,{columnCommentType:s,encoding:a,indentation:l,isSigned:!1,rowCommentType:_,shouldSpaceValues:b,name:u});navigator.clipboard.writeText(we),p(he)},[s,r,o,l,u,p,_,b,w,g]),De=C(()=>{navigator.clipboard.readText().then(z=>{const[he,we]=lb(z);if(we)return f([void 0,we]);for(let ge=0;ge<he.grid.length;++ge)for(let He=0;He<he.grid[0].length;++He)js.save(_s(o,He,ge),he.grid[ge][He]);f([he,void 0])})},[o,f]),Be=C(z=>V.selectIf((he,we)=>{const ge=W.current[_s(o,he,we)];return!!(ge&&ge.getValue()===z)}),[V.selectIf,o]),ke=C((z,he,we)=>{var ge,He;if((ge=mt.current)==null||ge.focus(),T.current)V.start(z,he);else{ue.clear(),V.restart(z,he,we);const Tt=(He=W.current[_s(o,z,he)])==null?void 0:He.getValue();Tt!==void 0&&h(Tt)}},[V.restart,V.start,ue.clear]),Ke=C((z,he)=>V.update(z,he),[V.update]),oe=C(()=>{V.stop()},[V.stop]),K=C(z=>{(()=>{const we=ge=>{Re(!0);const He=dr(ge,{encoding:a,unit:w});return Se(He?He.value:0),!0};return z.key==="c"&&(z.ctrlKey||z.metaKey)?at(Me()):z.key==="v"&&(z.ctrlKey||z.metaKey)?at(De()):((z.ctrlKey||z.metaKey||z.shiftKey)&&(T.current=!0),z.key==="Delete"?we(ue.clear()):z.key==="Backspace"?we(ue.removeDigit()):kr(z.key,a)?we(ue.insertDigit(z.key)):z.key==="ArrowDown"?at(V.move(0,1,!T.current)):z.key==="ArrowLeft"?at(V.move(-1,0,!T.current)):z.key==="ArrowRight"?at(V.move(1,0,!T.current)):z.key==="ArrowUp"?at(V.move(0,-1,!T.current)):!1)})()&&z.preventDefault()},[V.move,ue.clear,ue.deleteDigit,ue.insertDigit,ue.removeDigit,Se,Me,a,De,w]),ye=C(z=>{!z.ctrlKey&&!z.metaKey&&!z.shiftKey&&(T.current=!1),!1},[]);on(()=>{const z=()=>T.current=!1;return window.addEventListener("focus",z),window.addEventListener("mouseup",oe),()=>{window.removeEventListener("focus",z),window.removeEventListener("mouseup",oe)}},[oe]);const je=C(()=>{V.hasSelection()||ke(0,0,!0)},[V.hasSelection,ke]),Je=C(()=>{ue.clear(),V.clear()},[V.clear,ue.clear]),mt=Le(null),A=C(()=>{V.clear(),ue.clear(),Ye(0)},[V.clear,ue.clear,Ye]),H=C(()=>ke(0,0,!0),[ke]);br(q,()=>({clear:A,copy:Me,focus:H,paste:De}),[A,Me,H,De]);const Pe=me(()=>({maxWidth:`${g*3.4}em`}),[g]),Bt=me(()=>({opacity:e/100}),[e]);return c("div",{class:"IntegerGridEditor",children:c("div",{class:"IntegerGridEditor_Grid",onBlur:Je,onFocus:je,onKeyDown:K,onKeyUp:ye,ref:mt,style:Pe,tabIndex:0,children:[rs(r).map(z=>c("div",{class:"IntegerGridEditor_Row",children:rs(g).map(he=>c(hb,{colorOpacity:i,encoding:a,id:o,isBackgroundImageVisible:!!t,isEditing:te,isSelected:V.isSelected(he,z),onDoubleClick:Be,onMouseDown:ke,onMouseOver:Ke,ref:we=>{we&&(W.current[_s(o,he,z)]=we)},unit:w,x:he,y:z},_s(o,he,z)))},z)),t&&c("img",{class:"IntegerGridEditor_Background",onError:d,src:t,style:Bt})]})})}),Ge="TableEditor",Nd=()=>ri(`${Ge}.backgroundImage.fileName`,""),Ld=()=>ri(`${Ge}.backgroundImage.image`,""),Md=()=>Oe(`${Ge}.backgroundImage.isVisible`,!0),Bd=()=>Ms(`${Ge}.backgroundImage.opacity`,25),fb=t=>ri(`${Ge}.color.value[${t}]`,rn[t%rn.length]),$d=()=>Ms(`${Ge}.color.opacity`,0),Vd=()=>Ve(`${Ge}.columnCommentType`,Gs.None,rb.parse),Zo=()=>Ve("TableEditor.table.encoding",X.Hex,vf.parse),Fd=()=>Ms(`${Ge}.indentation`,0),zd=()=>ri(`${Ge}.name`,""),Qd=()=>Ve(`${Ge}.rowCommentType`,Wt.None,eb.parse),Wd=()=>Ms(`${Ge}.selectedValue`,0),Ud=()=>Oe(`${Ge}.shouldSpaceValues`,!1),Zd=()=>Ms(`${Ge}.size.height`,16),Xd=()=>Ms(`${Ge}.size.width`,16),Yd=()=>Oe(`${Ge}.tab.appearance.isVisible`,!0),jd=()=>Oe(`${Ge}.tab.settings.isVisible`,!0),Hd=()=>Oe(`${Ge}.tab.tutorial.isVisible`,!1),Xo=()=>Ve(`${Ge}.unit`,be.Byte,El.parse),Hr=t=>()=>{document.activeElement&&document.activeElement.dispatchEvent(new KeyboardEvent("keydown",{key:t}))},nl=$i.isMobile?[...xr.map(t=>({label:t,onClick:Hr(t)})),{label:"DEL",onClick:Hr("Delete"),size:"xs"},{label:"",onClick:Hr("Backspace")}]:[];function mb(){return nl.length>0?c("div",{class:"App_Center",children:c(Gl,{actions:nl,rowSize:9})}):null}function gb(){const t=Le(null),[e]=Zo(),[s,i]=Xo(),[a,r]=Zd(),[o,l]=Xd(),[u,d]=zd(),[p]=Fd(),f=Number.isNaN(p)?0:p,[h]=Vd(),[_]=Qd(),[b]=Ud(),[w]=$d(),[g,q]=Nd(),[W,T]=Ld(),[R]=Bd(),[V]=Md(),[re,xe]=Wd(),[Te,ue]=At(""),te=C(()=>ue(""),[]),Re=C(()=>{var K;(K=t.current)==null||K.clear(),te()},[te]),Ye=C(()=>{T(""),q("")},[T,q]),[Se,Me]=Lo(yo,_o,1e3),De=C(()=>{var K;(K=t.current)==null||K.copy()},[]),Be=C(()=>{var K;(K=t.current)==null||K.paste()},[te,r,d,i,l]),ke=C(K=>{const[ye,je]=K;if(je)return ue(je.message);te(),d(ye.name),r(ye.height),l(ye.width),i(ye.unit)},[te,r,d,i,l]),Ke=me(()=>[{key:"Tab",onPress:()=>{var ye;return dl()?at((ye=t.current)==null?void 0:ye.focus()):!1}}],[De,Be]);dn(Ke);const oe=me(()=>[{icon:hl,onClick:Be,tooltip:"Paste"},{icon:Se,onClick:De,tooltip:"Copy"},{icon:er,onClick:Re,tooltip:"Clear"}],[Se,Re,De,Be]);return c(No,{actions:oe,label:"Table Editor",children:c("div",{class:"App_SectionCol",children:[Te&&c("div",{class:"App_SectionCluster",children:[c("div",{class:"flex_1"}),c("div",{class:"App_ErrorMessage",children:`Import failed: ${Te}`}),c(aa,{Icon:er,onClick:te,tooltip:"Clear"})]}),c(pb,{columnCommentType:h,backgroundImage:V?W:void 0,backgroundImageOpacity:R,colorOpacity:w,encoding:e,height:a,indentation:f,id:Ge,name:u,onBackgroundImageError:Ye,onCopy:Me,onPaste:ke,onSelect:xe,ref:t,rowCommentType:_,shouldSpaceValues:b,unit:s,width:o}),c(mb,{})]})})}function bb(){const[,t]=Yd(),[,e]=jd(),[,s]=Hd(),[i]=xo(),a=me(()=>{const r=[];return i&&(r.push({key:"h",onPress:()=>s(qt)}),r.push({key:"s",onPress:()=>e(qt)}),r.push({key:"t",onPress:()=>t(qt)})),r},[t,e,s]);return dn(a),null}function _b({fileName:t,onChange:e,placeholder:s}){const i=Le(null),a=C(()=>e(void 0),[e]),r=C(()=>{var u;(u=i.current)==null||u.click()},[]),o=C(u=>{var d;(u.key==="Enter"||u.key===" ")&&((d=i.current)==null||d.click()),(u.key==="Backspace"||u.key==="Delete")&&a()},[a]),l=C(u=>{u.currentTarget.files&&u.currentTarget.files[0]&&e(u.currentTarget.files[0])},[e]);return c("div",{class:"InputFile",onKeyDown:o,onMouseDown:r,tabIndex:0,children:[c("div",{class:"InputFile_Label",children:t||s}),t&&c(aa,{Icon:er,onClick:a,tooltip:"Remove",tooltipPosition:"left"}),c("input",{onChange:l,ref:i,type:"file"})]})}const yb=({isVisible:t})=>t?c(Sh,{size:"1em"}):c(kh,{size:"1em"});function vb(){const[t,e]=Nd(),[s,i]=Ld(),[a,r]=Md(),o=C(()=>{r(qt)},[r]),l=C(u=>{u?(e(u.name),i(URL.createObjectURL(u))):(e(""),i(""))},[i,e]);return c(ne,{label:"Background Image",children:c("div",{class:"App_SectionCluster flex_1 overflow_hidden",children:[c(Nt,{label:c(yb,{isVisible:a}),onClick:o,tooltip:a?"Hide":"Show",tooltipPosition:"right"}),c(_b,{fileName:t,onChange:l,placeholder:"Upload image"})]})})}function qd({max:t,min:e,onChange:s,step:i,value:a}){const r=C(o=>{const l=Number.parseInt(o.currentTarget.value);Number.isNaN(l)||s(l)},[s]);return c("input",{class:"Slider",max:t,min:e,onChange:r,step:i,type:"range",value:a})}function wb(){const[t,e]=Bd();return c(ne,{label:"Background Image Opacity",children:c(qd,{max:100,min:0,onChange:e,step:1,value:t})})}const xb=Number.parseInt("FFFFFF",16)/2;function kb({onChange:t,value:e}){const s=C(a=>{t(a.currentTarget.value)},[t]),i=Number.parseInt(e.substring(1),16)<xb?Ki[Ot.Dark].neutral1:Ki[Ot.Light].neutral1;return c("label",{class:"ColorInput",style:{backgroundColor:e,color:i},children:[c(Oh,{size:"1em"}),c("div",{class:"ColorInput_Value",children:e}),c("input",{onChange:s,type:"color",value:e})]})}function Sb(){const[t]=Zo(),[e]=Xo(),[s,i]=Wd(),[a,r]=fb(s),o=C(()=>{r(rn[s%rn.length])},[r,s]);return c(ne,{label:"Value Color",children:c("div",{class:"App_SectionCluster flex_1 flex-wrap_wrap",children:[c(As,{encoding:t,onChange:i,placeholder:"00",value:s,unit:e}),c(kb,{onChange:r,value:a}),c(Nt,{label:"Reset",onClick:o})]})})}function Cb(){const[t,e]=$d();return c(ne,{label:"Color Opacity",children:c(qd,{max:100,min:0,onChange:e,step:1,value:t})})}function Ob(){const[t,e]=Yd();return c(It,{isVisible:t,label:"Appearance",onChange:e,children:c("div",{class:"App_SectionCol",children:[c("div",{class:"App_SectionFullRow",children:[c(vb,{}),c(wb,{})]}),c("div",{class:"App_SectionFullRow",children:[c(Sb,{}),c(Cb,{})]})]})})}const Pb=[{label:"None",value:Gs.None},{label:"Column Number (dec)",value:Gs.ColumnNumberDec},{label:"Column Number (hex)",value:Gs.ColumnNumberHex},{label:"Column Value (hex)",value:Gs.ColumnValueHex}];function Ab(){const[t,e]=Vd();return c(ne,{label:"Column Comment",children:c(So,{onChange:e,options:Pb,placeholder:"Column Comment",value:t})})}const Ib=[{label:"Bin",value:X.Bin},{label:"Dec",value:X.Dec},{label:"Hex",value:X.Hex}];function Tb(){const[t,e]=Zo();return c(ne,{label:"Encoding",children:c(dt,{onChange:e,options:Ib,value:t})})}function Rb(){const[t,e]=Fd();return c(ne,{label:"Indentation",children:c(Lr,{isInteger:!0,max:100,min:0,onChange:e,placeholder:"0",value:t})})}function Eb(){const[t,e]=zd();return c(ne,{label:"Table Name",children:c(md,{onChange:e,pattern:ph,placeholder:"Table Name",value:t})})}const Db=[{label:"None",value:Wt.None},{label:"Row Number (dec)",value:Wt.RowNumberDec},{label:"Row Number (hex)",value:Wt.RowNumberHex},{label:"Row Range (hex)",value:Wt.RowRangeHex}];function Nb(){const[t,e]=Qd();return c(ne,{label:"Row Comment",children:c(So,{onChange:e,options:Db,placeholder:"Row Comment",value:t})})}function Lb(){const[t,e]=Zd();return c(ne,{label:"Height",children:c(Lr,{isInteger:!0,max:50,min:1,onChange:e,placeholder:"1",value:t})})}function Mb(){const[t,e]=Xd();return c(ne,{label:"Width",children:c(Lr,{isInteger:!0,max:50,min:1,onChange:e,placeholder:"1",value:t})})}const Bb=[{label:"Yes",value:!0},{label:"No",value:!1}];function $b(){const[t,e]=Ud();return c(ne,{label:"Space Values",children:c(dt,{onChange:e,options:Bb,value:t})})}const Vb=[{label:"Byte",value:be.Byte},{label:"Word",value:be.Word}];function Fb(){const[t,e]=Xo();return c(ne,{label:"Unit (Y/W)",children:c(dt,{onChange:e,options:Vb,value:t})})}function zb(){const[t,e]=jd();return c(It,{isVisible:t,label:"Settings",onChange:e,children:c("div",{class:"App_SectionCol",children:[c("div",{class:"App_SectionRow",children:[c(Tb,{}),c(Fb,{}),c(Mb,{}),c(Lb,{}),c(Eb,{})]}),c("div",{class:"App_SectionRow",children:[c(Ab,{}),c(Nb,{}),c(Rb,{}),c($b,{})]})]})})}const Qb=[{name:"Copy",description:"Copy the table to the clipboard via the copy icon button on the top right of the grid. The table will be formatted according to its settings.",keybindings:["Ctrl+C","Cmd+C"]},{name:"Paste",description:'Paste an ASM table from the clipboard into the tool via the paste icon button on the top right of the grid. Every row of the table has to start either with "db" or "dw", no mixed values are admitted. Every row must have the same number of elements. One label is admitted and, if present, will be used as table name. No other ASM code is allowed. Comments will be removed. Any error will cause the operation to fail and display a message below the icon buttons.',keybindings:["Ctrl+V","Cmd+V"]},{name:"Clear",description:"Clear the grid by pressing the X icon button. Clearing the grid sets all values to zero.",keybindings:[]},{name:"Type",description:"Type a valid digit to edit selected cells.",keybindings:["Digit"]},{name:"Backspace ()",description:"Delete the last typed digit in the selection.",keybindings:[]},{name:"Delete (DEL)",description:"It sets the value of the selection to zero.",keybindings:[]},{name:"Movement",description:"Select the next cell in the corresponding direction.",keybindings:["Arrow"]},{name:"Multi-Selection",description:"Select multiple groups of cells at once.",keybindings:["Shift","Ctrl","Cmd"]}],Wb=[{name:"Encoding",values:[{type:"Bin",description:"Display table values in binary form."},{type:"Dec",description:"Display table values in decimal form."},{type:"Hex",description:"Display table values in hexadecimal form."}],keybindings:[]},{name:"Unit",values:[{type:"Byte",description:"Display table values in 8-bit. The high byte is preserved and restored once switching back to 16-bit.",keybindings:["Y"]},{type:"Word",description:"Display table values in 16-bit.",keybindings:["W"]}]},{name:"Width",values:[{type:"#Number",description:"Number of columns of the table. If you shrink then expand the table again, the previous column values will be restored."}],keybindings:[]},{name:"Height",values:[{type:"#Number",description:"Number of rows of the table. If you shrink then expand the table again, the previous row values will be restored."}],keybindings:[]},{name:"Table Name",values:[{type:"#Text",description:"Name (label) of the table. The table name can only contain letters, digits, and underscores, it cannot start with a digit, and it can start with any number of periods."}],keybindings:[]},{name:"Column Comment",values:[{type:"None",description:"No comment will be added."},{type:"Column Number (dec)",description:"A comment line will be added on top of the table values when copied, with the index of the column (in decimal) aligned with each column."},{type:"Column Number (hex)",description:"A comment line will be added on top of the table values when copied, with the index of the column (in hexadecimal) aligned with each column."},{type:"Column Value (hex)",description:"A comment line will be added on top of the table values when copied, with the value of the column aligned with each column. The value of the column is the column index if the unit is byte, and the column index times two if the unit is word."}],keybindings:[]},{name:"Row Comment",values:[{type:"None",description:"No comment will be added."},{type:"Row Number (dec)",description:"A comment will be added next to each row when copied, with the index of the row (in decimal)."},{type:"Row Number (hex)",description:"A comment will be added next to each row when copied, with the index of the row (in hexadecimal)."},{type:"Row Range (hex)",description:'A comment will be added next to each row when copied, with the range of values covered by the row. E.g., for the second row of a table of width 8 it will be "8-F".'}],keybindings:[]},{name:"Indentation",values:[{type:"#Number",description:"Number of spaces to prepend to each row while copying it."}],keybindings:[]},{name:"Space Values",values:[{type:"Yes",description:"Add a space between each value on a row while copying the table."},{type:"No",description:"Don't add a space between each value on a row while copying the table."}],keybindings:[]}],Ub=[{name:"Background Image",values:[{type:"#File",description:"An image to display as background for the table. You can toggle the image visibility with the icon button."}],keybindings:[]},{name:"Background Image Opacity",values:[{type:"#Number",description:"Opacity for the background image."}],keybindings:[]},{name:"Decimal Value Color",values:[{type:"#Number+Color",description:"Background color for cells with the specified value. Every value has a corresponding color that's useful to distinguish blocks of values. Selecting a cell in the table will set its value in this editor. Use the reset button to restore the default color for the value."}],keybindings:[]},{name:"Color Opacity",values:[{type:"#Number",description:"Opacity for the background background colors of the cells."}],keybindings:[]}],Zb=[{name:"Settings",description:"Toggle settings tab visibility.",keybindings:["S"]},{name:"Appearance",description:"Toggle appearance tab visibility.",keybindings:["T"]},{name:"Instructions",description:"Toggle instructions tab visibility.",keybindings:["H"]}];function Xb(){const[t,e]=Hd();return c(le,{isVisible:t,onChangeVisibility:e,children:[c(le.Section,{title:"General",children:c("div",{children:"Click on the table to select cells and type to modify them. You can use the icon buttons on the top right of the grid to copy, paste, and clear the table."})}),c(le.Section,{title:"Actions",children:[c("div",{children:"Actions that can be performed while something is selected in the table."}),c(le.Actions,{actions:Qb})]}),c(le.Section,{title:"Settings",children:[c("div",{children:"Settings used for visualization and for exporting the table."}),c(le.Settings,{settings:Wb})]}),c(le.Section,{title:"Appearance",children:[c("div",{children:"Settings used for visualization only."}),c(le.Settings,{settings:Ub})]}),c(le.Section,{title:"Visibility",children:[c("div",{children:"Shortcuts to toggle sections' visibility."}),c(le.Actions,{actions:Zb})]})]})}function Yb(){return c("div",{class:"App_Module",children:[c(bb,{}),c("div",{class:"App_ModuleBlock",children:c(gb,{})}),c("div",{class:"App_ModuleBlock",children:[c(zb,{}),c(Ob,{}),c(Xb,{})]})]})}const mo=[{Content:Sm,Icon:yh,id:"/w/calculator",name:"Calculator"},{Content:Yb,Icon:Ih,id:"/w/table-editor",name:"Table Editor"},{Content:Yg,Icon:wh,id:"/w/emulator",name:"Emulator"}],Gd=[{Content:gf,Icon:Ah,id:"/settings",name:"Settings"},{Content:Hp,Icon:Ch,id:"/info",name:"Info"}],Qn=[...mo,...Gd];function jb(){const[t,e]=tf(),s=C(()=>{const o=window.location.hash.substring(1),l=Qn.some(u=>u.id===o)?o:Qn.some(u=>u.id===t)?t:Qn[0].id;return o!==l&&(window.location.hash=`#${l}`),t!==l&&e(l),l},[e,t]),[i,a]=At(s),r=C(o=>{a(o),window.location.hash=`#${o}`},[]);return on(()=>{const o=()=>a(s());return window.addEventListener("popstate",o),()=>window.removeEventListener("popstate",o)},[s]),[i,r]}function al({index:t,isSelected:e,module:s,onClick:i}){return c("div",{class:"App_Menu_Item",children:c(Nt,{isBorderless:!0,isSelected:e,label:c(s.Icon,{size:"2em"}),onClick:i,tooltip:`${s.name} (Ctrl+${t})`,tooltipPosition:"right"})})}function Hb(){ef();const[t,e]=jb(),s=me(()=>{var a;return((a=Qn.find(r=>r.id===t))==null?void 0:a.Content)??(()=>null)},[t]),i=me(()=>Qn.flatMap((a,r)=>[{key:`${r+1}`,ctrl:!0,onPress:()=>at(e(a.id))},{key:`${r+1}`,meta:!0,onPress:()=>at(e(a.id))}]),[e]);return dn(i),c("div",{class:"App",children:[c("div",{class:"App_Menu",children:[mo.map((a,r)=>c(al,{index:r+1,isSelected:a.id===t,module:a,onClick:()=>e(a.id)},a.id)),c("div",{class:"flex_1"}),Gd.map((a,r)=>c("div",{class:"App_Menu_Item",children:c(al,{index:mo.length+r+1,isSelected:a.id===t,module:a,onClick:()=>e(a.id)},a.id)},a.id))]}),c("div",{class:"App_Content",children:c(s,{})})]})}eh(c(Hb,{}),document.getElementById("app"));
